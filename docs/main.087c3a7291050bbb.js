(self.webpackChunkscanner=self.webpackChunkscanner||[]).push([[179],{16:(Fo,Po,W)=>{"use strict";function nt(e){return"function"==typeof e}function Bo(e){const n=e(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const As=Bo(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,a)=>`${a+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Is(e,t){if(e){const n=e.indexOf(t);0<=n&&e.splice(n,1)}}class vn{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const c of n)c.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(nt(r))try{r()}catch(c){t=c instanceof As?c.errors:[c]}const{_finalizers:a}=this;if(a){this._finalizers=null;for(const c of a)try{te(c)}catch(d){t=null!=t?t:[],d instanceof As?t=[...t,...d.errors]:t.push(d)}}if(t)throw new As(t)}}add(t){var n;if(t&&t!==this)if(this.closed)te(t);else{if(t instanceof vn){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}}_hasParent(t){const{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){const{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Is(n,t)}remove(t){const{_finalizers:n}=this;n&&Is(n,t),t instanceof vn&&t._removeParent(this)}}vn.EMPTY=(()=>{const e=new vn;return e.closed=!0,e})();const Bt=vn.EMPTY;function Jt(e){return e instanceof vn||e&&"closed"in e&&nt(e.remove)&&nt(e.add)&&nt(e.unsubscribe)}function te(e){nt(e)?e():e.unsubscribe()}const un={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},at={setTimeout(e,t,...n){const{delegate:r}=at;return(null==r?void 0:r.setTimeout)?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){const{delegate:t}=at;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function _s(e){at.setTimeout(()=>{const{onUnhandledError:t}=un;if(!t)throw e;t(e)})}function Ge(){}const Ts=Ce("C",void 0,void 0);function Ce(e,t,n){return{kind:e,value:t,error:n}}let Be=null;function Tr(e){if(un.useDeprecatedSynchronousErrorHandling){const t=!Be;if(t&&(Be={errorThrown:!1,error:null}),e(),t){const{errorThrown:n,error:r}=Be;if(Be=null,n)throw r}}else e()}class Z extends vn{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Jt(t)&&t.add(this)):this.destination=V}static create(t,n,r){return new Dt(t,n,r)}next(t){this.isStopped?ht(function Ct(e){return Ce("N",e,void 0)}(t),this):this._next(t)}error(t){this.isStopped?ht(function ko(e){return Ce("E",void 0,e)}(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?ht(Ts,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ke=Function.prototype.bind;function Y(e,t){return ke.call(e,t)}class ui{constructor(t){this.partialObserver=t}next(t){const{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){ue(r)}}error(t){const{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){ue(r)}else ue(t)}complete(){const{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){ue(n)}}}class Dt extends Z{constructor(t,n,r){let a;if(super(),nt(t)||!t)a={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0};else{let c;this&&un.useDeprecatedNextContext?(c=Object.create(t),c.unsubscribe=()=>this.unsubscribe(),a={next:t.next&&Y(t.next,c),error:t.error&&Y(t.error,c),complete:t.complete&&Y(t.complete,c)}):a=t}this.destination=new ui(a)}}function ue(e){un.useDeprecatedSynchronousErrorHandling?function et(e){un.useDeprecatedSynchronousErrorHandling&&Be&&(Be.errorThrown=!0,Be.error=e)}(e):_s(e)}function ht(e,t){const{onStoppedNotification:n}=un;n&&at.setTimeout(()=>n(e,t))}const V={closed:!0,next:Ge,error:function je(e){throw e},complete:Ge},gt="function"==typeof Symbol&&Symbol.observable||"@@observable";function De(e){return e}let lt=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,a){const c=function br(e){return e&&e instanceof Z||function jt(e){return e&&nt(e.next)&&nt(e.error)&&nt(e.complete)}(e)&&Jt(e)}(n)?n:new Dt(n,r,a);return Tr(()=>{const{operator:d,source:p}=this;c.add(d?d.call(c,p):p?this._subscribe(c):this._trySubscribe(c))}),c}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=bs(r))((a,c)=>{const d=new Dt({next:p=>{try{n(p)}catch(m){c(m),d.unsubscribe()}},error:c,complete:a});this.subscribe(d)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[gt](){return this}pipe(...n){return function zn(e){return 0===e.length?De:1===e.length?e[0]:function(n){return e.reduce((r,a)=>a(r),n)}}(n)(this)}toPromise(n){return new(n=bs(n))((r,a)=>{let c;this.subscribe(d=>c=d,d=>a(d),()=>r(c))})}}return e.create=t=>new e(t),e})();function bs(e){var t;return null!==(t=null!=e?e:un.Promise)&&void 0!==t?t:Promise}const Ht=Bo(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Yr=(()=>{class e extends lt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new ae(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ht}next(n){Tr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Tr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Tr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:a,observers:c}=this;return r||a?Bt:(this.currentObservers=null,c.push(n),new vn(()=>{this.currentObservers=null,Is(c,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:a,isStopped:c}=this;r?n.error(a):c&&n.complete()}asObservable(){const n=new lt;return n.source=this,n}}return e.create=(t,n)=>new ae(t,n),e})();class ae extends Yr{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,t)}error(t){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,t)}complete(){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===n||n.call(t)}_subscribe(t){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(t))&&void 0!==r?r:Bt}}function st(e){return t=>{if(function bi(e){return nt(null==e?void 0:e.lift)}(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function sr(e,t,n,r,a){return new fi(e,t,n,r,a)}class fi extends Z{constructor(t,n,r,a,c,d){super(t),this.onFinalize=c,this.shouldUnsubscribe=d,this._next=n?function(p){try{n(p)}catch(m){t.error(m)}}:super._next,this._error=a?function(p){try{a(p)}catch(m){t.error(m)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(p){t.error(p)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}}}function Qt(e){return this instanceof Qt?(this.v=e,this):new Qt(e)}function Gt(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,r=n.apply(e,t||[]),c=[];return a={},d("next"),d("throw"),d("return"),a[Symbol.asyncIterator]=function(){return this},a;function d(b){r[b]&&(a[b]=function(v){return new Promise(function(O,B){c.push([b,v,O,B])>1||p(b,v)})})}function p(b,v){try{!function m(b){b.value instanceof Qt?Promise.resolve(b.value.v).then(y,C):A(c[0][2],b)}(r[b](v))}catch(O){A(c[0][3],O)}}function y(b){p("next",b)}function C(b){p("throw",b)}function A(b,v){b(v),c.shift(),c.length&&p(c[0][0],c[0][1])}}function Mi(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,t=e[Symbol.asyncIterator];return t?t.call(e):(e=function Ms(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(c){n[c]=e[c]&&function(d){return new Promise(function(p,m){!function a(c,d,p,m){Promise.resolve(m).then(function(y){c({value:y,done:p})},d)}(p,m,(d=e[c](d)).done,d.value)})}}}const Oi=e=>e&&"number"==typeof e.length&&"function"!=typeof e;function Ns(e){return nt(null==e?void 0:e.then)}function Le(e){return nt(e[gt])}function hi(e){return Symbol.asyncIterator&&nt(null==e?void 0:e[Symbol.asyncIterator])}function Os(e){return new TypeError(`You provided ${null!==e&&"object"==typeof e?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const fn=function xl(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Ri(e){return nt(null==e?void 0:e[fn])}function ar(e){return Gt(this,arguments,function*(){const n=e.getReader();try{for(;;){const{value:r,done:a}=yield Qt(n.read());if(a)return yield Qt(void 0);yield yield Qt(r)}}finally{n.releaseLock()}})}function Sr(e){return nt(null==e?void 0:e.getReader)}function Nn(e){if(e instanceof lt)return e;if(null!=e){if(Le(e))return function On(e){return new lt(t=>{const n=e[gt]();if(nt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(e);if(Oi(e))return function wl(e){return new lt(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}(e);if(Ns(e))return function vr(e){return new lt(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,_s)})}(e);if(hi(e))return dn(e);if(Ri(e))return function Rs(e){return new lt(t=>{for(const n of e)if(t.next(n),t.closed)return;t.complete()})}(e);if(Sr(e))return function Mr(e){return dn(ar(e))}(e)}throw Os(e)}function dn(e){return new lt(t=>{(function Zr(e,t){var n,r,a,c;return function Re(e,t,n,r){return new(n||(n=Promise))(function(c,d){function p(C){try{y(r.next(C))}catch(A){d(A)}}function m(C){try{y(r.throw(C))}catch(A){d(A)}}function y(C){C.done?c(C.value):function a(c){return c instanceof n?c:new n(function(d){d(c)})}(C.value).then(p,m)}y((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Mi(e);!(r=yield n.next()).done;)if(t.next(r.value),t.closed)return}catch(d){a={error:d}}finally{try{r&&!r.done&&(c=n.return)&&(yield c.call(n))}finally{if(a)throw a.error}}t.complete()})})(e,t).catch(n=>t.error(n))})}function $(e,t,n,r=0,a=!1){const c=t.schedule(function(){n(),a?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(c),!a)return c}function Ls(e,t,n=1/0){return nt(t)?Ls((r,a)=>function Zt(e,t){return st((n,r)=>{let a=0;n.subscribe(sr(r,c=>{r.next(e.call(t,c,a++))}))})}((c,d)=>t(r,c,a,d))(Nn(e(r,a))),n):("number"==typeof t&&(n=t),st((r,a)=>function Qr(e,t,n,r,a,c,d,p){const m=[];let y=0,C=0,A=!1;const b=()=>{A&&!m.length&&!y&&t.complete()},v=B=>y<r?O(B):m.push(B),O=B=>{c&&t.next(B),y++;let H=!1;Nn(n(B,C++)).subscribe(sr(t,j=>{null==a||a(j),c?v(j):t.next(j)},()=>{H=!0},void 0,()=>{if(H)try{for(y--;m.length&&y<r;){const j=m.shift();d?$(t,d,()=>O(j)):O(j)}b()}catch(j){t.error(j)}}))};return e.subscribe(sr(t,v,()=>{A=!0,b()})),()=>{null==p||p()}}(r,a,e,n)))}const Ho=new lt(e=>e.complete());function Fs(e){return e[e.length-1]}function Wn(e,t=0){return st((n,r)=>{n.subscribe(sr(r,a=>$(r,e,()=>r.next(a),t),()=>$(r,e,()=>r.complete(),t),a=>$(r,e,()=>r.error(a),t)))})}function zo(e,t=0){return st((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function rt(e,t){if(!e)throw new Error("Iterable cannot be null");return new lt(n=>{$(n,t,()=>{const r=e[Symbol.asyncIterator]();$(n,t,()=>{r.next().then(a=>{a.done?n.complete():n.next(a.value)})},0,!0)})})}function Pe(...e){const t=function yl(e){return function Go(e){return e&&nt(e.schedule)}(Fs(e))?e.pop():void 0}(e),n=function El(e,t){return"number"==typeof Fs(e)?e.pop():t}(e,1/0),r=e;return r.length?1===r.length?Nn(r[0]):function Cn(e=1/0){return Ls(De,e)}(n)(function Ue(e,t){return t?function Dl(e,t){if(null!=e){if(Le(e))return function lr(e,t){return Nn(e).pipe(zo(t),Wn(t))}(e,t);if(Oi(e))return function G(e,t){return new lt(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}(e,t);if(Ns(e))return function Ps(e,t){return Nn(e).pipe(zo(t),Wn(t))}(e,t);if(hi(e))return rt(e,t);if(Ri(e))return function Cl(e,t){return new lt(n=>{let r;return $(n,t,()=>{r=e[fn](),$(n,t,()=>{let a,c;try{({value:a,done:c}=r.next())}catch(d){return void n.error(d)}c?n.complete():n.next(a)},0,!0)}),()=>nt(null==r?void 0:r.return)&&r.return()})}(e,t);if(Sr(e))return function qr(e,t){return rt(ar(e),t)}(e,t)}throw Os(e)}(e,t):Nn(e)}(r,t)):Ho}function gi(e,t,...n){if(!0===t)return void e();if(!1===t)return;const r=new Dt({next:()=>{r.unsubscribe(),e()}});return t(...n).subscribe(r)}function He(e){for(let t in e)if(e[t]===He)return t;throw Error("Could not find renamed property on target object.")}function de(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(de).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Rn(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const Al=He({__forward_ref__:He});function it(e){return e.__forward_ref__=it,e.toString=function(){return de(this())},e}function pe(e){return function Wo(e){return"function"==typeof e&&e.hasOwnProperty(Al)&&e.__forward_ref__===it}(e)?e():e}class ie extends Error{constructor(t,n){super(function At(e,t){return`NG0${Math.abs(e)}${t?": "+t:""}`}(t,n)),this.code=t}}function _(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():function N(e){return"string"==typeof e?e:null==e?"":String(e)}(e)}function Fi(e,t){const n=t?` in ${t}`:"";throw new ie(-201,`No provider for ${_(e)} found${n}`)}function ne(e,t){null==e&&function Ke(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}(t,e,null,"!=")}function $e(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function gn(e){return{providers:e.providers||[],imports:e.imports||[]}}function ks(e){return $r(e,cr)||$r(e,Wt)}function $r(e,t){return e.hasOwnProperty(t)?e[t]:null}function Vs(e){return e&&(e.hasOwnProperty(Us)||e.hasOwnProperty(Qo))?e[Us]:null}const cr=He({\u0275prov:He}),Us=He({\u0275inj:He}),Wt=He({ngInjectableDef:He}),Qo=He({ngInjectorDef:He});var me=(()=>((me=me||{})[me.Default=0]="Default",me[me.Host=1]="Host",me[me.Self=2]="Self",me[me.SkipSelf=4]="SkipSelf",me[me.Optional=8]="Optional",me))();let js;function ur(e){const t=js;return js=e,t}function qo(e,t,n){const r=ks(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&me.Optional?null:void 0!==t?t:void Fi(de(e),"Injector")}function Yn(e){return{toString:e}.toString()}var qt=(()=>((qt=qt||{})[qt.OnPush=0]="OnPush",qt[qt.Default=1]="Default",qt))(),F=(()=>{return(e=F||(F={}))[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",F;var e})();const Ie="undefined"!=typeof globalThis&&globalThis,Nt="undefined"!=typeof window&&window,Hs="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,We=Ie||"undefined"!=typeof global&&global||Nt||Hs,Xn={},ge=[],Jr=He({\u0275cmp:He}),fr=He({\u0275dir:He}),ei=He({\u0275pipe:He}),wi=He({\u0275mod:He}),Ne=He({\u0275fac:He}),oe=He({__NG_ELEMENT_ID__:He});let vl=0;function Ye(e){return Yn(()=>{const n={},r={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===qt.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||ge,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||F.Emulated,id:"c",styles:e.styles||ge,_:null,setInput:null,schemas:e.schemas||null,tView:null},a=e.directives,c=e.features,d=e.pipes;return r.id+=vl++,r.inputs=Pi(e.inputs,n),r.outputs=Pi(e.outputs),c&&c.forEach(p=>p(r)),r.directiveDefs=a?()=>("function"==typeof a?a():a).map(Gs):null,r.pipeDefs=d?()=>("function"==typeof d?d():d).map(Ko):null,r})}function Gs(e){return Vt(e)||function tn(e){return e[fr]||null}(e)}function Ko(e){return function Zn(e){return e[ei]||null}(e)}const $o={};function Rr(e){return Yn(()=>{const t={type:e.type,bootstrap:e.bootstrap||ge,declarations:e.declarations||ge,imports:e.imports||ge,exports:e.exports||ge,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&($o[e.id]=e.type),t})}function Pi(e,t){if(null==e)return Xn;const n={};for(const r in e)if(e.hasOwnProperty(r)){let a=e[r],c=a;Array.isArray(a)&&(c=a[1],a=a[0]),n[a]=r,t&&(t[a]=c)}return n}function Vt(e){return e[Jr]||null}function pn(e,t){const n=e[wi]||null;if(!n&&!0===t)throw new Error(`Type ${de(e)} does not have '\u0275mod' property.`);return n}const i=11,f=16,g=18,E=20;function T(e){return Array.isArray(e)&&"object"==typeof e[1]}function S(e){return Array.isArray(e)&&!0===e[1]}function M(e){return 0!=(8&e.flags)}function L(e){return 1==(1&e.flags)}function U(e){return null!==e.template}function q(e){return 0!=(512&e[2])}function Ci(e,t){return e.hasOwnProperty(Ne)?e[Ne]:null}class $p{constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Uf(e){return e.type.prototype.ngOnChanges&&(e.setInput=em),Jp}function Jp(){const e=Hf(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===Xn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function em(e,t,n,r){const a=Hf(e)||function tm(e,t){return e[jf]=t}(e,{previous:Xn,current:null}),c=a.current||(a.current={}),d=a.previous,p=this.declaredInputs[n],m=d[p];c[p]=new $p(m&&m.currentValue,t,d===Xn),e[r]=t}const jf="__ngSimpleChanges__";function Hf(e){return e[jf]||null}let Fl;function xt(e){return!!e.listen}const Gf={createRenderer:(e,t)=>function Pl(){return void 0!==Fl?Fl:"undefined"!=typeof document?document:void 0}()};function Tt(e){for(;Array.isArray(e);)e=e[0];return e}function kn(e,t){return Tt(t[e.index])}function In(e,t){const n=t[e];return T(n)?n:n[0]}function kl(e){return 128==(128&e[2])}function ti(e,t){return null==t?null:e[t]}function Wf(e){e[g]=0}function Vl(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const xe={lFrame:Jf(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Yf(){return xe.bindingsEnabled}function z(){return xe.lFrame.lView}function Fe(){return xe.lFrame.tView}function Rt(){let e=Xf();for(;null!==e&&64===e.type;)e=e.parent;return e}function Xf(){return xe.lFrame.currentTNode}function gr(e,t){const n=xe.lFrame;n.currentTNode=e,n.isParent=t}function Ul(){return xe.lFrame.isParent}function na(){return xe.isInCheckNoChangesMode}function ra(e){xe.isInCheckNoChangesMode=e}function ym(e,t){const n=xe.lFrame;n.bindingIndex=n.bindingRootIndex=e,Hl(t)}function Hl(e){xe.lFrame.currentDirectiveIndex=e}function zl(e){xe.lFrame.currentQueryIndex=e}function Cm(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function Kf(e,t,n){if(n&me.SkipSelf){let a=t,c=e;for(;!(a=a.parent,null!==a||n&me.Host||(a=Cm(c),null===a||(c=c[15],10&a.type))););if(null===a)return!1;t=a,e=c}const r=xe.lFrame=$f();return r.currentTNode=t,r.lView=e,!0}function ia(e){const t=$f(),n=e[1];xe.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function $f(){const e=xe.lFrame,t=null===e?null:e.child;return null===t?Jf(e):t}function Jf(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function ed(){const e=xe.lFrame;return xe.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const td=ed;function sa(){const e=ed();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function ni(e){xe.lFrame.selectedIndex=e}function oa(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const c=e.data[n].type.prototype,{ngAfterContentInit:d,ngAfterContentChecked:p,ngAfterViewInit:m,ngAfterViewChecked:y,ngOnDestroy:C}=c;d&&(e.contentHooks||(e.contentHooks=[])).push(-n,d),p&&((e.contentHooks||(e.contentHooks=[])).push(n,p),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,p)),m&&(e.viewHooks||(e.viewHooks=[])).push(-n,m),y&&((e.viewHooks||(e.viewHooks=[])).push(n,y),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,y)),null!=C&&(e.destroyHooks||(e.destroyHooks=[])).push(n,C)}}function aa(e,t,n){nd(e,t,3,n)}function la(e,t,n,r){(3&e[2])===n&&nd(e,t,n,r)}function Wl(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function nd(e,t,n,r){const c=null!=r?r:-1,d=t.length-1;let p=0;for(let m=void 0!==r?65535&e[g]:0;m<d;m++)if("number"==typeof t[m+1]){if(p=t[m],null!=r&&p>=r)break}else t[m]<0&&(e[g]+=65536),(p<c||-1==c)&&(Mm(e,n,t,m),e[g]=(4294901760&e[g])+m+2),m++}function Mm(e,t,n,r){const a=n[r]<0,c=n[r+1],p=e[a?-n[r]:n[r]];if(a){if(e[2]>>11<e[g]>>16&&(3&e[2])===t){e[2]+=2048;try{c.call(p)}finally{}}}else try{c.call(p)}finally{}}class Ys{constructor(t,n,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function ca(e,t,n){const r=xt(e);let a=0;for(;a<n.length;){const c=n[a];if("number"==typeof c){if(0!==c)break;a++;const d=n[a++],p=n[a++],m=n[a++];r?e.setAttribute(t,p,m,d):t.setAttributeNS(d,p,m)}else{const d=c,p=n[++a];Xl(d)?r&&e.setProperty(t,d,p):r?e.setAttribute(t,d,p):t.setAttribute(d,p),a++}}return a}function rd(e){return 3===e||4===e||6===e}function Xl(e){return 64===e.charCodeAt(0)}function ua(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const a=t[r];"number"==typeof a?n=a:0===n||id(e,n,a,null,-1===n||2===n?t[++r]:null)}}return e}function id(e,t,n,r,a){let c=0,d=e.length;if(-1===t)d=-1;else for(;c<e.length;){const p=e[c++];if("number"==typeof p){if(p===t){d=-1;break}if(p>t){d=c-1;break}}}for(;c<e.length;){const p=e[c];if("number"==typeof p)break;if(p===n){if(null===r)return void(null!==a&&(e[c+1]=a));if(r===e[c+1])return void(e[c+2]=a)}c++,null!==r&&c++,null!==a&&c++}-1!==d&&(e.splice(d,0,t),c=d+1),e.splice(c++,0,n),null!==r&&e.splice(c++,0,r),null!==a&&e.splice(c++,0,a)}function Vi(e){return 32767&e}function Ui(e,t){let n=function Fm(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let Zl=!0;function fa(e){const t=Zl;return Zl=e,t}let Pm=0;function Zs(e,t){const n=ql(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Ql(r.data,e),Ql(t,null),Ql(r.blueprint,null));const a=da(e,t),c=e.injectorIndex;if(function sd(e){return-1!==e}(a)){const d=Vi(a),p=Ui(a,t),m=p[1].data;for(let y=0;y<8;y++)t[c+y]=p[d+y]|m[d+y]}return t[c+8]=a,c}function Ql(e,t){e.push(0,0,0,0,0,0,0,0,t)}function ql(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function da(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,a=t;for(;null!==a;){const c=a[1],d=c.type;if(r=2===d?c.declTNode:1===d?a[6]:null,null===r)return-1;if(n++,a=a[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function ha(e,t,n){!function Bm(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(oe)&&(r=n[oe]),null==r&&(r=n[oe]=Pm++);const a=255&r;t.data[e+(a>>5)]|=1<<a}(e,t,n)}function ld(e,t,n){if(n&me.Optional)return e;Fi(t,"NodeInjector")}function cd(e,t,n,r){if(n&me.Optional&&void 0===r&&(r=null),0==(n&(me.Self|me.Host))){const a=e[9],c=ur(void 0);try{return a?a.get(t,r,n&me.Optional):qo(t,r,n&me.Optional)}finally{ur(c)}}return ld(r,t,n)}const fd={};function Vm(){return new ji(Rt(),z())}function Um(e,t,n,r,a,c){const d=t[1],p=d.data[e+8],C=function ga(e,t,n,r,a){const c=e.providerIndexes,d=t.data,p=1048575&c,m=e.directiveStart,C=c>>20,b=a?p+C:e.directiveEnd;for(let v=r?p:p+C;v<b;v++){const O=d[v];if(v<m&&n===O||v>=m&&O.type===n)return v}if(a){const v=d[m];if(v&&U(v)&&v.type===n)return m}return null}(p,d,n,null==r?function R(e){return 2==(2&e.flags)}(p)&&Zl:r!=d&&0!=(3&p.type),a&me.Host&&c===p);return null!==C?Qs(t,d,C,p):fd}function Qs(e,t,n,r){let a=e[n];const c=t.data;if(function Nm(e){return e instanceof Ys}(a)){const d=a;d.resolving&&function se(e,t){const n=t?`. Dependency path: ${t.join(" > ")} > ${e}`:"";throw new ie(-200,`Circular dependency in DI detected for ${e}${n}`)}(_(c[n]));const p=fa(d.canSeeViewProviders);d.resolving=!0;const m=d.injectImpl?ur(d.injectImpl):null;Kf(e,r,me.Default);try{a=e[n]=d.factory(void 0,c,e,r),t.firstCreatePass&&n>=r.directiveStart&&function vm(e,t,n){const{ngOnChanges:r,ngOnInit:a,ngDoCheck:c}=t.type.prototype;if(r){const d=Uf(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,d),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,d)}a&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,a),c&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,c),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,c))}(n,c[n],t)}finally{null!==m&&ur(m),fa(p),d.resolving=!1,td()}}return a}function dd(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function hd(e,t){return!(e&me.Self||e&me.Host&&t)}class ji{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return function ud(e,t,n,r=me.Default,a){if(null!==e){const c=function jm(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(oe)?e[oe]:void 0;return"number"==typeof t?t>=0?255&t:Vm:t}(n);if("function"==typeof c){if(!Kf(t,e,r))return r&me.Host?ld(a,n,r):cd(t,n,r,a);try{const d=c(r);if(null!=d||r&me.Optional)return d;Fi(n)}finally{td()}}else if("number"==typeof c){let d=null,p=ql(e,t),m=-1,y=r&me.Host?t[f][6]:null;for((-1===p||r&me.SkipSelf)&&(m=-1===p?da(e,t):t[p+8],-1!==m&&hd(r,!1)?(d=t[1],p=Vi(m),t=Ui(m,t)):p=-1);-1!==p;){const C=t[1];if(dd(c,p,C.data)){const A=Um(p,t,n,d,r,y);if(A!==fd)return A}m=t[p+8],-1!==m&&hd(r,t[1].data[p+8]===y)&&dd(c,p,t)?(d=C,p=Vi(m),t=Ui(m,t)):p=-1}}}return cd(t,n,r,a)}(this._tNode,this._lView,t,r,n)}}class Qe{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=$e({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}function pr(e,t){e.forEach(n=>Array.isArray(n)?pr(n,t):t(n))}function pa(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}const Js={},xa="ngTempTokenPath",Jm=/\n/gm,Ed="__source",t2=He({provide:String,useValue:He});let eo;function Cd(e){const t=eo;return eo=e,t}function n2(e,t=me.Default){if(void 0===eo)throw new ie(203,"");return null===eo?qo(e,void 0,t):eo.get(e,t&me.Optional?null:void 0,t)}function qe(e,t=me.Default){return(function bl(){return js}()||n2)(pe(e),t)}const r2=qe;function ic(e){const t=[];for(let n=0;n<e.length;n++){const r=pe(e[n]);if(Array.isArray(r)){if(0===r.length)throw new ie(900,"");let a,c=me.Default;for(let d=0;d<r.length;d++){const p=r[d],m=i2(p);"number"==typeof m?-1===m?a=p.token:c|=m:a=p}t.push(qe(a,c))}else t.push(qe(r))}return t}function i2(e){return e.__NG_DI_FLAG__}const jd="__ngContext__";function Kt(e,t){e[jd]=t}function gc(e){const t=function oo(e){return e[jd]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function mc(e){return e.ngOriginalError}function q2(e,...t){e.error(...t)}class ao{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t),r=function Q2(e){return e&&e.ngErrorLogger||q2}(t);r(this._console,"ERROR",t),n&&r(this._console,"ORIGINAL ERROR",n)}_findOriginalError(t){let n=t&&mc(t);for(;n&&mc(n);)n=mc(n);return n||null}}const ox=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(We))();function xr(e){return e instanceof Function?e():e}var Tn=(()=>((Tn=Tn||{})[Tn.Important=1]="Important",Tn[Tn.DashCase=2]="DashCase",Tn))();function wc(e,t){return undefined(e,t)}function lo(e){const t=e[3];return S(t)?t[3]:t}function yc(e){return qd(e[13])}function Ec(e){return qd(e[4])}function qd(e){for(;null!==e&&!S(e);)e=e[4];return e}function qi(e,t,n,r,a){if(null!=r){let c,d=!1;S(r)?c=r:T(r)&&(d=!0,r=r[0]);const p=Tt(r);0===e&&null!==n?null==a?nh(t,n,p):Di(t,n,p,a||null,!0):1===e&&null!==n?Di(t,n,p,a||null,!0):2===e?function ch(e,t,n){const r=function _a(e,t){return xt(e)?e.parentNode(t):t.parentNode}(e,t);r&&function Ex(e,t,n,r){xt(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,p,d):3===e&&t.destroyNode(p),null!=c&&function Ax(e,t,n,r,a){const c=n[7];c!==Tt(n)&&qi(t,e,r,c,a);for(let p=10;p<n.length;p++){const m=n[p];co(m[1],m,e,t,r,c)}}(t,e,c,n,a)}}function Dc(e,t,n){if(xt(e))return e.createElement(t,n);{const r=null!==n?function sm(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(n):null;return null===r?e.createElement(t):e.createElementNS(r,t)}}function $d(e,t){const n=e[9],r=n.indexOf(t),a=t[3];1024&t[2]&&(t[2]&=-1025,Vl(a,-1)),n.splice(r,1)}function Ic(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function yx(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const a=t[n[r]];if(!(a instanceof Ys)){const c=n[r+1];if(Array.isArray(c))for(let d=0;d<c.length;d+=2){const p=a[c[d]],m=c[d+1];try{m.call(p)}finally{}}else try{c.call(a)}finally{}}}}(e,t),function wx(e,t){const n=e.cleanup,r=t[7];let a=-1;if(null!==n)for(let c=0;c<n.length-1;c+=2)if("string"==typeof n[c]){const d=n[c+1],p="function"==typeof d?d(t):Tt(t[d]),m=r[a=n[c+2]],y=n[c+3];"boolean"==typeof y?p.removeEventListener(n[c],m,y):y>=0?r[a=y]():r[a=-y].unsubscribe(),c+=2}else{const d=r[a=n[c+1]];n[c].call(d)}if(null!==r){for(let c=a+1;c<r.length;c++)r[c]();t[7]=null}}(e,t),1===t[1].type&&xt(t[i])&&t[i].destroy();const n=t[17];if(null!==n&&S(t[3])){n!==t[3]&&$d(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function eh(e,t,n){return function th(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const a=e.data[r.directiveStart].encapsulation;if(a===F.None||a===F.Emulated)return null}return kn(r,n)}(e,t.parent,n)}function Di(e,t,n,r,a){xt(e)?e.insertBefore(t,n,r,a):t.insertBefore(n,r,a)}function nh(e,t,n){xt(e)?e.appendChild(t,n):t.appendChild(n)}function rh(e,t,n,r,a){null!==r?Di(e,t,n,r,a):nh(e,t,n)}let oh=function sh(e,t,n){return 40&e.type?kn(e,n):null};function Ta(e,t,n,r){const a=eh(e,r,t),c=t[i],p=function ih(e,t,n){return oh(e,t,n)}(r.parent||t[6],r,t);if(null!=a)if(Array.isArray(n))for(let m=0;m<n.length;m++)rh(c,a,n[m],p,!1);else rh(c,a,n,p,!1)}function lh(e,t){return null!==t?e[f][6].projection[t.projection]:null}function bc(e,t,n,r,a,c,d){for(;null!=n;){const p=r[n.index],m=n.type;if(d&&0===t&&(p&&Kt(Tt(p),r),n.flags|=4),64!=(64&n.flags))if(8&m)bc(e,t,n.child,r,a,c,!1),qi(t,e,a,p,c);else if(32&m){const y=wc(n,r);let C;for(;C=y();)qi(t,e,a,C,c);qi(t,e,a,p,c)}else 16&m?uh(e,t,r,n,a,c):qi(t,e,a,p,c);n=d?n.projectionNext:n.next}}function co(e,t,n,r,a,c){bc(n,r,e.firstChild,t,a,c,!1)}function uh(e,t,n,r,a,c){const d=n[f],m=d[6].projection[r.projection];if(Array.isArray(m))for(let y=0;y<m.length;y++)qi(t,e,a,m[y],c);else bc(e,t,m,d[3],a,c,!0)}function fh(e,t,n){xt(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Sc(e,t,n){xt(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function dh(e,t,n){let r=e.length;for(;;){const a=e.indexOf(t,n);if(-1===a)return a;if(0===a||e.charCodeAt(a-1)<=32){const c=t.length;if(a+c===r||e.charCodeAt(a+c)<=32)return a}n=a+1}}const hh="ng-template";function _x(e,t,n){let r=0;for(;r<e.length;){let a=e[r++];if(n&&"class"===a){if(a=e[r],-1!==dh(a.toLowerCase(),t,0))return!0}else if(1===a){for(;r<e.length&&"string"==typeof(a=e[r++]);)if(a.toLowerCase()===t)return!0;return!1}}return!1}function gh(e){return 4===e.type&&e.value!==hh}function Tx(e,t,n){return t===(4!==e.type||n?e.value:hh)}function bx(e,t,n){let r=4;const a=e.attrs||[],c=function Mx(e){for(let t=0;t<e.length;t++)if(rd(e[t]))return t;return e.length}(a);let d=!1;for(let p=0;p<t.length;p++){const m=t[p];if("number"!=typeof m){if(!d)if(4&r){if(r=2|1&r,""!==m&&!Tx(e,m,n)||""===m&&1===t.length){if(Qn(r))return!1;d=!0}}else{const y=8&r?m:t[++p];if(8&r&&null!==e.attrs){if(!_x(e.attrs,y,n)){if(Qn(r))return!1;d=!0}continue}const A=Sx(8&r?"class":m,a,gh(e),n);if(-1===A){if(Qn(r))return!1;d=!0;continue}if(""!==y){let b;b=A>c?"":a[A+1].toLowerCase();const v=8&r?b:null;if(v&&-1!==dh(v,y,0)||2&r&&y!==b){if(Qn(r))return!1;d=!0}}}}else{if(!d&&!Qn(r)&&!Qn(m))return!1;if(d&&Qn(m))continue;d=!1,r=m|1&r}}return Qn(r)||d}function Qn(e){return 0==(1&e)}function Sx(e,t,n,r){if(null===t)return-1;let a=0;if(r||!n){let c=!1;for(;a<t.length;){const d=t[a];if(d===e)return a;if(3===d||6===d)c=!0;else{if(1===d||2===d){let p=t[++a];for(;"string"==typeof p;)p=t[++a];continue}if(4===d)break;if(0===d){a+=4;continue}}a+=c?1:2}return-1}return function Nx(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function ph(e,t,n=!1){for(let r=0;r<t.length;r++)if(bx(e,t[r],n))return!0;return!1}function mh(e,t){return e?":not("+t.trim()+")":t}function Rx(e){let t=e[0],n=1,r=2,a="",c=!1;for(;n<e.length;){let d=e[n];if("string"==typeof d)if(2&r){const p=e[++n];a+="["+d+(p.length>0?'="'+p+'"':"")+"]"}else 8&r?a+="."+d:4&r&&(a+=" "+d);else""!==a&&!Qn(d)&&(t+=mh(c,a),a=""),r=d,c=c||!Qn(r);n++}return""!==a&&(t+=mh(c,a)),t}const ye={};function Sh(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const a=n[r],c=n[r+1];if(-1!==c){const d=e.data[c];zl(a),d.contentQueries(2,t[c],c)}}}function uo(e,t,n,r,a,c,d,p,m,y){const C=t.blueprint.slice();return C[0]=a,C[2]=140|r,Wf(C),C[3]=C[15]=e,C[8]=n,C[10]=d||e&&e[10],C[i]=p||e&&e[i],C[12]=m||e&&e[12]||null,C[9]=y||e&&e[9]||null,C[6]=c,C[f]=2==t.type?e[f]:C,C}function Ki(e,t,n,r,a){let c=e.data[t];if(null===c)c=function Uc(e,t,n,r,a){const c=Xf(),d=Ul(),m=e.data[t]=function $x(e,t,n,r,a,c){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:a,attrs:c,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,d?c:c&&c.parent,n,t,r,a);return null===e.firstChild&&(e.firstChild=m),null!==c&&(d?null==c.child&&null!==m.parent&&(c.child=m):null===c.next&&(c.next=m)),m}(e,t,n,r,a),function wm(){return xe.lFrame.inI18n}()&&(c.flags|=64);else if(64&c.type){c.type=n,c.value=r,c.attrs=a;const d=function Ws(){const e=xe.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();c.injectorIndex=null===d?-1:d.injectorIndex}return gr(c,!0),c}function $i(e,t,n,r){if(0===n)return-1;const a=t.length;for(let c=0;c<n;c++)t.push(r),e.blueprint.push(r),e.data.push(null);return a}function fo(e,t,n){ia(t);try{const r=e.viewQuery;null!==r&&Qc(1,r,n);const a=e.template;null!==a&&vh(e,t,a,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Sh(e,t),e.staticViewQueries&&Qc(2,e.viewQuery,n);const c=e.components;null!==c&&function Qx(e,t){for(let n=0;n<t.length;n++)mw(e,t[n])}(t,c)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,sa()}}function Ji(e,t,n,r){const a=t[2];if(256==(256&a))return;ia(t);const c=na();try{Wf(t),function Zf(e){return xe.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&vh(e,t,n,2,r);const d=3==(3&a);if(!c)if(d){const y=e.preOrderCheckHooks;null!==y&&aa(t,y,null)}else{const y=e.preOrderHooks;null!==y&&la(t,y,0,null),Wl(t,0)}if(function gw(e){for(let t=yc(e);null!==t;t=Ec(t)){if(!t[2])continue;const n=t[9];for(let r=0;r<n.length;r++){const a=n[r],c=a[3];0==(1024&a[2])&&Vl(c,1),a[2]|=1024}}}(t),function hw(e){for(let t=yc(e);null!==t;t=Ec(t))for(let n=10;n<t.length;n++){const r=t[n],a=r[1];kl(r)&&Ji(a,r,a.template,r[8])}}(t),null!==e.contentQueries&&Sh(e,t),!c)if(d){const y=e.contentCheckHooks;null!==y&&aa(t,y)}else{const y=e.contentHooks;null!==y&&la(t,y,1),Wl(t,1)}!function Xx(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const a=n[r];if(a<0)ni(~a);else{const c=a,d=n[++r],p=n[++r];ym(d,c),p(2,t[c])}}}finally{ni(-1)}}(e,t);const p=e.components;null!==p&&function Zx(e,t){for(let n=0;n<t.length;n++)pw(e,t[n])}(t,p);const m=e.viewQuery;if(null!==m&&Qc(2,m,r),!c)if(d){const y=e.viewCheckHooks;null!==y&&aa(t,y)}else{const y=e.viewHooks;null!==y&&la(t,y,2),Wl(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),c||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Vl(t[3],-1))}finally{sa()}}function qx(e,t,n,r){const a=t[10],c=!na(),d=function zf(e){return 4==(4&e[2])}(t);try{c&&!d&&a.begin&&a.begin(),d&&fo(e,t,r),Ji(e,t,n,r)}finally{c&&!d&&a.end&&a.end()}}function vh(e,t,n,r,a){const c=function on(){return xe.lFrame.selectedIndex}(),d=2&r;try{ni(-1),d&&t.length>E&&function xh(e,t,n,r){if(!r)if(3==(3&t[2])){const c=e.preOrderCheckHooks;null!==c&&aa(t,c,n)}else{const c=e.preOrderHooks;null!==c&&la(t,c,0,n)}ni(n)}(e,t,E,na()),n(r,a)}finally{ni(c)}}function Nh(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Na(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Na(e,t,n,r,a,c,d,p,m,y){const C=E+r,A=C+a,b=function Kx(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:ye);return n}(C,A),v="function"==typeof y?y():y;return b[1]={type:e,blueprint:b,template:n,queries:null,viewQuery:p,declTNode:t,data:b.slice().fill(null,C),bindingStartIndex:C,expandoStartIndex:A,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof c?c():c,pipeRegistry:"function"==typeof d?d():d,firstChild:null,schemas:m,consts:v,incompleteFirstPass:!1}}function Fh(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const a=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,a):n[r]=[t,a]}return n}function Bh(e,t,n,r,a,c){const d=c.hostBindings;if(d){let p=e.hostBindingOpCodes;null===p&&(p=e.hostBindingOpCodes=[]);const m=~t.index;(function iw(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(p)!=m&&p.push(m),p.push(r,a,d)}}function kh(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function Vh(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function cw(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;U(t)&&(n[""]=e)}}function Uh(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function jh(e,t,n,r,a){e.data[r]=a;const c=a.factory||(a.factory=Ci(a.type)),d=new Ys(c,U(a),null);e.blueprint[r]=d,n[r]=d,Bh(e,t,0,r,$i(e,n,a.hostVars,ye),a)}function uw(e,t,n){const r=kn(t,e),a=Nh(n),c=e[10],d=Oa(e,uo(e,a,null,n.onPush?64:16,r,t,c,c.createRenderer(r,n),null,null));e[t.index]=d}function fw(e,t,n,r,a,c){const d=c[t];if(null!==d){const p=r.setInput;for(let m=0;m<d.length;){const y=d[m++],C=d[m++],A=d[m++];null!==p?r.setInput(n,A,y,C):n[C]=A}}}function dw(e,t){let n=null,r=0;for(;r<t.length;){const a=t[r];if(0!==a)if(5!==a){if("number"==typeof a)break;e.hasOwnProperty(a)&&(null===n&&(n=[]),n.push(a,e[a],t[r+1])),r+=2}else r+=2;else r+=4}return n}function pw(e,t){const n=In(t,e);if(kl(n)){const r=n[1];80&n[2]?Ji(r,n,r.template,n[8]):n[5]>0&&Wc(n)}}function Wc(e){for(let r=yc(e);null!==r;r=Ec(r))for(let a=10;a<r.length;a++){const c=r[a];if(1024&c[2]){const d=c[1];Ji(d,c,d.template,c[8])}else c[5]>0&&Wc(c)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const a=In(n[r],e);kl(a)&&a[5]>0&&Wc(a)}}function mw(e,t){const n=In(t,e),r=n[1];(function xw(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),fo(r,n,n[8])}function Oa(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Yc(e){for(;e;){e[2]|=64;const t=lo(e);if(q(e)&&!t)return e;e=t}return null}function Zc(e,t,n){const r=t[10];r.begin&&r.begin();try{Ji(e,t,e.template,n)}catch(a){throw Xh(t,a),a}finally{r.end&&r.end()}}function Gh(e){!function Xc(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=gc(n),a=r[1];qx(a,r,a.template,n)}}(e[8])}function Qc(e,t,n){zl(0),t(e,n)}const Cw=(()=>Promise.resolve(null))();function zh(e){return e[7]||(e[7]=[])}function Wh(e){return e.cleanup||(e.cleanup=[])}function Xh(e,t){const n=e[9],r=n?n.get(ao,null):null;r&&r.handleError(t)}function Ra(e,t,n){let r=n?e.styles:null,a=n?e.classes:null,c=0;if(null!==t)for(let d=0;d<t.length;d++){const p=t[d];"number"==typeof p?c=p:1==c?a=Rn(a,p):2==c&&(r=Rn(r,p+": "+t[++d]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=a:e.classesWithoutHost=a}const qc=new Qe("INJECTOR",-1);class Qh{get(t,n=Js){if(n===Js){const r=new Error(`NullInjectorError: No provider for ${de(t)}!`);throw r.name="NullInjectorError",r}return n}}const Kc=new Qe("Set Injector scope."),ho={},Iw={};let $c;function qh(){return void 0===$c&&($c=new Qh),$c}function Kh(e,t=null,n=null,r){const a=$h(e,t,n,r);return a._resolveInjectorDefTypes(),a}function $h(e,t=null,n=null,r){return new _w(e,n,t||qh(),r)}class _w{constructor(t,n,r,a=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const c=[];n&&pr(n,p=>this.processProvider(p,t,n)),pr([t],p=>this.processInjectorType(p,[],c)),this.records.set(qc,es(void 0,this));const d=this.records.get(Kc);this.scope=null!=d?d.value:null,this.source=a||("object"==typeof t?null:de(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=Js,r=me.Default){this.assertNotDestroyed();const a=Cd(this),c=ur(void 0);try{if(!(r&me.SkipSelf)){let p=this.records.get(t);if(void 0===p){const m=function Rw(e){return"function"==typeof e||"object"==typeof e&&e instanceof Qe}(t)&&ks(t);p=m&&this.injectableDefInScope(m)?es(Jc(t),ho):null,this.records.set(t,p)}if(null!=p)return this.hydrate(t,p)}return(r&me.Self?qh():this.parent).get(t,n=r&me.Optional&&n===Js?null:n)}catch(d){if("NullInjectorError"===d.name){if((d[xa]=d[xa]||[]).unshift(de(t)),a)throw d;return function s2(e,t,n,r){const a=e[xa];throw t[Ed]&&a.unshift(t[Ed]),e.message=function o2(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let a=de(t);if(Array.isArray(t))a=t.map(de).join(" -> ");else if("object"==typeof t){let c=[];for(let d in t)if(t.hasOwnProperty(d)){let p=t[d];c.push(d+":"+("string"==typeof p?JSON.stringify(p):de(p)))}a=`{${c.join(", ")}}`}return`${n}${r?"("+r+")":""}[${a}]: ${e.replace(Jm,"\n  ")}`}("\n"+e.message,a,n,r),e.ngTokenPath=a,e[xa]=null,e}(d,t,"R3InjectorError",this.source)}throw d}finally{ur(c),Cd(a)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((r,a)=>t.push(de(a))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processInjectorType(t,n,r){if(!(t=pe(t)))return!1;let a=Vs(t);const c=null==a&&t.ngModule||void 0,d=void 0===c?t:c,p=-1!==r.indexOf(d);if(void 0!==c&&(a=Vs(c)),null==a)return!1;if(null!=a.imports&&!p){let C;r.push(d);try{pr(a.imports,A=>{this.processInjectorType(A,n,r)&&(void 0===C&&(C=[]),C.push(A))})}finally{}if(void 0!==C)for(let A=0;A<C.length;A++){const{ngModule:b,providers:v}=C[A];pr(v,O=>this.processProvider(O,b,v||ge))}}this.injectorDefTypes.add(d);const m=Ci(d)||(()=>new d);this.records.set(d,es(m,ho));const y=a.providers;if(null!=y&&!p){const C=t;pr(y,A=>this.processProvider(A,C,y))}return void 0!==c&&void 0!==t.providers}processProvider(t,n,r){let a=ts(t=pe(t))?t:pe(t&&t.provide);const c=function bw(e,t,n){return e1(e)?es(void 0,e.useValue):es(function Jh(e,t,n){let r;if(ts(e)){const a=pe(e);return Ci(a)||Jc(a)}if(e1(e))r=()=>pe(e.useValue);else if(function vw(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...ic(e.deps||[]));else if(function Sw(e){return!(!e||!e.useExisting)}(e))r=()=>qe(pe(e.useExisting));else{const a=pe(e&&(e.useClass||e.provide));if(!function Nw(e){return!!e.deps}(e))return Ci(a)||Jc(a);r=()=>new a(...ic(e.deps))}return r}(e),ho)}(t);if(ts(t)||!0!==t.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=es(void 0,ho,!0),d.factory=()=>ic(d.multi),this.records.set(a,d)),a=t,d.multi.push(t)}this.records.set(a,c)}hydrate(t,n){return n.value===ho&&(n.value=Iw,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Ow(e){return null!==e&&"object"==typeof e&&"function"==typeof e.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=pe(t.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function Jc(e){const t=ks(e),n=null!==t?t.factory:Ci(e);if(null!==n)return n;if(e instanceof Qe)throw new ie(204,!1);if(e instanceof Function)return function Tw(e){const t=e.length;if(t>0)throw function $s(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}(t,"?"),new ie(204,!1);const n=function Zo(e){const t=e&&(e[cr]||e[Wt]);if(t){const n=function xi(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new ie(204,!1)}function es(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function e1(e){return null!==e&&"object"==typeof e&&t2 in e}function ts(e){return"function"==typeof e}let Kn=(()=>{class e{static create(n,r){var a;if(Array.isArray(n))return Kh({name:""},r,n,"");{const c=null!==(a=n.name)&&void 0!==a?a:"";return Kh({name:c},n.parent,n.providers,c)}}}return e.THROW_IF_NOT_FOUND=Js,e.NULL=new Qh,e.\u0275prov=$e({token:e,providedIn:"any",factory:()=>qe(qc)}),e.__NG_ELEMENT_ID__=-1,e})();function jw(e,t){oa(gc(e)[1],Rt())}function lu(e,t,n,r,a){const d=a?"class":"style";!function Zh(e,t,n,r,a){for(let c=0;c<n.length;){const d=n[c++],p=n[c++],m=t[d],y=e.data[d];null!==y.setInput?y.setInput(m,a,r,p):m[p]=a}}(e,n,t.inputs[d],d,r)}function mo(e,t,n,r){const a=z(),c=Fe(),d=E+e,p=a[i],m=a[d]=Dc(p,t,function Sm(){return xe.lFrame.currentNamespace}()),y=c.firstCreatePass?function Dy(e,t,n,r,a,c,d){const p=t.consts,y=Ki(t,e,2,a,ti(p,c));return function Gc(e,t,n,r){let a=!1;if(Yf()){const c=function aw(e,t,n){const r=e.directiveRegistry;let a=null;if(r)for(let c=0;c<r.length;c++){const d=r[c];ph(n,d.selectors,!1)&&(a||(a=[]),ha(Zs(n,t),e,d.type),U(d)?(Vh(e,n),a.unshift(d)):a.push(d))}return a}(e,t,n),d=null===r?null:{"":-1};if(null!==c){a=!0,Uh(n,e.data.length,c.length);for(let C=0;C<c.length;C++){const A=c[C];A.providersResolver&&A.providersResolver(A)}let p=!1,m=!1,y=$i(e,t,c.length,null);for(let C=0;C<c.length;C++){const A=c[C];n.mergedAttrs=ua(n.mergedAttrs,A.hostAttrs),jh(e,n,t,y,A),cw(y,A,d),null!==A.contentQueries&&(n.flags|=8),(null!==A.hostBindings||null!==A.hostAttrs||0!==A.hostVars)&&(n.flags|=128);const b=A.type.prototype;!p&&(b.ngOnChanges||b.ngOnInit||b.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),p=!0),!m&&(b.ngOnChanges||b.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),m=!0),y++}!function Jx(e,t){const r=t.directiveEnd,a=e.data,c=t.attrs,d=[];let p=null,m=null;for(let y=t.directiveStart;y<r;y++){const C=a[y],A=C.inputs,b=null===c||gh(t)?null:dw(A,c);d.push(b),p=Fh(A,y,p),m=Fh(C.outputs,y,m)}null!==p&&(p.hasOwnProperty("class")&&(t.flags|=16),p.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=d,t.inputs=p,t.outputs=m}(e,n)}d&&function lw(e,t,n){if(t){const r=e.localNames=[];for(let a=0;a<t.length;a+=2){const c=n[t[a+1]];if(null==c)throw new ie(-301,!1);r.push(t[a],c)}}}(n,r,d)}return n.mergedAttrs=ua(n.mergedAttrs,n.attrs),a}(t,n,y,ti(p,d)),null!==y.attrs&&Ra(y,y.attrs,!1),null!==y.mergedAttrs&&Ra(y,y.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,y),y}(d,c,a,0,t,n,r):c.data[d];gr(y,!0);const C=y.mergedAttrs;null!==C&&ca(p,m,C);const A=y.classes;null!==A&&Sc(p,m,A);const b=y.styles;return null!==b&&fh(p,m,b),64!=(64&y.flags)&&Ta(c,a,m,y),0===function fm(){return xe.lFrame.elementDepthCount}()&&Kt(m,a),function dm(){xe.lFrame.elementDepthCount++}(),L(y)&&(function jc(e,t,n){!Yf()||(function sw(e,t,n,r){const a=n.directiveStart,c=n.directiveEnd;e.firstCreatePass||Zs(n,t),Kt(r,t);const d=n.initialInputs;for(let p=a;p<c;p++){const m=e.data[p],y=U(m);y&&uw(t,n,m);const C=Qs(t,e,p,n);Kt(C,t),null!==d&&fw(0,p-a,C,m,0,d),y&&(In(n.index,t)[8]=C)}}(e,t,n,kn(n,t)),128==(128&n.flags)&&function ow(e,t,n){const r=n.directiveStart,a=n.directiveEnd,d=n.index,p=function Em(){return xe.lFrame.currentDirectiveIndex}();try{ni(d);for(let m=r;m<a;m++){const y=e.data[m],C=t[m];Hl(m),(null!==y.hostBindings||0!==y.hostVars||null!==y.hostAttrs)&&kh(y,C)}}finally{ni(-1),Hl(p)}}(e,t,n))}(c,a,y),function Mh(e,t,n){if(M(t)){const a=t.directiveEnd;for(let c=t.directiveStart;c<a;c++){const d=e.data[c];d.contentQueries&&d.contentQueries(1,n[c],c)}}}(c,y,a)),null!==r&&function Hc(e,t,n=kn){const r=t.localNames;if(null!==r){let a=t.index+1;for(let c=0;c<r.length;c+=2){const d=r[c+1],p=-1===d?n(t,e):e[d];e[a++]=p}}}(a,y),mo}function xo(){let e=Rt();Ul()?function jl(){xe.lFrame.isParent=!1}():(e=e.parent,gr(e,!1));const t=e;!function hm(){xe.lFrame.elementDepthCount--}();const n=Fe();return n.firstCreatePass&&(oa(n,e),M(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function Rm(e){return 0!=(16&e.flags)}(t)&&lu(n,t,z(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function Lm(e){return 0!=(32&e.flags)}(t)&&lu(n,t,z(),t.stylesWithoutHost,!1),xo}function cu(e,t,n,r){return mo(e,t,n,r),xo(),cu}function du(e){return!!e&&"function"==typeof e.then}const _y=function P1(e){return!!e&&"function"==typeof e.subscribe};function Ba(e,t,n,r){const a=z(),c=Fe(),d=Rt();return function k1(e,t,n,r,a,c,d,p){const m=L(r),C=e.firstCreatePass&&Wh(e),A=t[8],b=zh(t);let v=!0;if(3&r.type||p){const H=kn(r,t),j=p?p(H):H,P=b.length,re=p?Ee=>p(Tt(Ee[r.index])):r.index;if(xt(n)){let Ee=null;if(!p&&m&&(Ee=function Ty(e,t,n,r){const a=e.cleanup;if(null!=a)for(let c=0;c<a.length-1;c+=2){const d=a[c];if(d===n&&a[c+1]===r){const p=t[7],m=a[c+2];return p.length>m?p[m]:null}"string"==typeof d&&(c+=2)}return null}(e,t,a,r.index)),null!==Ee)(Ee.__ngLastListenerFn__||Ee).__ngNextListenerFn__=c,Ee.__ngLastListenerFn__=c,v=!1;else{c=hu(r,t,A,c,!1);const Oe=n.listen(j,a,c);b.push(c,Oe),C&&C.push(a,re,P,P+1)}}else c=hu(r,t,A,c,!0),j.addEventListener(a,c,d),b.push(c),C&&C.push(a,re,P,d)}else c=hu(r,t,A,c,!1);const O=r.outputs;let B;if(v&&null!==O&&(B=O[a])){const H=B.length;if(H)for(let j=0;j<H;j+=2){const Xt=t[B[j]][B[j+1]].subscribe(c),_r=b.length;b.push(c,Xt),C&&C.push(a,r.index,_r,-(_r+1))}}}(c,a,a[i],d,e,t,!!n,r),Ba}function V1(e,t,n,r){try{return!1!==n(r)}catch(a){return Xh(e,a),!1}}function hu(e,t,n,r,a){return function c(d){if(d===Function)return r;const p=2&e.flags?In(e.index,t):t;0==(32&t[2])&&Yc(p);let m=V1(t,0,r,d),y=c.__ngNextListenerFn__;for(;y;)m=V1(t,0,y,d)&&m,y=y.__ngNextListenerFn__;return a&&!1===m&&(d.preventDefault(),d.returnValue=!1),m}}function mu(e,t=""){const n=z(),r=Fe(),a=e+E,c=r.firstCreatePass?Ki(r,a,1,t,null):r.data[a],d=n[a]=function Cc(e,t){return xt(e)?e.createText(t):e.createTextNode(t)}(n[i],t);Ta(r,n,d,c),gr(c,!1)}const Va="en-US";let R0=Va;class ig{}class xC{resolveComponentFactory(t){throw function mC(e){const t=Error(`No component factory found for ${de(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(t)}}let za=(()=>{class e{}return e.NULL=new xC,e})();function wC(){return ms(Rt(),z())}function ms(e,t){return new xs(kn(e,t))}let xs=(()=>{class e{constructor(n){this.nativeElement=n}}return e.__NG_ELEMENT_ID__=wC,e})();class og{}let DC=(()=>{class e{}return e.\u0275prov=$e({token:e,providedIn:"root",factory:()=>null}),e})();class Iu{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const AC=new Iu("13.2.7"),_u={};function Wa(e,t,n,r,a=!1){for(;null!==n;){const c=t[n.index];if(null!==c&&r.push(Tt(c)),S(c))for(let p=10;p<c.length;p++){const m=c[p],y=m[1].firstChild;null!==y&&Wa(m[1],m,y,r)}const d=n.type;if(8&d)Wa(e,t,n.child,r);else if(32&d){const p=wc(n,t);let m;for(;m=p();)r.push(m)}else if(16&d){const p=lh(t,n);if(Array.isArray(p))r.push(...p);else{const m=lo(t[f]);Wa(m[1],m,p,r,!0)}}n=a?n.projectionNext:n.next}return r}class IC extends class Ao{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return Wa(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(S(t)){const n=t[8],r=n?n.indexOf(this):-1;r>-1&&(function Ac(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const a=r[17];null!==a&&a!==e&&$d(a,r),t>0&&(e[n-1][4]=r[4]);const c=pa(e,10+t);!function dx(e,t){co(e,t,t[i],2,null,null),t[0]=null,t[6]=null}(r[1],r);const d=c[19];null!==d&&d.detachView(c[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}(t,r),pa(n,r))}this._attachedToViewContainer=!1}!function Jd(e,t){if(!(256&t[2])){const n=t[i];xt(n)&&n.destroyNode&&co(e,t,n,3,null,null),function px(e){let t=e[13];if(!t)return Ic(e[1],e);for(;t;){let n=null;if(T(t))n=t[13];else{const r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)T(t)&&Ic(t[1],t),t=t[3];null===t&&(t=e),T(t)&&Ic(t[1],t),n=t&&t[4]}t=n}}(t)}}(this._lView[1],this._lView)}onDestroy(t){!function Lh(e,t,n,r){const a=zh(t);null===n?a.push(r):(a.push(n),e.firstCreatePass&&Wh(e).push(r,a.length-1))}(this._lView[1],this._lView,null,t)}markForCheck(){Yc(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Zc(this._lView[1],this._lView,this.context)}checkNoChanges(){!function yw(e,t,n){ra(!0);try{Zc(e,t,n)}finally{ra(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new ie(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function gx(e,t){co(e,t,t[i],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new ie(902,"");this._appRef=t}}{constructor(t){super(t),this._view=t}detectChanges(){Gh(this._view)}checkNoChanges(){!function Ew(e){ra(!0);try{Gh(e)}finally{ra(!1)}}(this._view)}get context(){return null}}class lg extends za{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Vt(t);return new Tu(n,this.ngModule)}}function cg(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}class Tu extends ig{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function Lx(e){return e.map(Rx).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return cg(this.componentDef.inputs)}get outputs(){return cg(this.componentDef.outputs)}create(t,n,r,a){const c=(a=a||this.ngModule)?function TC(e,t){return{get:(n,r,a)=>{const c=e.get(n,_u,a);return c!==_u||r===_u?c:t.get(n,r,a)}}}(t,a.injector):t,d=c.get(og,Gf),p=c.get(DC,null),m=d.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",C=r?function Rh(e,t,n){if(xt(e))return e.selectRootElement(t,n===F.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(m,r,this.componentDef.encapsulation):Dc(d.createRenderer(null,this.componentDef),y,function _C(e){const t=e.toLowerCase();return"svg"===t?"svg":"math"===t?"math":null}(y)),A=this.componentDef.onPush?576:528,b=function f1(e,t){return{components:[],scheduler:e||ox,clean:Cw,playerHandler:t||null,flags:0}}(),v=Na(0,null,null,1,0,null,null,null,null,null),O=uo(null,v,b,A,null,null,d,m,p,c);let B,H;ia(O);try{const j=function c1(e,t,n,r,a,c){const d=n[1];n[20]=e;const m=Ki(d,20,2,"#host",null),y=m.mergedAttrs=t.hostAttrs;null!==y&&(Ra(m,y,!0),null!==e&&(ca(a,e,y),null!==m.classes&&Sc(a,e,m.classes),null!==m.styles&&fh(a,e,m.styles)));const C=r.createRenderer(e,t),A=uo(n,Nh(t),null,t.onPush?64:16,n[20],m,r,C,c||null,null);return d.firstCreatePass&&(ha(Zs(m,n),d,t.type),Vh(d,m),Uh(m,n.length,1)),Oa(n,A),n[20]=A}(C,this.componentDef,O,d,m);if(C)if(r)ca(m,C,["ng-version",AC.full]);else{const{attrs:P,classes:re}=function Fx(e){const t=[],n=[];let r=1,a=2;for(;r<e.length;){let c=e[r];if("string"==typeof c)2===a?""!==c&&t.push(c,e[++r]):8===a&&n.push(c);else{if(!Qn(a))break;a=c}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);P&&ca(m,C,P),re&&re.length>0&&Sc(m,C,re.join(" "))}if(H=function Bl(e,t){return e.data[t]}(v,E),void 0!==n){const P=H.projection=[];for(let re=0;re<this.ngContentSelectors.length;re++){const Ee=n[re];P.push(null!=Ee?Array.from(Ee):null)}}B=function u1(e,t,n,r,a){const c=n[1],d=function rw(e,t,n){const r=Rt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),jh(e,r,t,$i(e,t,1,null),n));const a=Qs(t,e,r.directiveStart,r);Kt(a,t);const c=kn(r,t);return c&&Kt(c,t),a}(c,n,t);if(r.components.push(d),e[8]=d,a&&a.forEach(m=>m(d,t)),t.contentQueries){const m=Rt();t.contentQueries(1,d,m.directiveStart)}const p=Rt();return!c.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(ni(p.index),Bh(n[1],p,0,p.directiveStart,p.directiveEnd,t),kh(t,d)),d}(j,this.componentDef,O,b,[jw]),fo(v,O,null)}finally{sa()}return new SC(this.componentType,B,ms(H,O),O,H)}}class SC extends class pC{}{constructor(t,n,r,a,c){super(),this.location=r,this._rootLView=a,this._tNode=c,this.instance=n,this.hostView=this.changeDetectorRef=new IC(a),this.componentType=t}get injector(){return new ji(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}class ws{}const ys=new Map;class dg extends ws{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new lg(this);const r=pn(t);this._bootstrapComponents=xr(r.bootstrap),this._r3Injector=$h(t,n,[{provide:ws,useValue:this},{provide:za,useValue:this.componentFactoryResolver}],de(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,n=Kn.THROW_IF_NOT_FOUND,r=me.Default){return t===Kn||t===ws||t===qc?this:this._r3Injector.get(t,n,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class bu extends class MC{}{constructor(t){super(),this.moduleType=t,null!==pn(t)&&function NC(e){const t=new Set;!function n(r){const a=pn(r,!0),c=a.id;null!==c&&(function ug(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${de(t)} vs ${de(t.name)}`)}(c,ys.get(c),r),ys.set(c,r));const d=xr(a.imports);for(const p of d)t.has(p)||(t.add(p),n(p))}(e)}(t)}create(t){return new dg(this.moduleType,t)}}function Su(e){return t=>{setTimeout(e,void 0,t)}}const Ur=class QC extends Yr{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,r){var a,c,d;let p=t,m=n||(()=>null),y=r;if(t&&"object"==typeof t){const A=t;p=null===(a=A.next)||void 0===a?void 0:a.bind(A),m=null===(c=A.error)||void 0===c?void 0:c.bind(A),y=null===(d=A.complete)||void 0===d?void 0:d.bind(A)}this.__isAsync&&(m=Su(m),p&&(p=Su(p)),y&&(y=Su(y)));const C=super.subscribe({next:p,error:m,complete:y});return t instanceof vn&&t.add(C),C}};function Qa(...e){}Symbol;const Hg=new Qe("Application Initializer");let ju=(()=>{class e{constructor(n){this.appInits=n,this.resolve=Qa,this.reject=Qa,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,a)=>{this.resolve=r,this.reject=a})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let a=0;a<this.appInits.length;a++){const c=this.appInits[a]();if(du(c))n.push(c);else if(_y(c)){const d=new Promise((p,m)=>{c.subscribe({complete:p,error:m})});n.push(d)}}Promise.all(n).then(()=>{r()}).catch(a=>{this.reject(a)}),0===n.length&&r(),this.initialized=!0}}return e.\u0275fac=function(n){return new(n||e)(qe(Hg,8))},e.\u0275prov=$e({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const bo=new Qe("AppId",{providedIn:"root",factory:function Gg(){return`${Hu()}${Hu()}${Hu()}`}});function Hu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const zg=new Qe("Platform Initializer"),Gu=new Qe("Platform ID"),ND=new Qe("appBootstrapListener");let OD=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=$e({token:e,factory:e.\u0275fac}),e})();const ai=new Qe("LocaleId",{providedIn:"root",factory:()=>r2(ai,me.Optional|me.SkipSelf)||function RD(){return"undefined"!=typeof $localize&&$localize.locale||Va}()}),BD=(()=>Promise.resolve(0))();function zu(e){"undefined"==typeof Zone?BD.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class yn{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ur(!1),this.onMicrotaskEmpty=new Ur(!1),this.onStable=new Ur(!1),this.onError=new Ur(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&n,a.shouldCoalesceRunChangeDetection=r,a.lastRequestAnimationFrameId=-1,a.nativeRequestAnimationFrame=function kD(){let e=We.requestAnimationFrame,t=We.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function jD(e){const t=()=>{!function UD(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(We,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Yu(e),e.isCheckStableRunning=!0,Wu(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Yu(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,a,c,d,p)=>{try{return Wg(e),n.invokeTask(a,c,d,p)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===c.type||e.shouldCoalesceRunChangeDetection)&&t(),Yg(e)}},onInvoke:(n,r,a,c,d,p,m)=>{try{return Wg(e),n.invoke(a,c,d,p,m)}finally{e.shouldCoalesceRunChangeDetection&&t(),Yg(e)}},onHasTask:(n,r,a,c)=>{n.hasTask(a,c),r===a&&("microTask"==c.change?(e._hasPendingMicrotasks=c.microTask,Yu(e),Wu(e)):"macroTask"==c.change&&(e.hasPendingMacrotasks=c.macroTask))},onHandleError:(n,r,a,c)=>(n.handleError(a,c),e.runOutsideAngular(()=>e.onError.emit(c)),!1)})}(a)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yn.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(yn.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,a){const c=this._inner,d=c.scheduleEventTask("NgZoneEvent: "+a,t,VD,Qa,Qa);try{return c.runTask(d,n,r)}finally{c.cancelTask(d)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}}const VD={};function Wu(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Yu(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Wg(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Yg(e){e._nesting--,Wu(e)}class HD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ur,this.onMicrotaskEmpty=new Ur,this.onStable=new Ur,this.onError=new Ur}run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,a){return t.apply(n,r)}}let Xu=(()=>{class e{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yn.assertNotInAngularZone(),zu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())zu(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,a){let c=-1;r&&r>0&&(c=setTimeout(()=>{this._callbacks=this._callbacks.filter(d=>d.timeoutId!==c),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:c,updateCb:a})}whenStable(n,r,a){if(a&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,a),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,a){return[]}}return e.\u0275fac=function(n){return new(n||e)(qe(yn))},e.\u0275prov=$e({token:e,factory:e.\u0275fac}),e})(),Xg=(()=>{class e{constructor(){this._applications=new Map,Zu.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Zu.findTestabilityInTree(this,n,r)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=$e({token:e,factory:e.\u0275fac}),e})();class GD{addToWindow(t){}findTestabilityInTree(t,n,r){return null}}let tr,Zu=new GD;const Zg=new Qe("AllowMultipleToken");function Qg(e,t,n=[]){const r=`Platform: ${t}`,a=new Qe(r);return(c=[])=>{let d=qg();if(!d||d.injector.get(Zg,!1))if(e)e(n.concat(c).concat({provide:a,useValue:!0}));else{const p=n.concat(c).concat({provide:a,useValue:!0},{provide:Kc,useValue:"platform"});!function XD(e){if(tr&&!tr.destroyed&&!tr.injector.get(Zg,!1))throw new ie(400,"");tr=e.get(Kg);const t=e.get(zg,null);t&&t.forEach(n=>n())}(Kn.create({providers:p,name:r}))}return function ZD(e){const t=qg();if(!t)throw new ie(401,"");return t}()}}function qg(){return tr&&!tr.destroyed?tr:null}let Kg=(()=>{class e{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const p=function QD(e,t){let n;return n="noop"===e?new HD:("zone.js"===e?void 0:e)||new yn({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),m=[{provide:yn,useValue:p}];return p.run(()=>{const y=Kn.create({providers:m,parent:this.injector,name:n.moduleType.name}),C=n.create(y),A=C.injector.get(ao,null);if(!A)throw new ie(402,"");return p.runOutsideAngular(()=>{const b=p.onError.subscribe({next:v=>{A.handleError(v)}});C.onDestroy(()=>{Qu(this._modules,C),b.unsubscribe()})}),function qD(e,t,n){try{const r=n();return du(r)?r.catch(a=>{throw t.runOutsideAngular(()=>e.handleError(a)),a}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(A,p,()=>{const b=C.injector.get(ju);return b.runInitializers(),b.donePromise.then(()=>(function yE(e){ne(e,"Expected localeId to be defined"),"string"==typeof e&&(R0=e.toLowerCase().replace(/_/g,"-"))}(C.injector.get(ai,Va)||Va),this._moduleDoBootstrap(C),C))})})}bootstrapModule(n,r=[]){const a=$g({},r);return function WD(e,t,n){const r=new bu(n);return Promise.resolve(r)}(0,0,n).then(c=>this.bootstrapModuleFactory(c,a))}_moduleDoBootstrap(n){const r=n.injector.get(Jg);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(a=>r.bootstrap(a));else{if(!n.instance.ngDoBootstrap)throw new ie(403,"");n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ie(404,"");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(n){return new(n||e)(qe(Kn))},e.\u0275prov=$e({token:e,factory:e.\u0275fac}),e})();function $g(e,t){return Array.isArray(t)?t.reduce($g,e):Object.assign(Object.assign({},e),t)}let Jg=(()=>{class e{constructor(n,r,a,c,d){this._zone=n,this._injector=r,this._exceptionHandler=a,this._componentFactoryResolver=c,this._initStatus=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new lt(y=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{y.next(this._stable),y.complete()})}),m=new lt(y=>{let C;this._zone.runOutsideAngular(()=>{C=this._zone.onStable.subscribe(()=>{yn.assertNotInAngularZone(),zu(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,y.next(!0))})})});const A=this._zone.onUnstable.subscribe(()=>{yn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{y.next(!1)}))});return()=>{C.unsubscribe(),A.unsubscribe()}});this.isStable=Pe(p,m.pipe(function Se(e={}){const{connector:t=(()=>new Yr),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:a=!0}=e;return c=>{let d,p,m,y=0,C=!1,A=!1;const b=()=>{null==p||p.unsubscribe(),p=void 0},v=()=>{b(),d=m=void 0,C=A=!1},O=()=>{const B=d;v(),null==B||B.unsubscribe()};return st((B,H)=>{y++,!A&&!C&&b();const j=m=null!=m?m:t();H.add(()=>{y--,0===y&&!A&&!C&&(p=gi(O,a))}),j.subscribe(H),!d&&y>0&&(d=new Dt({next:P=>j.next(P),error:P=>{A=!0,b(),p=gi(v,n,P),j.error(P)},complete:()=>{C=!0,b(),p=gi(v,r),j.complete()}}),Nn(B).subscribe(d))})(c)}}()))}bootstrap(n,r){if(!this._initStatus.done)throw new ie(405,"");let a;a=n instanceof ig?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(a.componentType);const c=function YD(e){return e.isBoundToModule}(a)?void 0:this._injector.get(ws),p=a.create(Kn.NULL,[],r||a.selector,c),m=p.location.nativeElement,y=p.injector.get(Xu,null),C=y&&p.injector.get(Xg);return y&&C&&C.registerApplication(m,y),p.onDestroy(()=>{this.detachView(p.hostView),Qu(this.components,p),C&&C.unregisterApplication(m)}),this._loadComponent(p),p}tick(){if(this._runningTick)throw new ie(101,"");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Qu(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(ND,[]).concat(this._bootstrapListeners).forEach(a=>a(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(n){return new(n||e)(qe(yn),qe(Kn),qe(ao),qe(za),qe(ju))},e.\u0275prov=$e({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Qu(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let tp=!0;const gA=Qg(null,"core",[{provide:Gu,useValue:"unknown"},{provide:Kg,deps:[Kn]},{provide:Xg,deps:[]},{provide:OD,deps:[]}]);let pA=(()=>{class e{constructor(n){}}return e.\u0275fac=function(n){return new(n||e)(qe(Jg))},e.\u0275mod=Rr({type:e}),e.\u0275inj=gn({}),e})(),Ja=null;function vo(){return Ja}const Ar=new Qe("DocumentToken");let BI=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Rr({type:e}),e.\u0275inj=gn({}),e})();class gf extends class GI extends class wA{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function xA(e){Ja||(Ja=e)}(new gf)}onAndCancel(t,n,r){return t.addEventListener(n,r,!1),()=>{t.removeEventListener(n,r,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=function zI(){return Oo=Oo||document.querySelector("base"),Oo?Oo.getAttribute("href"):null}();return null==n?null:function WI(e){cl=cl||document.createElement("a"),cl.setAttribute("href",e);const t=cl.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){Oo=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return function iI(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const r=n.indexOf("="),[a,c]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(a.trim()===t)return decodeURIComponent(c)}return null}(document.cookie,t)}}let cl,Oo=null;const Sp=new Qe("TRANSITION_ID"),XI=[{provide:Hg,useFactory:function YI(e,t,n){return()=>{n.get(ju).donePromise.then(()=>{const r=vo(),a=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let c=0;c<a.length;c++)r.remove(a[c])})}},deps:[Sp,Ar,Kn],multi:!0}];class pf{static init(){!function zD(e){Zu=e}(new pf)}addToWindow(t){We.getAngularTestability=(r,a=!0)=>{const c=t.findTestabilityInTree(r,a);if(null==c)throw new Error("Could not find testability for element.");return c},We.getAllAngularTestabilities=()=>t.getAllTestabilities(),We.getAllAngularRootElements=()=>t.getAllRootElements(),We.frameworkStabilizers||(We.frameworkStabilizers=[]),We.frameworkStabilizers.push(r=>{const a=We.getAllAngularTestabilities();let c=a.length,d=!1;const p=function(m){d=d||m,c--,0==c&&r(d)};a.forEach(function(m){m.whenStable(p)})})}findTestabilityInTree(t,n,r){if(null==n)return null;const a=t.getTestability(n);return null!=a?a:r?vo().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null}}let ZI=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=$e({token:e,factory:e.\u0275fac}),e})();const ul=new Qe("EventManagerPlugins");let fl=(()=>{class e{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(a=>a.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,a){return this._findPluginFor(r).addEventListener(n,r,a)}addGlobalEventListener(n,r,a){return this._findPluginFor(r).addGlobalEventListener(n,r,a)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const a=this._plugins;for(let c=0;c<a.length;c++){const d=a[c];if(d.supports(n))return this._eventNameToPlugin.set(n,d),d}throw new Error(`No event manager plugin found for event ${n}`)}}return e.\u0275fac=function(n){return new(n||e)(qe(ul),qe(yn))},e.\u0275prov=$e({token:e,factory:e.\u0275fac}),e})();class vp{constructor(t){this._doc=t}addGlobalEventListener(t,n,r){const a=vo().getGlobalEventTarget(this._doc,t);if(!a)throw new Error(`Unsupported event target ${a} for event ${n}`);return this.addEventListener(a,n,r)}}let Mp=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=$e({token:e,factory:e.\u0275fac}),e})(),Ro=(()=>{class e extends Mp{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,a){n.forEach(c=>{const d=this._doc.createElement("style");d.textContent=c,a.push(r.appendChild(d))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(Np),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(n,a,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Np))}}return e.\u0275fac=function(n){return new(n||e)(qe(Ar))},e.\u0275prov=$e({token:e,factory:e.\u0275fac}),e})();function Np(e){vo().remove(e)}const mf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xf=/%COMP%/g;function dl(e,t,n){for(let r=0;r<t.length;r++){let a=t[r];Array.isArray(a)?dl(e,a,n):(a=a.replace(xf,e),n.push(a))}return n}function Lp(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let wf=(()=>{class e{constructor(n,r,a){this.eventManager=n,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new yf(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case F.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new e_(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(n),a}case 1:case F.ShadowDom:return new t_(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const a=dl(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(n){return new(n||e)(qe(fl),qe(Ro),qe(bo))},e.\u0275prov=$e({token:e,factory:e.\u0275fac}),e})();class yf{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,n){return n?document.createElementNS(mf[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){t.appendChild(n)}insertBefore(t,n,r){t&&t.insertBefore(n,r)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,a){if(a){n=a+":"+n;const c=mf[a];c?t.setAttributeNS(c,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){const a=mf[r];a?t.removeAttributeNS(a,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,a){a&(Tn.DashCase|Tn.Important)?t.style.setProperty(n,r,a&Tn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Tn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t[n]=r}setValue(t,n){t.nodeValue=n}listen(t,n,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,Lp(r)):this.eventManager.addEventListener(t,n,Lp(r))}}class e_ extends yf{constructor(t,n,r,a){super(t),this.component=r;const c=dl(a+"-"+r.id,r.styles,[]);n.addStyles(c),this.contentAttr=function KI(e){return"_ngcontent-%COMP%".replace(xf,e)}(a+"-"+r.id),this.hostAttr=function $I(e){return"_nghost-%COMP%".replace(xf,e)}(a+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}}class t_ extends yf{constructor(t,n,r,a){super(t),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=dl(a.id,a.styles,[]);for(let d=0;d<c.length;d++){const p=document.createElement("style");p.textContent=c[d],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let n_=(()=>{class e extends vp{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,a){return n.addEventListener(r,a,!1),()=>this.removeEventListener(n,r,a)}removeEventListener(n,r,a){return n.removeEventListener(r,a)}}return e.\u0275fac=function(n){return new(n||e)(qe(Ar))},e.\u0275prov=$e({token:e,factory:e.\u0275fac}),e})();const Pp=["alt","control","meta","shift"],i_={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bp={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},s_={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let o_=(()=>{class e extends vp{constructor(n){super(n)}supports(n){return null!=e.parseEventName(n)}addEventListener(n,r,a){const c=e.parseEventName(r),d=e.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>vo().onAndCancel(n,c.domEventName,d))}static parseEventName(n){const r=n.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const c=e._normalizeKey(r.pop());let d="";if(Pp.forEach(m=>{const y=r.indexOf(m);y>-1&&(r.splice(y,1),d+=m+".")}),d+=c,0!=r.length||0===c.length)return null;const p={};return p.domEventName=a,p.fullKey=d,p}static getEventFullKey(n){let r="",a=function a_(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&Bp.hasOwnProperty(t)&&(t=Bp[t]))}return i_[t]||t}(n);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),Pp.forEach(c=>{c!=a&&s_[c](n)&&(r+=c+".")}),r+=a,r}static eventCallback(n,r,a){return c=>{e.getEventFullKey(c)===n&&a.runGuarded(()=>r(c))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return e.\u0275fac=function(n){return new(n||e)(qe(Ar))},e.\u0275prov=$e({token:e,factory:e.\u0275fac}),e})();const f_=Qg(gA,"browser",[{provide:Gu,useValue:"browser"},{provide:zg,useValue:function l_(){gf.makeCurrent(),pf.init()},multi:!0},{provide:Ar,useFactory:function u_(){return function om(e){Fl=e}(document),document},deps:[]}]),d_=[{provide:Kc,useValue:"root"},{provide:ao,useFactory:function c_(){return new ao},deps:[]},{provide:ul,useClass:n_,multi:!0,deps:[Ar,yn,Gu]},{provide:ul,useClass:o_,multi:!0,deps:[Ar]},{provide:wf,useClass:wf,deps:[fl,Ro,bo]},{provide:og,useExisting:wf},{provide:Mp,useExisting:Ro},{provide:Ro,useClass:Ro,deps:[Ar]},{provide:Xu,useClass:Xu,deps:[yn]},{provide:fl,useClass:fl,deps:[ul,yn]},{provide:class HI{},useClass:ZI,deps:[]}];let h_=(()=>{class e{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:e,providers:[{provide:bo,useValue:n.appId},{provide:Sp,useExisting:bo},XI]}}}return e.\u0275fac=function(n){return new(n||e)(qe(e,12))},e.\u0275mod=Rr({type:e}),e.\u0275inj=gn({providers:d_,imports:[BI,pA]}),e})();function Up(e,t,n,r,a,c,d){try{var p=e[c](d),m=p.value}catch(y){return void n(y)}p.done?t(m):Promise.resolve(m).then(r,a)}"undefined"!=typeof window&&window;var X=(()=>{return(e=X||(X={}))[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",X;var e})(),jp=new Map([[X.QR_CODE,"QR_CODE"],[X.AZTEC,"AZTEC"],[X.CODABAR,"CODABAR"],[X.CODE_39,"CODE_39"],[X.CODE_93,"CODE_93"],[X.CODE_128,"CODE_128"],[X.DATA_MATRIX,"DATA_MATRIX"],[X.MAXICODE,"MAXICODE"],[X.ITF,"ITF"],[X.EAN_13,"EAN_13"],[X.EAN_8,"EAN_8"],[X.PDF_417,"PDF_417"],[X.RSS_14,"RSS_14"],[X.RSS_EXPANDED,"RSS_EXPANDED"],[X.UPC_A,"UPC_A"],[X.UPC_E,"UPC_E"],[X.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function __(e){return Object.values(X).includes(e)}var Gr=(()=>{return(e=Gr||(Gr={}))[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE",Gr;var e})(),Ir=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Gr.SCAN_TYPE_CAMERA,Gr.SCAN_TYPE_FILE],e}(),Hp=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!jp.has(t))throw t+" not in html5QrcodeSupportedFormatsTextMap";return new e(t,jp.get(t))},e}(),Gp=function(){function e(){}return e.createFromText=function(t){return{decodedText:t,result:{text:t}}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),hl=(()=>{return(e=hl||(hl={}))[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR",hl;var e})(),zp=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:hl.UNKWOWN_ERROR}},e}(),Wp=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||!0===n)&&console.error(t)},e.prototype.logErrors=function(t){if(0===t.length)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Cs(e){return null==e}var e,Lo=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = "+t},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = "+t},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e}(),ir=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: "+t},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e}(),Yp=function(){function e(){}return e.builtUsing=function(){return"Built using "},e.reportIssues=function(){return"Report issues"},e}(),Xp=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if("object"!=typeof t)return n.logError("videoConstraints should be of type object, the object passed is of type "+typeof t+".",!0),!1;for(var c=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),p=0,m=Object.keys(t);p<m.length;p++){var y=m[p];if(c.has(y))return n.logError(y+" is not supported videoConstaints.",!0),!1}return!0},e}(),ft=W(140),T_=function(){function e(t,n,r){if(this.formatMap=new Map([[X.QR_CODE,ft.BarcodeFormat.QR_CODE],[X.AZTEC,ft.BarcodeFormat.AZTEC],[X.CODABAR,ft.BarcodeFormat.CODABAR],[X.CODE_39,ft.BarcodeFormat.CODE_39],[X.CODE_93,ft.BarcodeFormat.CODE_93],[X.CODE_128,ft.BarcodeFormat.CODE_128],[X.DATA_MATRIX,ft.BarcodeFormat.DATA_MATRIX],[X.MAXICODE,ft.BarcodeFormat.MAXICODE],[X.ITF,ft.BarcodeFormat.ITF],[X.EAN_13,ft.BarcodeFormat.EAN_13],[X.EAN_8,ft.BarcodeFormat.EAN_8],[X.PDF_417,ft.BarcodeFormat.PDF_417],[X.RSS_14,ft.BarcodeFormat.RSS_14],[X.RSS_EXPANDED,ft.BarcodeFormat.RSS_EXPANDED],[X.UPC_A,ft.BarcodeFormat.UPC_A],[X.UPC_E,ft.BarcodeFormat.UPC_E],[X.UPC_EAN_EXTENSION,ft.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ft)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var a=this.createZXingFormats(t),c=new Map;c.set(ft.DecodeHintType.POSSIBLE_FORMATS,a),this.hints=c}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,a){try{r(n.decode(t))}catch(c){a(c)}})},e.prototype.decode=function(t){var n=new ft.MultiFormatReader(this.verbose,this.hints),r=new ft.HTMLCanvasElementLuminanceSource(t),a=new ft.BinaryBitmap(new ft.HybridBinarizer(r)),c=n.decode(a);return{text:c.text,format:Hp.create(this.toHtml5QrcodeSupportedFormats(c.format))}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,a){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have "+t;return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,a=t;r<a.length;r++){var c=a[r];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.logError(c+" is not supported byZXingHtml5QrcodeShim")}return n},e}(),Zp=function(){function e(t,n,r){if(this.formatMap=new Map([[X.QR_CODE,"qr_code"],[X.AZTEC,"aztec"],[X.CODABAR,"codabar"],[X.CODE_39,"code_39"],[X.CODE_93,"code_93"],[X.CODE_128,"code_128"],[X.DATA_MATRIX,"data_matrix"],[X.ITF,"itf"],[X.EAN_13,"ean_13"],[X.EAN_8,"ean_8"],[X.PDF_417,"pdf417"],[X.UPC_A,"upc_a"],[X.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&void 0!==new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(t){return function(e,t,n,r){return new(n||(n=Promise))(function(c,d){function p(C){try{y(r.next(C))}catch(A){d(A)}}function m(C){try{y(r.throw(C))}catch(A){d(A)}}function y(C){C.done?c(C.value):function a(c){return c instanceof n?c:new n(function(d){d(c)})}(C.value).then(p,m)}y((r=r.apply(e,t||[])).next())})}(this,void 0,void 0,function(){var n,r;return function(e,t){var r,a,c,d,n={label:0,sent:function(){if(1&c[0])throw c[1];return c[1]},trys:[],ops:[]};return d={next:p(0),throw:p(1),return:p(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d;function p(y){return function(C){return function m(y){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(c=2&y[0]?a.return:y[0]?a.throw||((c=a.return)&&c.call(a),0):a.next)&&!(c=c.call(a,y[1])).done)return c;switch(a=0,c&&(y=[2&y[0],c.value]),y[0]){case 0:case 1:c=y;break;case 4:return n.label++,{value:y[1],done:!1};case 5:n.label++,a=y[1],y=[0];continue;case 7:y=n.ops.pop(),n.trys.pop();continue;default:if(!(c=(c=n.trys).length>0&&c[c.length-1])&&(6===y[0]||2===y[0])){n=0;continue}if(3===y[0]&&(!c||y[1]>c[0]&&y[1]<c[3])){n.label=y[1];break}if(6===y[0]&&n.label<c[1]){n.label=c[1],c=y;break}if(c&&n.label<c[2]){n.label=c[2],n.ops.push(y);break}c[2]&&n.ops.pop(),n.trys.pop();continue}y=t.call(e,n)}catch(C){y=[6,C],a=0}finally{r=c=0}if(5&y[0])throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}([y,C])}}}(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(!(n=a.sent())||0===n.length)throw"No barcode or QR code detected.";return[2,{text:(r=this.selectLargestBarcode(n)).rawValue,format:Hp.create(this.toHtml5QrcodeSupportedFormats(r.format))}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,a=0,c=t;a<c.length;a++){var d=c[a],p=d.boundingBox.width*d.boundingBox.height;p>r&&(r=p,n=d)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,a=t;r<a.length;r++){var c=a[r];this.formatMap.has(c)?n.push(this.formatMap.get(c)):this.logger.warn(c+" is not supported byBarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have "+t;return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,a){t.set(n,r)}),t},e}(),v_=function(){function e(t,n,r,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.verbose=n,this.decoder=!0===a.useBarCodeDetectorIfSupported&&Zp.isSupported()?new Zp(t,n,r):new T_(t,n,r)}return e.prototype.decodeAsync=function(t){var n=this,r=performance.now();return this.decoder.decodeAsync(t).finally(function(){if(n.verbose){var a=performance.now()-r;n.executionResults.push(a),n.executions++,n.possiblyFlushPerformanceReport()}})},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++)t+=r[n];console.log(t/this.executionResults.length+" ms for "+this.executionResults.length+" last runs."),this.executions=0,this.executionResults=[]}},e}(),M_=function(){function e(){}return e.createExperimentalFeaturesConfig=function(t){return t?(!0!==t.useBarCodeDetectorIfSupported&&(t.useBarCodeDetectorIfSupported=!1),t):{useBarCodeDetectorIfSupported:!1}},e}(),dt=(()=>{return(e=dt||(dt={}))[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED",dt;var e})(),N_=function(){function e(){this.state=dt.NOT_STARTED,this.onGoingTransactionNewState=dt.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===dt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=dt.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===dt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=dt.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==dt.UNKNOWN)throw"Cannnot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case dt.UNKNOWN:throw"Transition from unknown is not allowed";case dt.NOT_STARTED:this.failIfNewStateIs(t,[dt.PAUSED])}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,a=n;r<a.length;r++)if(t===a[r])throw"Cannot transition from "+this.state+" to "+t},e}(),O_=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===dt.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==dt.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===dt.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===dt.PAUSED},e}(),R_=function(){function e(){}return e.create=function(){return new O_(new N_)},e}(),L_=(e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(r[c]=a[c])})(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),Gn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return L_(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Ir),F_=function(){function e(t,n){this.logger=n,this.fps=Gn.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=!0===t.disableFlip,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Gn.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Xp.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Cs(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),gl=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.videoElement=null,this.localMediaStream=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id="+t+" not found";var r;this.elementId=t,this.verbose=!1,"boolean"==typeof n?this.verbose=!0===n:n&&(this.verbose=!0===n.verbose,r=n.experimentalFeatures),this.logger=new Wp(this.verbose),this.qrcode=new v_(this.getSupportedFormats(n),this.verbose,this.logger,M_.createExperimentalFeaturesConfig(r)),this.shouldScan=!0,this.stateManagerProxy=R_.create()}return e.prototype.start=function(t,n,r,a){if(!t)throw"cameraIdOrConfig is required";if(!r||"function"!=typeof r)throw"qrCodeSuccessCallback is required and should be a function.";a||(a=this.verbose?this.logger.log:function(){});var c=F_.create(n,this.logger);this.clearElement();var d=!1;c.videoConstraints&&(c.isMediaStreamConstraintsValid()?d=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=d,y=(c.isShadedBoxEnabled(),document.getElementById(this.elementId)),C=y.clientWidth?y.clientWidth:Gn.DEFAULT_WIDTH;y.style.position="relative",this.shouldScan=!0,this.element=y;var A=this,b=this.stateManagerProxy.startTransition(dt.SCANNING);return new Promise(function(v,O){var B=p?c.videoConstraints:A.createVideoConstraints(t);if(!B)return b.cancel(),void O("videoConstraints should be defined");navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({audio:!1,video:B}).then(function(H){A.onMediaStreamReceived(H,c,p,C,r,a).then(function(j){b.execute(),A.isScanning=!0,v(null)}).catch(function(j){b.cancel(),O(j)})}).catch(function(H){b.cancel(),O(Lo.errorGettingUserMedia(H))}):(b.cancel(),O(Lo.cameraStreamingNotSupported()))})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(dt.PAUSED),this.showPausedState(),(Cs(t)||!0!==t)&&(t=!1),t&&this.videoElement&&this.videoElement.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.videoElement)throw"VideoElement doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(dt.SCANNING),t.hidePausedState()};if(this.videoElement.paused){var a=function(){var c;setTimeout(n,200),null===(c=t.videoElement)||void 0===c||c.removeEventListener("playing",a)};this.videoElement.addEventListener("playing",a),this.videoElement.play()}else n()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(dt.NOT_STARTED);return this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout),new Promise(function(a,c){var d=function(){t.localMediaStream=null,t.element&&(t.element.removeChild(t.videoElement),t.element.removeChild(t.canvasElement)),function(){if(t.element){var a=document.getElementById(Gn.SHADED_REGION_ELEMENT_ID);a&&t.element.removeChild(a)}}(),t.qrRegion&&(t.qrRegion=null),t.context&&(t.context=null),n.execute(),t.hidePausedState(),t.isScanning=!1,a()};t.localMediaStream||d();var p=t.localMediaStream.getVideoTracks().length,m=0;t.localMediaStream.getVideoTracks().forEach(function(y){t.localMediaStream.removeTrack(y),y.stop(),++m>=p&&d()})})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!(t&&t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Cs(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,c){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var d=new Image;d.onload=function(){var p=d.width,m=d.height,y=document.getElementById(r.elementId),C=y.clientWidth?y.clientWidth:Gn.DEFAULT_WIDTH,A=Math.max(y.clientHeight?y.clientHeight:m,Gn.FILE_SCAN_MIN_HEIGHT),b=r.computeCanvasDrawConfig(p,m,C,A);if(n){var v=r.createCanvasElement(C,A,"qr-canvas-visible");v.style.display="inline-block",y.appendChild(v);var O=v.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=C,O.canvas.height=A,O.drawImage(d,0,0,p,m,b.x,b.y,b.width,b.height)}var B=r.createCanvasElement(b.width,b.height);y.appendChild(B);var H=B.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=b.width,H.canvas.height=b.height,H.drawImage(d,0,0,p,m,0,0,b.width,b.height);try{r.qrcode.decodeAsync(B).then(function(j){a(Gp.createFromQrcodeResult(j))}).catch(c)}catch(j){c("QR code parse error, error = "+j)}},d.onerror=c,d.onabort=c,d.onstalled=c,d.onsuspend=c,d.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;if(MediaStreamTrack&&t.getSources)return e.getCamerasFromMediaStreamTrack();var r=Lo.unableToQuerySupportedDevices();return function(){if("https:"===location.protocol)return!0;var a=location.host.split(":")[0];return"127.0.0.1"===a||"localhost"===a}()||(r=Lo.insecureContextCameraQueryError()),Promise.reject(r)},e.prototype.getRunningTrackCapabilities=function(){if(null==this.localMediaStream)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";if(0===this.localMediaStream.getVideoTracks().length)throw"No video tracks found";return this.localMediaStream.getVideoTracks()[0].getCapabilities()},e.prototype.applyVideoConstraints=function(t){var n=this;if(!t)throw"videoConstaints is required argument.";if(!Xp.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details";if(null===this.localMediaStream)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";if(0===this.localMediaStream.getVideoTracks().length)throw"No video tracks found";return new Promise(function(r,a){"aspectRatio"in t?a("Chaning 'aspectRatio' in run-time is not yet supported."):n.localMediaStream.getVideoTracks()[0].applyConstraints(t).then(function(d){r(d)}).catch(function(d){a(d)})})},e.getCamerasFromMediaDevices=function(){return new Promise(function(t,n){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(r){navigator.mediaDevices.enumerateDevices().then(function(c){for(var d=[],p=0,m=c;p<m.length;p++){var y=m[p];"videoinput"===y.kind&&d.push({id:y.deviceId,label:y.label})}(function(c){for(var p=0,m=c.getVideoTracks();p<m.length;p++){var y=m[p];y.enabled=!1,y.stop(),c.removeTrack(y)}})(r),t(d)}).catch(function(c){n(c.name+" : "+c.message)})}).catch(function(r){n(r.name+" : "+r.message)})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){MediaStreamTrack.getSources(function(c){for(var d=[],p=0,m=c;p<m.length;p++){var y=m[p];"video"===y.kind&&d.push({id:y.id,label:y.label})}t(d)})})},e.prototype.getSupportedFormats=function(t){if(!t||"boolean"==typeof t||!t.formatsToSupport)return[X.QR_CODE,X.AZTEC,X.CODABAR,X.CODE_39,X.CODE_93,X.CODE_128,X.DATA_MATRIX,X.MAXICODE,X.ITF,X.EAN_13,X.EAN_8,X.PDF_417,X.RSS_14,X.RSS_EXPANDED,X.UPC_A,X.UPC_E,X.UPC_EAN_EXTENSION];if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===t.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],a=0,c=t.formatsToSupport;a<c.length;a++){var d=c[a];__(d)?r.push(d):this.logger.warn("Invalid format: "+d+" passed in config, ignoring.")}if(0===r.length)throw"None of formatsToSupport match supported values.";return r},e.prototype.validateQrboxSize=function(t,n,r){var c=r.qrbox;this.validateQrboxConfig(c);var y,d=this.toQrdimensions(t,n,c),p=function(y){if(y<Gn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is "+Gn.MIN_QR_BOX_SIZE+"px."};p(d.width),p(d.height),d.width=((y=d.width)>t&&(this.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),y=t),y)},e.prototype.validateQrboxConfig=function(t){if("number"!=typeof t&&"function"!=typeof t&&(void 0===t.width||void 0===t.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if("number"==typeof r)return{width:r,height:r};if("function"==typeof r)try{return r(t,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var a=Cs(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(a);var c=this.toQrdimensions(t,n,a);c.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=r.isShadedBoxEnabled()&&c.height<=n,p={x:0,y:0,width:t,height:n},m=d?this.getShadedRegionBounds(t,n,c):p,y=this.createCanvasElement(m.width,m.height),C=y.getContext("2d");C.canvas.width=m.width,C.canvas.height=m.height,this.element.append(y),d&&this.possiblyInsertShadingElement(this.element,t,n,c),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=C,this.canvasElement=y},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText="Scanner paused",n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="yellow",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,Gp.createFromQrcodeResult(a)),r.possiblyUpdateShaders(!0),!0}).catch(function(a){r.possiblyUpdateShaders(!1);var c=Lo.codeParseError(a);return n(c,zp.createFrom(c)),!1})},e.prototype.foreverScan=function(t,n,r){var a=this;if(this.shouldScan&&this.localMediaStream){var c=this.videoElement,d=c.videoWidth/c.clientWidth,p=c.videoHeight/c.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";this.context.drawImage(c,this.qrRegion.x*d,this.qrRegion.y*p,this.qrRegion.width*d,this.qrRegion.height*p,0,0,this.qrRegion.width,this.qrRegion.height);var b=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,n,r)},a.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(v){v||!0===t.disableFlip?b():(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,r).finally(function(){b()}))}).catch(function(v){a.logger.logError("Error happend while scanning context",v),b()})}},e.prototype.onMediaStreamReceived=function(t,n,r,a,c,d){var p=this,m=this;return new Promise(function(y,C){var A=function(){var O=p.createVideoElement(a);m.element.append(O),O.onabort=C,O.onerror=C;var B=function(){m.setupUi(O.clientWidth,O.clientHeight,n),m.foreverScan(n,c,d),O.removeEventListener("playing",B),y(null)};O.addEventListener("playing",B),O.srcObject=t,O.play(),m.videoElement=O};if(m.localMediaStream=t,r||!n.aspectRatio)A();else{var b={aspectRatio:n.aspectRatio};t.getVideoTracks()[0].applyConstraints(b).then(function(O){return A()}).catch(function(O){m.logger.logErrors(["[Html5Qrcode] Constriants could not be satisfied, ignoring constraints",O]),A()})}})},e.prototype.createVideoConstraints=function(t){if("string"==typeof t)return{deviceId:{exact:t}};if("object"==typeof t){var n="facingMode",r="deviceId",a={user:!0,environment:!0},c="exact",d=function(O){if(O in a)return!0;throw"config has invalid 'facingMode' value = '"+O+"'"},p=Object.keys(t);if(1!==p.length)throw"'cameraIdOrConfig' object should have exactly 1 key, if passed as an object, found "+p.length+" keys";var m=Object.keys(t)[0];if(m!==n&&m!==r)throw"Only '"+n+"' and '"+r+"'  are supported for 'cameraIdOrConfig'";if(m!==n){var A=t.deviceId;if("string"==typeof A)return{deviceId:A};if("object"==typeof A){if(c in A)return{deviceId:{exact:A.exact}};throw"'deviceId' should be string or object with exact as key."}throw"Invalid type of 'deviceId' = "+typeof A}var y=t.facingMode;if("string"==typeof y){if(d(y))return{facingMode:y}}else{if("object"!=typeof y)throw"Invalid type of 'facingMode' = "+typeof y;if(!(c in y))throw"'facingMode' should be string or object with exact as key.";if(d(y.exact))return{facingMode:{exact:y.exact}}}}throw"Invalid type of 'cameraIdOrConfig' = "+typeof t},e.prototype.computeCanvasDrawConfig=function(t,n,r,a){if(t<=r&&n<=a)return{x:(r-t)/2,y:(a-n)/2,width:t,height:n};var p=t,m=n;return t>r&&(n*=r/t,t=r),n>a&&(t*=a/n,n=a),this.logger.log("Image downsampled from "+p+"X"+m+" to "+t+"X"+n+"."),this.computeCanvasDrawConfig(t,n,r,a)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width=t+"px",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Gn.BORDER_SHADER_MATCH_COLOR:Gn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var a=t,c=n,d=document.createElement("canvas");return d.style.width=a+"px",d.style.height=c+"px",d.style.display="none",d.id=Cs(r)?"qr-canvas":r,d},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,a){if(!(n-a.width<1||r-a.height<1)){var c=document.createElement("div");c.style.position="absolute";var d=(n-a.width)/2,p=(r-a.height)/2;if(c.style.borderLeft=d+"px solid #0000007a",c.style.borderRight=d+"px solid #0000007a",c.style.borderTop=p+"px solid #0000007a",c.style.borderBottom=p+"px solid #0000007a",c.style.boxSizing="border-box",c.style.top="0px",c.style.bottom="0px",c.style.left="0px",c.style.right="0px",c.id=""+Gn.SHADED_REGION_ELEMENT_ID,n-a.width<11||r-a.height<11)this.hasBorderShaders=!1;else{var y=40;this.insertShaderBorders(c,y,5,-5,0,!0),this.insertShaderBorders(c,y,5,-5,0,!1),this.insertShaderBorders(c,y,5,a.height+5,0,!0),this.insertShaderBorders(c,y,5,a.height+5,0,!1),this.insertShaderBorders(c,5,45,-5,-5,!0),this.insertShaderBorders(c,5,45,a.height+5-y,-5,!0),this.insertShaderBorders(c,5,45,-5,-5,!1),this.insertShaderBorders(c,5,45,a.height+5-y,-5,!1),this.hasBorderShaders=!0}t.append(c)}},e.prototype.insertShaderBorders=function(t,n,r,a,c,d){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=Gn.BORDER_SHADER_DEFAULT_COLOR,p.style.width=n+"px",p.style.height=r+"px",p.style.top=a+"px",d?p.style.left=c+"px":p.style.right=c+"px",this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),t.appendChild(p)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),Qp="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",qp=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),V_=function(){function e(){this.data=qp.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=qp.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),U_=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid silver",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(248 248 248)",this.infoDiv.innerText=Yp.builtUsing();var n=document.createElement("a");n.innerText="html5-qrcode",n.href="https://github.com/mebjas/html5-qrcode",n.target="new",this.infoDiv.appendChild(n);var r=document.createElement("br"),a=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(a);var c=document.createElement("a");c.innerText=Yp.reportIssues(),c.href="https://github.com/mebjas/html5-qrcode/issues",c.target="new",this.infoDiv.appendChild(c),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),j_=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Qp,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Qp,this.infoIcon.style.opacity="0.6")},e}(),H_=function(){function e(){var t=this;this.infoDiv=new U_,this.infoIcon=new j_(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),Kp=function(){function e(){}return e.hasCameraPermissions=function(){return new Promise(function(t,n){navigator.mediaDevices.enumerateDevices().then(function(r){r.forEach(function(a){"videoinput"===a.kind&&a.label&&t(!0)}),t(!1)})})},e}(),zr=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++)if(e.isCameraScanType(n[t]))return!0;return!1},e.isCameraScanType=function(t){return t===Gr.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===Gr.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||0===t.length)return Ir.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Ir.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max "+n+" values expected for supportedScanTypes";for(var r=0,a=t;r<a.length;r++){var c=a[r];if(!Ir.DEFAULT_SUPPORTED_SCAN_TYPE.includes(c))throw"Unsupported scan type "+c}return t},e}(),Sn=(()=>(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(Sn||(Sn={})),Sn))(),W_=function(){function e(t,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=!0===r,!document.getElementById(t))throw"HTML Element with id="+t+" not found";this.scanTypeSelector=new zr(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Wp(this.verbose),this.persistedDataManager=new V_,!0!==n.rememberLastUsedCamera&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(c,d){if(t)t(c,d);else{if(r.lastMatchFound===c)return;r.lastMatchFound=c,r.setHeaderMessage(ir.lastMatch(c),Sn.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(c,d){n&&n(c,d)};var a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id="+this.elementId+" not found";a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new gl(this.getScanRegionId(),function z_(e,t){return{formatsToSupport:e.formatsToSupport,experimentalFeatures:e.experimentalFeatures,verbose:t}}(this.config,this.verbose))},e.prototype.pause=function(t){if(!this.html5Qrcode)throw"Code scanner not initialized.";(Cs(t)||!0!==t)&&(t=!1),this.html5Qrcode.pause(t)},e.prototype.resume=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";this.html5Qrcode.resume()},e.prototype.getState=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode.getState()},e.prototype.clear=function(){var t=this,n=function(){var r=document.getElementById(t.elementId);r&&(r.innerHTML="",t.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,a){t.html5Qrcode?t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(c){t.html5Qrcode?(t.html5Qrcode.clear(),n(),r()):r()}).catch(function(c){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",c),a(c)}):(t.html5Qrcode.clear(),n()):r()}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode.getRunningTrackCapabilities()},e.prototype.applyVideoConstraints=function(t){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode.applyVideoConstraints(t)},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=Ir.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!Ir.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=Ir.DEFAULT_REMEMBER_LAST_CAMERA_USED),t):{fps:Ir.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Ir.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Ir.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),zr.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var a=document.createElement("div"),c=this.getDashboardId();a.id=c,a.style.width="100%",t.appendChild(a),this.setupInitialDashboard(a)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n),(new H_).renderInto(n);var a=document.createElement("div");a.id=this.getHeaderMessageContainerId(),a.style.display="none",a.style.textAlign="center",a.style.fontSize="14px",a.style.padding="2px 10px",a.style.margin="4px",a.style.borderTop="1px solid #f6f6f6",n.appendChild(a)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,r){var a=this;a.setHeaderMessage(ir.cameraPermissionRequesting());var c=function(){r||a.createPermissionButton(t,n)};gl.getCameras().then(function(d){a.persistedDataManager.setHasPermission(!0),a.resetHeaderMessage(),d&&d.length>0?(t.removeChild(n),a.renderCameraSelection(d)):(a.setHeaderMessage(ir.noCameraFound(),Sn.STATUS_WARNING),c())}).catch(function(d){a.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:c(),a.setHeaderMessage(d,Sn.STATUS_WARNING)})},e.prototype.createPermissionButton=function(t,n){var r=this,a=document.createElement("button");a.id=this.getCameraPermissionButtonId(),a.innerText=ir.cameraPermissionTitle(),a.addEventListener("click",function(){a.disabled=!0,r.createCameraListUi(t,n,a)}),n.appendChild(a)},e.prototype.createPermissionsUi=function(t,n){var r=this;zr.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?Kp.hasCameraPermissions().then(function(a){a?r.createCameraListUi(t,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n))}).catch(function(a){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n)}):this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var n=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");n.appendChild(r);var a=document.createElement("div");a.id=this.getDashboardSectionCameraScanRegionId(),a.style.display=zr.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(a);var c=document.createElement("div");c.style.textAlign="center",a.appendChild(c),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(a,c),this.renderFileScanUi(r)},e.prototype.renderFileScanUi=function(t){var n=this,r=document.createElement("div");r.id=this.getDashboardSectionFileScanRegionId(),r.style.textAlign="center",r.style.display=zr.isCameraScanType(this.currentScanType)?"none":"block",t.appendChild(r);var a=document.createElement("input");a.id=this.getFileScanInputId(),a.accept="image/*",a.type="file",a.style.width="200px",a.disabled=zr.isCameraScanType(this.currentScanType);var c=document.createElement("span");c.innerText=" Select Image",r.appendChild(a),r.appendChild(c),a.addEventListener("change",function(d){if(!n.html5Qrcode)throw"html5Qrcode not defined";null!=d&&null!=d.target&&zr.isFileScanType(n.currentScanType)&&0!==d.target.files.length&&n.html5Qrcode.scanFileV2(d.target.files[0],!0).then(function(m){n.resetHeaderMessage(),n.qrCodeSuccessCallback(m.decodedText,m)}).catch(function(m){n.setHeaderMessage(m,Sn.STATUS_WARNING),n.qrCodeErrorCallback(m,zp.createFrom(m))})})},e.prototype.renderCameraSelection=function(t){var n=this,r=this,a=document.getElementById(this.getDashboardSectionCameraScanRegionId());a.style.textAlign="center";var c=document.createElement("span");c.style.marginRight="10px";var d=t.length,p=document.createElement("select");if(1===d)p.style.display="none";else{var m=ir.selectCamera();c.innerText=m+" ("+t.length+")  "}p.id=this.getCameraSelectionId();for(var y=[],C=0,A=t;C<A.length;C++){var b=A[C],v=b.id,O=null==b.label?v:b.label;(B=document.createElement("option")).value=v,B.innerText=O,y.push(B),p.appendChild(B)}c.appendChild(p),a.appendChild(c);var H=document.createElement("span"),j=document.createElement("button");j.innerText=ir.scanButtonStartScanningText(),H.appendChild(j);var P=document.createElement("button");P.innerText=ir.scanButtonStopScanningText(),P.style.display="none",P.disabled=!0,H.appendChild(P),a.appendChild(H);var re=function(ci){ci||(j.style.display="none"),j.innerText=ir.scanButtonStartScanningText(),j.style.opacity="1",j.disabled=!1,ci&&(j.style.display="inline-block")};if(j.addEventListener("click",function(ci){j.innerText=ir.scanButtonScanningStarting(),p.disabled=!0,j.disabled=!0,j.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var Wr=p.value;r.persistedDataManager.setLastUsedCameraId(Wr),r.html5Qrcode.start(Wr,function G_(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(Ds){P.disabled=!1,P.style.display="inline-block",re(!1)}).catch(function(Ds){r.showHideScanTypeSwapLink(!0),p.disabled=!1,re(!0),r.setHeaderMessage(Ds,Sn.STATUS_WARNING)})}),1===d&&j.click(),P.addEventListener("click",function(ci){if(!r.html5Qrcode)throw"html5Qrcode not defined";P.disabled=!0,r.html5Qrcode.stop().then(function(Wr){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),p.disabled=!1,j.disabled=!1,P.style.display="none",j.style.display="inline-block",r.insertCameraScanImageToScanRegion()}).catch(function(Wr){P.disabled=!1,r.setHeaderMessage(Wr,Sn.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){for(var Ee=r.persistedDataManager.getLastUsedCameraId(),Oe=!1,Xt=0,_r=y;Xt<_r.length;Xt++){var B;if((B=_r[Xt]).value===Ee){Oe=!0;break}}Oe?(p.value=Ee,j.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=ir.textIfCameraScanSelected(),r=ir.textIfFileScanSelected(),a=document.getElementById(this.getDashboardSectionId()),c=document.createElement("div");c.style.textAlign="center";var d=document.createElement("a");d.style.textDecoration="underline",d.id=this.getDashboardSectionSwapLinkId(),d.innerText=zr.isCameraScanType(this.currentScanType)?n:r,d.addEventListener("click",function(){t.sectionSwapAllowed?(t.resetHeaderMessage(),t.getFileScanInput().value="",t.sectionSwapAllowed=!1,zr.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getFileScanInput().disabled=!1,t.getCameraScanRegion().style.display="none",t.getFileScanRegion().style.display="block",d.innerText=r,t.currentScanType=Gr.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getFileScanInput().disabled=!0,t.getCameraScanRegion().style.display="block",t.getFileScanRegion().style.display="none",d.innerText=n,t.currentScanType=Gr.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0):t.verbose&&t.logger.logError("Section swap called when not allowed")}),c.appendChild(d),a.appendChild(c)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;this.persistedDataManager.hasCameraPermissions()&&Kp.hasCameraPermissions().then(function(r){if(r){var a=document.getElementById(n.getCameraPermissionButtonId());if(!a)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";a.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)})},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=Sn.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",n){case Sn.STATUS_SUCCESS:r.style.background="#6aaf5042",r.style.color="#477735";break;case Sn.STATUS_WARNING:r.style.background="#cb243124",r.style.color="#cb2431";break;default:r.style.background="#00000000",r.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(t){!0!==t&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none"},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return n.innerHTML="<br>",void n.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg=="},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return n.innerHTML="<br>",void n.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4="},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return this.elementId+"__dashboard_section"},e.prototype.getDashboardSectionCameraScanRegionId=function(){return this.elementId+"__dashboard_section_csr"},e.prototype.getDashboardSectionFileScanRegionId=function(){return this.elementId+"__dashboard_section_fsr"},e.prototype.getDashboardSectionSwapLinkId=function(){return this.elementId+"__dashboard_section_swaplink"},e.prototype.getScanRegionId=function(){return this.elementId+"__scan_region"},e.prototype.getDashboardId=function(){return this.elementId+"__dashboard"},e.prototype.getFileScanInputId=function(){return this.elementId+"__filescan_input"},e.prototype.getStatusSpanId=function(){return this.elementId+"__status_span"},e.prototype.getHeaderMessageContainerId=function(){return this.elementId+"__header_message"},e.prototype.getCameraSelectionId=function(){return this.elementId+"__camera_selection"},e.prototype.getCameraPermissionButtonId=function(){return this.elementId+"__camera_permission_button"},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getFileScanRegion=function(){return document.getElementById(this.getDashboardSectionFileScanRegionId())},e.prototype.getFileScanInput=function(){return document.getElementById(this.getFileScanInputId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();let Y_=(()=>{class e{constructor(){this.title="scanner"}ngOnInit(){}scanFirst(){return function I_(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var c=e.apply(t,n);function d(m){Up(c,r,a,d,p,"next",m)}function p(m){Up(c,r,a,d,p,"throw",m)}d(void 0)})}}(function*(){const n=yield gl.getCameras();if(!n.length)return alert("Camera is required.");new gl("scanner").start(n[0].id,{fps:10,qrbox:{width:250,height:250}},(d,p)=>{console.log(d,p)},d=>{console.log(d)})})()}scanSecond(){new W_("scanner",{fps:10,qrbox:{height:250,width:250},formatsToSupport:[X.QR_CODE,X.AZTEC,X.CODABAR,X.CODE_39,X.CODE_93,X.CODE_128,X.DATA_MATRIX,X.MAXICODE,X.ITF,X.EAN_13,X.EAN_8,X.PDF_417,X.RSS_14,X.RSS_EXPANDED,X.UPC_A,X.UPC_E,X.UPC_EAN_EXTENSION],supportedScanTypes:[],disableFlip:!1,videoConstraints:{facingMode:"environment"}},!1).render(d=>{console.log(d)},d=>{console.log(d)})}}return e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=Ye({type:e,selectors:[["app-root"]],decls:5,vars:0,consts:[["id","scanner",2,"height","50vh","width","50vw"],[3,"click"]],template:function(n,r){1&n&&(cu(0,"div",0),mo(1,"button",1),Ba("click",function(){return r.scanFirst()}),mu(2,"Scan First"),xo(),mo(3,"button",1),Ba("click",function(){return r.scanSecond()}),mu(4,"Scan First"),xo())},styles:[""]}),e})(),X_=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Rr({type:e,bootstrap:[Y_]}),e.\u0275inj=gn({providers:[],imports:[[h_]]}),e})();(function $D(){tp=!1})(),f_().bootstrapModule(X_).catch(e=>console.error(e))},140:function(Fo,Po){!function(W){"use strict";var nt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,i){w.__proto__=i}||function(w,i){for(var s in i)i.hasOwnProperty(s)&&(w[s]=i[s])};var vn=function(w){function i(s){var o=this.constructor,l=w.call(this,s)||this;return Object.defineProperty(l,"name",{value:o.name,enumerable:!1}),function As(w,i){var s=Object.setPrototypeOf;s?s(w,i):w.__proto__=i}(l,o.prototype),function Is(w,i){void 0===i&&(i=w.constructor);var s=Error.captureStackTrace;s&&s(w,i)}(l),l}return function Bo(w,i){function s(){this.constructor=w}nt(w,i),w.prototype=null===i?Object.create(i):(s.prototype=i.prototype,new s)}(i,w),i}(Error);let Bt=(()=>{class w extends vn{constructor(s){super(s),this.message=s}getKind(){return this.constructor.kind}}return w.kind="Exception",w})(),Jt=(()=>{class w extends Bt{}return w.kind="ArgumentException",w})(),te=(()=>{class w extends Bt{}return w.kind="IllegalArgumentException",w})();class un{constructor(i){if(this.binarizer=i,null===i)throw new te("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,s){return this.binarizer.getBlackRow(i,s)}getBlackMatrix(){return null==this.matrix&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,s,o,l){const u=this.binarizer.getLuminanceSource().crop(i,s,o,l);return new un(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new un(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new un(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch(i){return""}}}let at=(()=>{class w extends Bt{static getChecksumInstance(){return new w}}return w.kind="ChecksumException",w})();class _s{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class Ge{static arraycopy(i,s,o,l,u){for(;u--;)o[l++]=i[s++]}static currentTimeMillis(){return Date.now()}}let Ts=(()=>{class w extends Bt{}return w.kind="IndexOutOfBoundsException",w})(),ko=(()=>{class w extends Ts{constructor(s,o){super(o),this.index=s,this.message=o}}return w.kind="ArrayIndexOutOfBoundsException",w})();class Ct{static fill(i,s){for(let o=0,l=i.length;o<l;o++)i[o]=s}static fillWithin(i,s,o,l){Ct.rangeCheck(i.length,s,o);for(let u=s;u<o;u++)i[u]=l}static rangeCheck(i,s,o){if(s>o)throw new te("fromIndex("+s+") > toIndex("+o+")");if(s<0)throw new ko(s);if(o>i)throw new ko(o)}static asList(...i){return i}static create(i,s,o){return Array.from({length:i}).map(u=>Array.from({length:s}).fill(o))}static createInt32Array(i,s,o){return Array.from({length:i}).map(u=>Int32Array.from({length:s}).fill(o))}static equals(i,s){if(!(i&&s&&i.length&&s.length&&i.length===s.length))return!1;for(let o=0,l=i.length;o<l;o++)if(i[o]!==s[o])return!1;return!0}static hashCode(i){if(null===i)return 0;let s=1;for(const o of i)s=31*s+o;return s}static fillUint8Array(i,s){for(let o=0;o!==i.length;o++)i[o]=s}static copyOf(i,s){return i.slice(0,s)}static copyOfUint8Array(i,s){if(i.length<=s){const o=new Uint8Array(s);return o.set(i),o}return i.slice(0,s)}static copyOfRange(i,s,o){const l=o-s,u=new Int32Array(l);return Ge.arraycopy(i,s,u,0,l),u}static binarySearch(i,s,o){void 0===o&&(o=Ct.numberComparator);let l=0,u=i.length-1;for(;l<=u;){const f=u+l>>1,h=o(s,i[f]);if(h>0)l=f+1;else{if(!(h<0))return f;u=f-1}}return-l-1}static numberComparator(i,s){return i-s}}class Ce{static numberOfTrailingZeros(i){let s;if(0===i)return 32;let o=31;return s=i<<16,0!==s&&(o-=16,i=s),s=i<<8,0!==s&&(o-=8,i=s),s=i<<4,0!==s&&(o-=4,i=s),s=i<<2,0!==s&&(o-=2,i=s),o-(i<<1>>>31)}static numberOfLeadingZeros(i){if(0===i)return 32;let s=1;return i>>>16==0&&(s+=16,i<<=16),i>>>24==0&&(s+=8,i<<=8),i>>>28==0&&(s+=4,i<<=4),i>>>30==0&&(s+=2,i<<=2),s-=i>>>31,s}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=(i=(858993459&(i-=i>>>1&1431655765))+(i>>>2&858993459))+(i>>>4)&252645135,63&(i+=i>>>8)+(i>>>16)}static truncDivision(i,s){return Math.trunc(i/s)}static parseInt(i,s){return parseInt(i,s)}}Ce.MIN_VALUE_32_BITS=-2147483648,Ce.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Be{constructor(i,s){void 0===i?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,this.bits=null==s?Be.makeArray(i):s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>32*this.bits.length){const s=Be.makeArray(i);Ge.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(i){return 0!=(this.bits[Math.floor(i/32)]&1<<(31&i))}set(i){this.bits[Math.floor(i/32)]|=1<<(31&i)}flip(i){this.bits[Math.floor(i/32)]^=1<<(31&i)}getNextSet(i){const s=this.size;if(i>=s)return s;const o=this.bits;let l=Math.floor(i/32),u=o[l];u&=~((1<<(31&i))-1);const f=o.length;for(;0===u;){if(++l===f)return s;u=o[l]}const h=32*l+Ce.numberOfTrailingZeros(u);return h>s?s:h}getNextUnset(i){const s=this.size;if(i>=s)return s;const o=this.bits;let l=Math.floor(i/32),u=~o[l];u&=~((1<<(31&i))-1);const f=o.length;for(;0===u;){if(++l===f)return s;u=~o[l]}const h=32*l+Ce.numberOfTrailingZeros(u);return h>s?s:h}setBulk(i,s){this.bits[Math.floor(i/32)]=s}setRange(i,s){if(s<i||i<0||s>this.size)throw new te;if(s===i)return;s--;const o=Math.floor(i/32),l=Math.floor(s/32),u=this.bits;for(let f=o;f<=l;f++)u[f]|=(2<<(f<l?31:31&s))-(1<<(f>o?0:31&i))}clear(){const i=this.bits.length,s=this.bits;for(let o=0;o<i;o++)s[o]=0}isRange(i,s,o){if(s<i||i<0||s>this.size)throw new te;if(s===i)return!0;s--;const l=Math.floor(i/32),u=Math.floor(s/32),f=this.bits;for(let h=l;h<=u;h++){const E=(2<<(h<u?31:31&s))-(1<<(h>l?0:31&i))&4294967295;if((f[h]&E)!==(o?E:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(i,s){if(s<0||s>32)throw new te("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let o=s;o>0;o--)this.appendBit(1==(i>>o-1&1))}appendBitArray(i){const s=i.size;this.ensureCapacity(this.size+s);for(let o=0;o<s;o++)this.appendBit(i.get(o))}xor(i){if(this.size!==i.size)throw new te("Sizes don't match");const s=this.bits;for(let o=0,l=s.length;o<l;o++)s[o]^=i.bits[o]}toBytes(i,s,o,l){for(let u=0;u<l;u++){let f=0;for(let h=0;h<8;h++)this.get(i)&&(f|=1<<7-h),i++;s[o+u]=f}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),o=s+1,l=this.bits;for(let u=0;u<o;u++){let f=l[u];f=f>>1&1431655765|(1431655765&f)<<1,f=f>>2&858993459|(858993459&f)<<2,f=f>>4&252645135|(252645135&f)<<4,f=f>>8&16711935|(16711935&f)<<8,f=f>>16&65535|(65535&f)<<16,i[s-u]=f}if(this.size!==32*o){const u=32*o-this.size;let f=i[0]>>>u;for(let h=1;h<o;h++){const g=i[h];f|=g<<32-u,i[h-1]=f,f=g>>>u}i[o-1]=f}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){return i instanceof Be&&this.size===i.size&&Ct.equals(this.bits,i.bits)}hashCode(){return 31*this.size+Ct.hashCode(this.bits)}toString(){let i="";for(let s=0,o=this.size;s<o;s++)0==(7&s)&&(i+=" "),i+=this.get(s)?"X":".";return i}clone(){return new Be(this.size,this.bits.slice())}}var Tr=(()=>{return(w=Tr||(Tr={}))[w.OTHER=0]="OTHER",w[w.PURE_BARCODE=1]="PURE_BARCODE",w[w.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",w[w.TRY_HARDER=3]="TRY_HARDER",w[w.CHARACTER_SET=4]="CHARACTER_SET",w[w.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",w[w.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",w[w.ASSUME_GS1=7]="ASSUME_GS1",w[w.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",w[w.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",w[w.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS",Tr;var w})(),et=Tr;let Z=(()=>{class w extends Bt{static getFormatInstance(){return new w}}return w.kind="FormatException",w})();var ke=(()=>{return(w=ke||(ke={}))[w.Cp437=0]="Cp437",w[w.ISO8859_1=1]="ISO8859_1",w[w.ISO8859_2=2]="ISO8859_2",w[w.ISO8859_3=3]="ISO8859_3",w[w.ISO8859_4=4]="ISO8859_4",w[w.ISO8859_5=5]="ISO8859_5",w[w.ISO8859_6=6]="ISO8859_6",w[w.ISO8859_7=7]="ISO8859_7",w[w.ISO8859_8=8]="ISO8859_8",w[w.ISO8859_9=9]="ISO8859_9",w[w.ISO8859_10=10]="ISO8859_10",w[w.ISO8859_11=11]="ISO8859_11",w[w.ISO8859_13=12]="ISO8859_13",w[w.ISO8859_14=13]="ISO8859_14",w[w.ISO8859_15=14]="ISO8859_15",w[w.ISO8859_16=15]="ISO8859_16",w[w.SJIS=16]="SJIS",w[w.Cp1250=17]="Cp1250",w[w.Cp1251=18]="Cp1251",w[w.Cp1252=19]="Cp1252",w[w.Cp1256=20]="Cp1256",w[w.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",w[w.UTF8=22]="UTF8",w[w.ASCII=23]="ASCII",w[w.Big5=24]="Big5",w[w.GB18030=25]="GB18030",w[w.EUC_KR=26]="EUC_KR",ke;var w})();class Y{constructor(i,s,o,...l){this.valueIdentifier=i,this.name=o,this.values="number"==typeof s?Int32Array.from([s]):s,this.otherEncodingNames=l,Y.VALUE_IDENTIFIER_TO_ECI.set(i,this),Y.NAME_TO_ECI.set(o,this);const u=this.values;for(let f=0,h=u.length;f!==h;f++)Y.VALUES_TO_ECI.set(u[f],this);for(const f of l)Y.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new Z("incorect value");const s=Y.VALUES_TO_ECI.get(i);if(void 0===s)throw new Z("incorect value");return s}static getCharacterSetECIByName(i){const s=Y.NAME_TO_ECI.get(i);if(void 0===s)throw new Z("incorect value");return s}equals(i){if(!(i instanceof Y))return!1;const s=i;return this.getName()===s.getName()}}Y.VALUE_IDENTIFIER_TO_ECI=new Map,Y.VALUES_TO_ECI=new Map,Y.NAME_TO_ECI=new Map,Y.Cp437=new Y(ke.Cp437,Int32Array.from([0,2]),"Cp437"),Y.ISO8859_1=new Y(ke.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Y.ISO8859_2=new Y(ke.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Y.ISO8859_3=new Y(ke.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Y.ISO8859_4=new Y(ke.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Y.ISO8859_5=new Y(ke.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Y.ISO8859_6=new Y(ke.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Y.ISO8859_7=new Y(ke.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Y.ISO8859_8=new Y(ke.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Y.ISO8859_9=new Y(ke.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Y.ISO8859_10=new Y(ke.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Y.ISO8859_11=new Y(ke.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Y.ISO8859_13=new Y(ke.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Y.ISO8859_14=new Y(ke.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Y.ISO8859_15=new Y(ke.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Y.ISO8859_16=new Y(ke.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Y.SJIS=new Y(ke.SJIS,20,"SJIS","Shift_JIS"),Y.Cp1250=new Y(ke.Cp1250,21,"Cp1250","windows-1250"),Y.Cp1251=new Y(ke.Cp1251,22,"Cp1251","windows-1251"),Y.Cp1252=new Y(ke.Cp1252,23,"Cp1252","windows-1252"),Y.Cp1256=new Y(ke.Cp1256,24,"Cp1256","windows-1256"),Y.UnicodeBigUnmarked=new Y(ke.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Y.UTF8=new Y(ke.UTF8,26,"UTF8","UTF-8"),Y.ASCII=new Y(ke.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Y.Big5=new Y(ke.Big5,28,"Big5"),Y.GB18030=new Y(ke.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Y.EUC_KR=new Y(ke.EUC_KR,30,"EUC_KR","EUC-KR");let ui=(()=>{class w extends Bt{}return w.kind="UnsupportedOperationException",w})();class Dt{static decode(i,s){const o=this.encodingName(s);return this.customDecoder?this.customDecoder(i,o):"undefined"==typeof TextDecoder||this.shouldDecodeOnFallback(o)?this.decodeFallback(i,o):new TextDecoder(o).decode(i)}static shouldDecodeOnFallback(i){return!Dt.isBrowser()&&"ISO-8859-1"===i}static encode(i,s){const o=this.encodingName(s);return this.customEncoder?this.customEncoder(i,o):"undefined"==typeof TextEncoder?this.encodeFallback(i):(new TextEncoder).encode(i)}static isBrowser(){return"undefined"!=typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(i){return"string"==typeof i?i:i.getName()}static encodingCharacterSet(i){return i instanceof Y?i:Y.getCharacterSetECIByName(i)}static decodeFallback(i,s){const o=this.encodingCharacterSet(s);if(Dt.isDecodeFallbackSupported(o)){let l="";for(let u=0,f=i.length;u<f;u++){let h=i[u].toString(16);h.length<2&&(h="0"+h),l+="%"+h}return decodeURIComponent(l)}if(o.equals(Y.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new ui(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(Y.UTF8)||i.equals(Y.ISO8859_1)||i.equals(Y.ASCII)}static encodeFallback(i){const o=btoa(unescape(encodeURIComponent(i))).split(""),l=[];for(let u=0;u<o.length;u++)l.push(o[u].charCodeAt(0));return new Uint8Array(l)}}class ue{static castAsNonUtf8Char(i,s=null){const o=s?s.getName():this.ISO88591;return Dt.decode(new Uint8Array([i]),o)}static guessEncoding(i,s){if(null!=s&&void 0!==s.get(et.CHARACTER_SET))return s.get(et.CHARACTER_SET).toString();const o=i.length;let l=!0,u=!0,f=!0,h=0,g=0,x=0,E=0,D=0,I=0,T=0,S=0,M=0,R=0,L=0;const U=i.length>3&&239===i[0]&&187===i[1]&&191===i[2];for(let q=0;q<o&&(l||u||f);q++){const k=255&i[q];f&&(h>0?0==(128&k)?f=!1:h--:0!=(128&k)&&(0==(64&k)?f=!1:(h++,0==(32&k)?g++:(h++,0==(16&k)?x++:(h++,0==(8&k)?E++:f=!1))))),l&&(k>127&&k<160?l=!1:k>159&&(k<192||215===k||247===k)&&L++),u&&(D>0?k<64||127===k||k>252?u=!1:D--:128===k||160===k||k>239?u=!1:k>160&&k<224?(I++,S=0,T++,T>M&&(M=T)):k>127?(D++,T=0,S++,S>R&&(R=S)):(T=0,S=0))}return f&&h>0&&(f=!1),u&&D>0&&(u=!1),f&&(U||g+x+E>0)?ue.UTF8:u&&(ue.ASSUME_SHIFT_JIS||M>=3||R>=3)?ue.SHIFT_JIS:l&&u?2===M&&2===I||10*L>=o?ue.SHIFT_JIS:ue.ISO88591:l?ue.ISO88591:u?ue.SHIFT_JIS:f?ue.UTF8:ue.PLATFORM_DEFAULT_ENCODING}static format(i,...s){let o=-1;return i.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function l(f,h,g,x,E,D){if("%%"===f)return"%";if(void 0===s[++o])return;f=x?parseInt(x.substr(1)):void 0;let T,I=E?parseInt(E.substr(1)):void 0;switch(D){case"s":T=s[o];break;case"c":T=s[o][0];break;case"f":T=parseFloat(s[o]).toFixed(f);break;case"p":T=parseFloat(s[o]).toPrecision(f);break;case"e":T=parseFloat(s[o]).toExponential(f);break;case"x":T=parseInt(s[o]).toString(I||16);break;case"d":T=parseFloat(parseInt(s[o],I||10).toPrecision(f)).toFixed(0)}T="object"==typeof T?JSON.stringify(T):(+T).toString(I);let S=parseInt(g),M=g&&g[0]+""=="0"?"0":" ";for(;T.length<S;)T=void 0!==h?T+M:M+T;return T})}static getBytes(i,s){return Dt.encode(i,s)}static getCharCode(i,s=0){return i.charCodeAt(s)}static getCharAt(i){return String.fromCharCode(i)}}ue.SHIFT_JIS=Y.SJIS.getName(),ue.GB2312="GB2312",ue.ISO88591=Y.ISO8859_1.getName(),ue.EUC_JP="EUC_JP",ue.UTF8=Y.UTF8.getName(),ue.PLATFORM_DEFAULT_ENCODING=ue.UTF8,ue.ASSUME_SHIFT_JIS=!1;class je{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return this.value+="string"==typeof i?i.toString():this.encoding?ue.castAsNonUtf8Char(i,this.encoding):String.fromCharCode(i),this}appendChars(i,s,o){for(let l=s;s<s+o;l++)this.append(i[l]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+1)}substring(i,s){return this.value.substring(i,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,s){this.value=this.value.substr(0,i)+s+this.value.substr(i+s.length)}}class ht{constructor(i,s,o,l){if(this.width=i,this.height=s,this.rowSize=o,this.bits=l,null==s&&(s=i),this.height=s,i<1||s<1)throw new te("Both dimensions must be greater than 0");null==o&&(o=Math.floor((i+31)/32)),this.rowSize=o,null==l&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const s=i.length,o=i[0].length,l=new ht(o,s);for(let u=0;u<s;u++){const f=i[u];for(let h=0;h<o;h++)f[h]&&l.set(h,u)}return l}static parseFromString(i,s,o){if(null===i)throw new te("stringRepresentation cannot be null");const l=new Array(i.length);let u=0,f=0,h=-1,g=0,x=0;for(;x<i.length;)if("\n"===i.charAt(x)||"\r"===i.charAt(x)){if(u>f){if(-1===h)h=u-f;else if(u-f!==h)throw new te("row lengths do not match");f=u,g++}x++}else if(i.substring(x,x+s.length)===s)x+=s.length,l[u]=!0,u++;else{if(i.substring(x,x+o.length)!==o)throw new te("illegal character encountered: "+i.substring(x));x+=o.length,l[u]=!1,u++}if(u>f){if(-1===h)h=u-f;else if(u-f!==h)throw new te("row lengths do not match");g++}const E=new ht(h,g);for(let D=0;D<u;D++)l[D]&&E.set(Math.floor(D%h),Math.floor(D/h));return E}get(i,s){const o=s*this.rowSize+Math.floor(i/32);return 0!=(this.bits[o]>>>(31&i)&1)}set(i,s){const o=s*this.rowSize+Math.floor(i/32);this.bits[o]|=1<<(31&i)&4294967295}unset(i,s){const o=s*this.rowSize+Math.floor(i/32);this.bits[o]&=~(1<<(31&i)&4294967295)}flip(i,s){const o=s*this.rowSize+Math.floor(i/32);this.bits[o]^=1<<(31&i)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new te("input matrix dimensions do not match");const s=new Be(Math.floor(this.width/32)+1),o=this.rowSize,l=this.bits;for(let u=0,f=this.height;u<f;u++){const h=u*o,g=i.getRow(u,s).getBitArray();for(let x=0;x<o;x++)l[h+x]^=g[x]}}clear(){const i=this.bits,s=i.length;for(let o=0;o<s;o++)i[o]=0}setRegion(i,s,o,l){if(s<0||i<0)throw new te("Left and top must be nonnegative");if(l<1||o<1)throw new te("Height and width must be at least 1");const u=i+o,f=s+l;if(f>this.height||u>this.width)throw new te("The region must fit inside the matrix");const h=this.rowSize,g=this.bits;for(let x=s;x<f;x++){const E=x*h;for(let D=i;D<u;D++)g[E+Math.floor(D/32)]|=1<<(31&D)&4294967295}}getRow(i,s){null==s||s.getSize()<this.width?s=new Be(this.width):s.clear();const o=this.rowSize,l=this.bits,u=i*o;for(let f=0;f<o;f++)s.setBulk(32*f,l[u+f]);return s}setRow(i,s){Ge.arraycopy(s.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),s=this.getHeight();let o=new Be(i),l=new Be(i);for(let u=0,f=Math.floor((s+1)/2);u<f;u++)o=this.getRow(u,o),l=this.getRow(s-1-u,l),o.reverse(),l.reverse(),this.setRow(u,l),this.setRow(s-1-u,o)}getEnclosingRectangle(){const s=this.height,o=this.rowSize,l=this.bits;let u=this.width,f=s,h=-1,g=-1;for(let x=0;x<s;x++)for(let E=0;E<o;E++){const D=l[x*o+E];if(0!==D){if(x<f&&(f=x),x>g&&(g=x),32*E<u){let I=0;for(;0==(D<<31-I&4294967295);)I++;32*E+I<u&&(u=32*E+I)}if(32*E+31>h){let I=31;for(;D>>>I==0;)I--;32*E+I>h&&(h=32*E+I)}}}return h<u||g<f?null:Int32Array.from([u,f,h-u+1,g-f+1])}getTopLeftOnBit(){const i=this.rowSize,s=this.bits;let o=0;for(;o<s.length&&0===s[o];)o++;if(o===s.length)return null;const l=o/i;let u=o%i*32;const f=s[o];let h=0;for(;0==(f<<31-h&4294967295);)h++;return u+=h,Int32Array.from([u,l])}getBottomRightOnBit(){const i=this.rowSize,s=this.bits;let o=s.length-1;for(;o>=0&&0===s[o];)o--;if(o<0)return null;const l=Math.floor(o/i);let u=32*Math.floor(o%i);const f=s[o];let h=31;for(;f>>>h==0;)h--;return u+=h,Int32Array.from([u,l])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){return i instanceof ht&&this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&Ct.equals(this.bits,i.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+Ct.hashCode(this.bits),i}toString(i="X ",s="  ",o="\n"){return this.buildToString(i,s,o)}buildToString(i,s,o){let l=new je;for(let u=0,f=this.height;u<f;u++){for(let h=0,g=this.width;h<g;h++)l.append(this.get(h,u)?i:s);l.append(o)}return l.toString()}clone(){return new ht(this.width,this.height,this.rowSize,this.bits.slice())}}let V=(()=>{class w extends Bt{static getNotFoundInstance(){return new w}}return w.kind="NotFoundException",w})();class gt extends _s{constructor(i){super(i),this.luminances=gt.EMPTY,this.buckets=new Int32Array(gt.LUMINANCE_BUCKETS)}getBlackRow(i,s){const o=this.getLuminanceSource(),l=o.getWidth();null==s||s.getSize()<l?s=new Be(l):s.clear(),this.initArrays(l);const u=o.getRow(i,this.luminances),f=this.buckets;for(let g=0;g<l;g++)f[(255&u[g])>>gt.LUMINANCE_SHIFT]++;const h=gt.estimateBlackPoint(f);if(l<3)for(let g=0;g<l;g++)(255&u[g])<h&&s.set(g);else{let g=255&u[0],x=255&u[1];for(let E=1;E<l-1;E++){const D=255&u[E+1];(4*x-g-D)/2<h&&s.set(E),g=x,x=D}}return s}getBlackMatrix(){const i=this.getLuminanceSource(),s=i.getWidth(),o=i.getHeight(),l=new ht(s,o);this.initArrays(s);const u=this.buckets;for(let g=1;g<5;g++){const x=Math.floor(o*g/5),E=i.getRow(x,this.luminances),D=Math.floor(4*s/5);for(let I=Math.floor(s/5);I<D;I++)u[(255&E[I])>>gt.LUMINANCE_SHIFT]++}const f=gt.estimateBlackPoint(u),h=i.getMatrix();for(let g=0;g<o;g++){const x=g*s;for(let E=0;E<s;E++)(255&h[x+E])<f&&l.set(E,g)}return l}createBinarizer(i){return new gt(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const s=this.buckets;for(let o=0;o<gt.LUMINANCE_BUCKETS;o++)s[o]=0}static estimateBlackPoint(i){const s=i.length;let o=0,l=0,u=0;for(let E=0;E<s;E++)i[E]>u&&(l=E,u=i[E]),i[E]>o&&(o=i[E]);let f=0,h=0;for(let E=0;E<s;E++){const D=E-l,I=i[E]*D*D;I>h&&(f=E,h=I)}if(l>f){const E=l;l=f,f=E}if(f-l<=s/16)throw new V;let g=f-1,x=-1;for(let E=f-1;E>l;E--){const D=E-l,I=D*D*(f-E)*(o-i[E]);I>x&&(g=E,x=I)}return g<<gt.LUMINANCE_SHIFT}}gt.LUMINANCE_BITS=5,gt.LUMINANCE_SHIFT=8-gt.LUMINANCE_BITS,gt.LUMINANCE_BUCKETS=1<<gt.LUMINANCE_BITS,gt.EMPTY=Uint8ClampedArray.from([0]);class De extends gt{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const i=this.getLuminanceSource(),s=i.getWidth(),o=i.getHeight();if(s>=De.MINIMUM_DIMENSION&&o>=De.MINIMUM_DIMENSION){const l=i.getMatrix();let u=s>>De.BLOCK_SIZE_POWER;0!=(s&De.BLOCK_SIZE_MASK)&&u++;let f=o>>De.BLOCK_SIZE_POWER;0!=(o&De.BLOCK_SIZE_MASK)&&f++;const h=De.calculateBlackPoints(l,u,f,s,o),g=new ht(s,o);De.calculateThresholdForBlock(l,u,f,s,o,h,g),this.matrix=g}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new De(i)}static calculateThresholdForBlock(i,s,o,l,u,f,h){const g=u-De.BLOCK_SIZE,x=l-De.BLOCK_SIZE;for(let E=0;E<o;E++){let D=E<<De.BLOCK_SIZE_POWER;D>g&&(D=g);const I=De.cap(E,2,o-3);for(let T=0;T<s;T++){let S=T<<De.BLOCK_SIZE_POWER;S>x&&(S=x);const M=De.cap(T,2,s-3);let R=0;for(let U=-2;U<=2;U++){const q=f[I+U];R+=q[M-2]+q[M-1]+q[M]+q[M+1]+q[M+2]}De.thresholdBlock(i,S,D,R/25,l,h)}}}static cap(i,s,o){return i<s?s:i>o?o:i}static thresholdBlock(i,s,o,l,u,f){for(let h=0,g=o*u+s;h<De.BLOCK_SIZE;h++,g+=u)for(let x=0;x<De.BLOCK_SIZE;x++)(255&i[g+x])<=l&&f.set(s+x,o+h)}static calculateBlackPoints(i,s,o,l,u){const f=u-De.BLOCK_SIZE,h=l-De.BLOCK_SIZE,g=new Array(o);for(let x=0;x<o;x++){g[x]=new Int32Array(s);let E=x<<De.BLOCK_SIZE_POWER;E>f&&(E=f);for(let D=0;D<s;D++){let I=D<<De.BLOCK_SIZE_POWER;I>h&&(I=h);let T=0,S=255,M=0;for(let L=0,U=E*l+I;L<De.BLOCK_SIZE;L++,U+=l){for(let q=0;q<De.BLOCK_SIZE;q++){const k=255&i[U+q];T+=k,k<S&&(S=k),k>M&&(M=k)}if(M-S>De.MIN_DYNAMIC_RANGE)for(L++,U+=l;L<De.BLOCK_SIZE;L++,U+=l)for(let q=0;q<De.BLOCK_SIZE;q++)T+=255&i[U+q]}let R=T>>2*De.BLOCK_SIZE_POWER;if(M-S<=De.MIN_DYNAMIC_RANGE&&(R=S/2,x>0&&D>0)){const L=(g[x-1][D]+2*g[x][D-1]+g[x-1][D-1])/4;S<L&&(R=L)}g[x][D]=R}}return g}}De.BLOCK_SIZE_POWER=3,De.BLOCK_SIZE=1<<De.BLOCK_SIZE_POWER,De.BLOCK_SIZE_MASK=De.BLOCK_SIZE-1,De.MINIMUM_DIMENSION=5*De.BLOCK_SIZE,De.MIN_DYNAMIC_RANGE=24;class Ti{constructor(i,s){this.width=i,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,s,o,l){throw new ui("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ui("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ui("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let s=new je;for(let o=0;o<this.height;o++){const l=this.getRow(o,i);for(let u=0;u<this.width;u++){const f=255&l[u];let h;h=f<64?"#":f<128?"+":f<192?".":" ",s.append(h)}s.append("\n")}return s.toString()}}class zn extends Ti{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,s){const o=this.delegate.getRow(i,s),l=this.getWidth();for(let u=0;u<l;u++)o[u]=255-(255&o[u]);return o}getMatrix(){const i=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(s);for(let l=0;l<s;l++)o[l]=255-(255&i[l]);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(i,s,o,l){return new zn(this.delegate.crop(i,s,o,l))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new zn(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new zn(this.delegate.rotateCounterClockwise45())}}class lt extends Ti{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=lt.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const s=i.getContext("2d").getImageData(0,0,i.width,i.height);return lt.toGrayscaleBuffer(s.data,i.width,i.height)}static toGrayscaleBuffer(i,s,o){const l=new Uint8ClampedArray(s*o);for(let u=0,f=0,h=i.length;u<h;u+=4,f++){let g;g=0===i[u+3]?255:306*i[u]+601*i[u+1]+117*i[u+2]+512>>10,l[f]=g}return l}getRow(i,s){if(i<0||i>=this.getHeight())throw new te("Requested row is outside the image: "+i);const o=this.getWidth(),l=i*o;return null===s?s=this.buffer.slice(l,l+o):(s.length<o&&(s=new Uint8ClampedArray(o)),s.set(this.buffer.slice(l,l+o))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,s,o,l){return super.crop(i,s,o,l),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const s=this.getTempCanvasElement(),o=s.getContext("2d"),l=i*lt.DEGREE_TO_RADIANS,u=this.canvas.width,f=this.canvas.height,h=Math.ceil(Math.abs(Math.cos(l))*u+Math.abs(Math.sin(l))*f),g=Math.ceil(Math.abs(Math.sin(l))*u+Math.abs(Math.cos(l))*f);return s.width=h,s.height=g,o.translate(h/2,g/2),o.rotate(l),o.drawImage(this.canvas,u/-2,f/-2),this.buffer=lt.makeBufferFromCanvasImageData(s),this}invert(){return new zn(this)}}lt.DEGREE_TO_RADIANS=Math.PI/180;class bs{constructor(i,s,o){this.deviceId=i,this.label=s,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var jt=(globalThis||global||self||window?(globalThis||global||self||window||void 0).__awaiter:void 0)||function(w,i,s,o){return new(s||(s=Promise))(function(u,f){function h(E){try{x(o.next(E))}catch(D){f(D)}}function g(E){try{x(o.throw(E))}catch(D){f(D)}}function x(E){E.done?u(E.value):function l(u){return u instanceof s?u:new s(function(f){f(u)})}(E.value).then(h,g)}x((o=o.apply(w,i||[])).next())})};class br{constructor(i,s=500,o){this.reader=i,this.timeBetweenScansMillis=s,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!=typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return jt(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const o of i){const l="video"===o.kind?"videoinput":o.kind;"videoinput"===l&&s.push({deviceId:o.deviceId||o.id,label:o.label||`Video device ${s.length+1}`,kind:l,groupId:o.groupId})}return s})}getVideoInputDevices(){return jt(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new bs(s.deviceId,s.label))})}findDeviceById(i){return jt(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(o=>o.deviceId===i):null})}decodeFromInputVideoDevice(i,s){return jt(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,s)})}decodeOnceFromVideoDevice(i,s){return jt(this,void 0,void 0,function*(){let o;this.reset(),o=i?{deviceId:{exact:i}}:{facingMode:"environment"};const l={video:o};return yield this.decodeOnceFromConstraints(l,s)})}decodeOnceFromConstraints(i,s){return jt(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(o,s)})}decodeOnceFromStream(i,s){return jt(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(i,s);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(i,s,o){return jt(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,s,o)})}decodeFromVideoDevice(i,s,o){return jt(this,void 0,void 0,function*(){let l;l=i?{deviceId:{exact:i}}:{facingMode:"environment"};const u={video:l};return yield this.decodeFromConstraints(u,s,o)})}decodeFromConstraints(i,s,o){return jt(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(l,s,o)})}decodeFromStream(i,s,o){return jt(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(i,s);return yield this.decodeContinuously(l,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,s){return jt(this,void 0,void 0,function*(){const o=this.prepareVideoElement(s);return this.addVideoSource(o,i),this.videoElement=o,this.stream=i,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(i){return new Promise((s,o)=>this.playVideoOnLoad(i,()=>s()))}playVideoOnLoad(i,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",s),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return jt(this,void 0,void 0,function*(){if(this.isVideoPlaying(i))console.warn("Trying to play video that is already playing.");else try{yield i.play()}catch(s){console.warn("It was not possible to play the video.")}})}getMediaElement(i,s){const o=document.getElementById(i);if(!o)throw new Jt(`element with id '${i}' not found`);if(o.nodeName.toLowerCase()!==s.toLowerCase())throw new Jt(`element with id '${i}' must be an ${s} element`);return o}decodeFromImage(i,s){if(!i&&!s)throw new Jt("either imageElement with a src set or an url must be provided");return s&&!i?this.decodeFromImageUrl(s):this.decodeFromImageElement(i)}decodeFromVideo(i,s){if(!i&&!s)throw new Jt("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,s,o){if(void 0===i&&void 0===s)throw new Jt("Either an element with a src set or an URL must be provided");return s&&!i?this.decodeFromVideoUrlContinuously(s,o):this.decodeFromVideoElementContinuously(i,o)}decodeFromImageElement(i){if(!i)throw new Jt("An image element must be provided.");this.reset();const s=this.prepareImageElement(i);let o;return this.imageElement=s,o=this.isImageLoaded(s)?this.decodeOnce(s,!1,!0):this._decodeOnLoadImage(s),o}decodeFromVideoElement(i){const s=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(i,s){const o=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(o,s)}_decodeFromVideoElementSetup(i){if(!i)throw new Jt("A video element must be provided.");this.reset();const s=this.prepareVideoElement(i);return this.videoElement=s,s}decodeFromImageUrl(i){if(!i)throw new Jt("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const o=this._decodeOnLoadImage(s);return s.src=i,o}decodeFromVideoUrl(i){if(!i)throw new Jt("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),o=this.decodeFromVideoElement(s);return s.src=i,o}decodeFromVideoUrlContinuously(i,s){if(!i)throw new Jt("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElementContinuously(o,s);return o.src=i,l}_decodeOnLoadImage(i){return new Promise((s,o)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(s,o),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return jt(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,s){return jt(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,s)})}isImageLoaded(i){return!(!i.complete||0===i.naturalWidth)}prepareImageElement(i){let s;return void 0===i&&(s=document.createElement("img"),s.width=200,s.height=200),"string"==typeof i&&(s=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(s=i),s}prepareVideoElement(i){let s;return!i&&"undefined"!=typeof document&&(s=document.createElement("video"),s.width=200,s.height=200),"string"==typeof i&&(s=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(s=i),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(i,s=!0,o=!0){this._stopAsyncDecode=!1;const l=(u,f)=>{if(this._stopAsyncDecode)return f(new V("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{u(this.decode(i))}catch(h){const E=(h instanceof at||h instanceof Z)&&o;if(s&&h instanceof V||E)return setTimeout(l,this._timeBetweenDecodingAttempts,u,f);f(h)}};return new Promise((u,f)=>l(u,f))}decodeContinuously(i,s){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const l=this.decode(i);s(l,null),setTimeout(o,this.timeBetweenScansMillis)}catch(l){s(null,l);const f=l instanceof V;(l instanceof at||l instanceof Z||f)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(i){const s=this.createBinaryBitmap(i);return this.decodeBitmap(s)}createBinaryBitmap(i){const s=this.getCaptureCanvasContext(i);this.drawImageOnCanvas(s,i);const o=this.getCaptureCanvas(i),l=new lt(o),u=new De(l);return new un(u)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const s=this.createCaptureCanvas(i);this.captureCanvas=s}return this.captureCanvas}drawImageOnCanvas(i,s){i.drawImage(s,0,0)}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if("undefined"==typeof document)return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let o,l;return void 0!==i&&(i instanceof HTMLVideoElement?(o=i.videoWidth,l=i.videoHeight):i instanceof HTMLImageElement&&(o=i.naturalWidth||i.width,l=i.naturalHeight||i.height)),s.style.width=o+"px",s.style.height=l+"px",s.width=o,s.height=l,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){!this.videoElement||(void 0!==this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),void 0!==this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),void 0!==this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){!this.imageElement||(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,s){try{i.srcObject=s}catch(o){i.src=URL.createObjectURL(s)}}cleanVideoSource(i){try{i.srcObject=null}catch(s){i.src=""}this.videoElement.removeAttribute("src")}}class Ht{constructor(i,s,o=(null==s?0:8*s.length),l,u,f=Ge.currentTimeMillis()){this.text=i,this.rawBytes=s,this.numBits=o,this.resultPoints=l,this.format=u,this.timestamp=f,this.text=i,this.rawBytes=s,this.numBits=null==o?null==s?0:8*s.length:o,this.resultPoints=l,this.format=u,this.resultMetadata=null,this.timestamp=null==f?Ge.currentTimeMillis():f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,s){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(i,s)}putAllMetadata(i){null!==i&&(this.resultMetadata=null===this.resultMetadata?i:new Map(i))}addResultPoints(i){const s=this.resultPoints;if(null===s)this.resultPoints=i;else if(null!==i&&i.length>0){const o=new Array(s.length+i.length);Ge.arraycopy(s,0,o,0,s.length),Ge.arraycopy(i,0,o,s.length,i.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Yr=(()=>{return(w=Yr||(Yr={}))[w.AZTEC=0]="AZTEC",w[w.CODABAR=1]="CODABAR",w[w.CODE_39=2]="CODE_39",w[w.CODE_93=3]="CODE_93",w[w.CODE_128=4]="CODE_128",w[w.DATA_MATRIX=5]="DATA_MATRIX",w[w.EAN_8=6]="EAN_8",w[w.EAN_13=7]="EAN_13",w[w.ITF=8]="ITF",w[w.MAXICODE=9]="MAXICODE",w[w.PDF_417=10]="PDF_417",w[w.QR_CODE=11]="QR_CODE",w[w.RSS_14=12]="RSS_14",w[w.RSS_EXPANDED=13]="RSS_EXPANDED",w[w.UPC_A=14]="UPC_A",w[w.UPC_E=15]="UPC_E",w[w.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",Yr;var w})(),ae=Yr,bi=(()=>{return(w=bi||(bi={}))[w.OTHER=0]="OTHER",w[w.ORIENTATION=1]="ORIENTATION",w[w.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",w[w.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",w[w.ISSUE_NUMBER=4]="ISSUE_NUMBER",w[w.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",w[w.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",w[w.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",w[w.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",w[w.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",w[w.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",bi;var w})(),st=bi;class sr{constructor(i,s,o,l,u=-1,f=-1){this.rawBytes=i,this.text=s,this.byteSegments=o,this.ecLevel=l,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=f,this.numBits=null==i?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class fi{exp(i){return this.expTable[i]}log(i){if(0===i)throw new te;return this.logTable[i]}static addOrSubtract(i,s){return i^s}}class Zt{constructor(i,s){if(0===s.length)throw new te;this.field=i;const o=s.length;if(o>1&&0===s[0]){let l=1;for(;l<o&&0===s[l];)l++;l===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-l),Ge.arraycopy(s,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(0===i)return this.getCoefficient(0);const s=this.coefficients;let o;if(1===i){o=0;for(let f=0,h=s.length;f!==h;f++)o=fi.addOrSubtract(o,s[f]);return o}o=s[0];const l=s.length,u=this.field;for(let f=1;f<l;f++)o=fi.addOrSubtract(u.multiply(i,o),s[f]);return o}addOrSubtract(i){if(!this.field.equals(i.field))throw new te("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let s=this.coefficients,o=i.coefficients;if(s.length>o.length){const f=s;s=o,o=f}let l=new Int32Array(o.length);const u=o.length-s.length;Ge.arraycopy(o,0,l,0,u);for(let f=u;f<o.length;f++)l[f]=fi.addOrSubtract(s[f-u],o[f]);return new Zt(this.field,l)}multiply(i){if(!this.field.equals(i.field))throw new te("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const s=this.coefficients,o=s.length,l=i.coefficients,u=l.length,f=new Int32Array(o+u-1),h=this.field;for(let g=0;g<o;g++){const x=s[g];for(let E=0;E<u;E++)f[g+E]=fi.addOrSubtract(f[g+E],h.multiply(x,l[E]))}return new Zt(h,f)}multiplyScalar(i){if(0===i)return this.field.getZero();if(1===i)return this;const s=this.coefficients.length,o=this.field,l=new Int32Array(s),u=this.coefficients;for(let f=0;f<s;f++)l[f]=o.multiply(u[f],i);return new Zt(o,l)}multiplyByMonomial(i,s){if(i<0)throw new te;if(0===s)return this.field.getZero();const o=this.coefficients,l=o.length,u=new Int32Array(l+i),f=this.field;for(let h=0;h<l;h++)u[h]=f.multiply(o[h],s);return new Zt(f,u)}divide(i){if(!this.field.equals(i.field))throw new te("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new te("Divide by 0");const s=this.field;let o=s.getZero(),l=this;const u=i.getCoefficient(i.getDegree()),f=s.inverse(u);for(;l.getDegree()>=i.getDegree()&&!l.isZero();){const h=l.getDegree()-i.getDegree(),g=s.multiply(l.getCoefficient(l.getDegree()),f),x=i.multiplyByMonomial(h,g),E=s.buildMonomial(h,g);o=o.addOrSubtract(E),l=l.addOrSubtract(x)}return[o,l]}toString(){let i="";for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);if(0!==o){if(o<0?(i+=" - ",o=-o):i.length>0&&(i+=" + "),0===s||1!==o){const l=this.field.log(o);0===l?i+="1":1===l?i+="a":(i+="a^",i+=l)}0!==s&&(1===s?i+="x":(i+="x^",i+=s))}}return i}}let di=(()=>{class w extends Bt{}return w.kind="ArithmeticException",w})();class Ve extends fi{constructor(i,s,o){super(),this.primitive=i,this.size=s,this.generatorBase=o;const l=new Int32Array(s);let u=1;for(let h=0;h<s;h++)l[h]=u,u*=2,u>=s&&(u^=i,u&=s-1);this.expTable=l;const f=new Int32Array(s);for(let h=0;h<s-1;h++)f[l[h]]=h;this.logTable=f,this.zero=new Zt(this,Int32Array.from([0])),this.one=new Zt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,s){if(i<0)throw new te;if(0===s)return this.zero;const o=new Int32Array(i+1);return o[0]=s,new Zt(this,o)}inverse(i){if(0===i)throw new di;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,s){return 0===i||0===s?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Ce.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Ve.AZTEC_DATA_12=new Ve(4201,4096,1),Ve.AZTEC_DATA_10=new Ve(1033,1024,1),Ve.AZTEC_DATA_6=new Ve(67,64,1),Ve.AZTEC_PARAM=new Ve(19,16,1),Ve.QR_CODE_FIELD_256=new Ve(285,256,0),Ve.DATA_MATRIX_FIELD_256=new Ve(301,256,1),Ve.AZTEC_DATA_8=Ve.DATA_MATRIX_FIELD_256,Ve.MAXICODE_FIELD_64=Ve.AZTEC_DATA_6;let Xr=(()=>{class w extends Bt{}return w.kind="ReedSolomonException",w})(),or=(()=>{class w extends Bt{}return w.kind="IllegalStateException",w})();class Si{constructor(i){this.field=i}decode(i,s){const o=this.field,l=new Zt(o,i),u=new Int32Array(s);let f=!0;for(let T=0;T<s;T++){const S=l.evaluateAt(o.exp(T+o.getGeneratorBase()));u[u.length-1-T]=S,0!==S&&(f=!1)}if(f)return;const h=new Zt(o,u),g=this.runEuclideanAlgorithm(o.buildMonomial(s,1),h,s),E=g[1],D=this.findErrorLocations(g[0]),I=this.findErrorMagnitudes(E,D);for(let T=0;T<D.length;T++){const S=i.length-1-o.log(D[T]);if(S<0)throw new Xr("Bad error location");i[S]=Ve.addOrSubtract(i[S],I[T])}}runEuclideanAlgorithm(i,s,o){if(i.getDegree()<s.getDegree()){const T=i;i=s,s=T}const l=this.field;let u=i,f=s,h=l.getZero(),g=l.getOne();for(;f.getDegree()>=(o/2|0);){let T=u,S=h;if(u=f,h=g,u.isZero())throw new Xr("r_{i-1} was zero");f=T;let M=l.getZero();const R=u.getCoefficient(u.getDegree()),L=l.inverse(R);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){const U=f.getDegree()-u.getDegree(),q=l.multiply(f.getCoefficient(f.getDegree()),L);M=M.addOrSubtract(l.buildMonomial(U,q)),f=f.addOrSubtract(u.multiplyByMonomial(U,q))}if(g=M.multiply(h).addOrSubtract(S),f.getDegree()>=u.getDegree())throw new or("Division algorithm failed to reduce polynomial?")}const x=g.getCoefficient(0);if(0===x)throw new Xr("sigmaTilde(0) was zero");const E=l.inverse(x);return[g.multiplyScalar(E),f.multiplyScalar(E)]}findErrorLocations(i){const s=i.getDegree();if(1===s)return Int32Array.from([i.getCoefficient(1)]);const o=new Int32Array(s);let l=0;const u=this.field;for(let f=1;f<u.getSize()&&l<s;f++)0===i.evaluateAt(f)&&(o[l]=u.inverse(f),l++);if(l!==s)throw new Xr("Error locator degree does not match number of roots");return o}findErrorMagnitudes(i,s){const o=s.length,l=new Int32Array(o),u=this.field;for(let f=0;f<o;f++){const h=u.inverse(s[f]);let g=1;for(let x=0;x<o;x++)if(f!==x){const E=u.multiply(s[x],h);g=u.multiply(g,0==(1&E)?1|E:-2&E)}l[f]=u.multiply(i.evaluateAt(h),u.inverse(g)),0!==u.getGeneratorBase()&&(l[f]=u.multiply(l[f],h))}return l}}var Mt=(()=>{return(w=Mt||(Mt={}))[w.UPPER=0]="UPPER",w[w.LOWER=1]="LOWER",w[w.MIXED=2]="MIXED",w[w.DIGIT=3]="DIGIT",w[w.PUNCT=4]="PUNCT",w[w.BINARY=5]="BINARY",Mt;var w})();let Vo=(()=>{class w{decode(s){this.ddata=s;let o=s.getBits(),l=this.extractBits(o),u=this.correctBits(l),f=w.convertBoolArrayToByteArray(u),h=w.getEncodedData(u),g=new sr(f,h,null,null);return g.setNumBits(u.length),g}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let o=s.length,l=Mt.UPPER,u=Mt.UPPER,f="",h=0;for(;h<o;)if(u===Mt.BINARY){if(o-h<5)break;let g=w.readCode(s,h,5);if(h+=5,0===g){if(o-h<11)break;g=w.readCode(s,h,11)+31,h+=11}for(let x=0;x<g;x++){if(o-h<8){h=o;break}const E=w.readCode(s,h,8);f+=ue.castAsNonUtf8Char(E),h+=8}u=l}else{let g=u===Mt.DIGIT?4:5;if(o-h<g)break;let x=w.readCode(s,h,g);h+=g;let E=w.getCharacter(u,x);E.startsWith("CTRL_")?(l=u,u=w.getTable(E.charAt(5)),"L"===E.charAt(6)&&(l=u)):(f+=E,u=l)}return f}static getTable(s){switch(s){case"L":return Mt.LOWER;case"P":return Mt.PUNCT;case"M":return Mt.MIXED;case"D":return Mt.DIGIT;case"B":return Mt.BINARY;default:return Mt.UPPER}}static getCharacter(s,o){switch(s){case Mt.UPPER:return w.UPPER_TABLE[o];case Mt.LOWER:return w.LOWER_TABLE[o];case Mt.MIXED:return w.MIXED_TABLE[o];case Mt.PUNCT:return w.PUNCT_TABLE[o];case Mt.DIGIT:return w.DIGIT_TABLE[o];default:throw new or("Bad table")}}correctBits(s){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=Ve.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=Ve.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=Ve.AZTEC_DATA_10):(l=12,o=Ve.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),f=s.length/l;if(f<u)throw new Z;let h=s.length%l,g=new Int32Array(f);for(let T=0;T<f;T++,h+=l)g[T]=w.readCode(s,h,l);try{new Si(o).decode(g,f-u)}catch(T){throw new Z(T)}let x=(1<<l)-1,E=0;for(let T=0;T<u;T++){let S=g[T];if(0===S||S===x)throw new Z;(1===S||S===x-1)&&E++}let D=new Array(u*l-E),I=0;for(let T=0;T<u;T++){let S=g[T];if(1===S||S===x-1)D.fill(S>1,I,I+l-1),I+=l-1;else for(let M=l-1;M>=0;--M)D[I++]=0!=(S&1<<M)}return D}extractBits(s){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(o?11:14)+4*l,f=new Int32Array(u),h=new Array(this.totalBitsInLayer(l,o));if(o)for(let g=0;g<f.length;g++)f[g]=g;else{let g=u+1+2*Ce.truncDivision(Ce.truncDivision(u,2)-1,15),x=u/2,E=Ce.truncDivision(g,2);for(let D=0;D<x;D++){let I=D+Ce.truncDivision(D,15);f[x-D-1]=E-I-1,f[x+D]=E+I+1}}for(let g=0,x=0;g<l;g++){let E=4*(l-g)+(o?9:12),D=2*g,I=u-1-D;for(let T=0;T<E;T++){let S=2*T;for(let M=0;M<2;M++)h[x+S+M]=s.get(f[D+M],f[D+T]),h[x+2*E+S+M]=s.get(f[D+T],f[I-M]),h[x+4*E+S+M]=s.get(f[I-M],f[I-T]),h[x+6*E+S+M]=s.get(f[I-T],f[D+M])}x+=8*E}return h}static readCode(s,o,l){let u=0;for(let f=o;f<o+l;f++)u<<=1,s[f]&&(u|=1);return u}static readByte(s,o){let l=s.length-o;return l>=8?w.readCode(s,o,8):w.readCode(s,o,l)<<8-l}static convertBoolArrayToByteArray(s){let o=new Uint8Array((s.length+7)/8);for(let l=0;l<o.length;l++)o[l]=w.readByte(s,8*l);return o}totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}return w.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],w.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],w.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],w.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],w.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],w})();class Re{constructor(){}static round(i){return NaN===i?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,s,o,l){const u=i-o,f=s-l;return Math.sqrt(u*u+f*f)}static sum(i){let s=0;for(let o=0,l=i.length;o!==l;o++)s+=i[o];return s}}class Ss{static floatToIntBits(i){return i}}Ss.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ee{constructor(i,s){this.x=i,this.y=s}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof ee){const s=i;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Ss.floatToIntBits(this.x)+Ss.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const s=this.distance(i[0],i[1]),o=this.distance(i[1],i[2]),l=this.distance(i[0],i[2]);let u,f,h;if(o>=s&&o>=l?(f=i[0],u=i[1],h=i[2]):l>=o&&l>=s?(f=i[1],u=i[0],h=i[2]):(f=i[2],u=i[0],h=i[1]),this.crossProductZ(u,f,h)<0){const g=u;u=h,h=g}i[0]=u,i[1]=f,i[2]=h}static distance(i,s){return Re.distance(i.x,i.y,s.x,s.y)}static crossProductZ(i,s,o){const l=s.x,u=s.y;return(o.x-l)*(i.y-u)-(o.y-u)*(i.x-l)}}class vs{constructor(i,s){this.bits=i,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Ms extends vs{constructor(i,s,o,l,u){super(i,s),this.compact=o,this.nbDatablocks=l,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}let vi=(()=>{class w{constructor(s,o,l,u){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),null==o&&(o=w.INIT_SIZE),null==l&&(l=s.getWidth()/2|0),null==u&&(u=s.getHeight()/2|0);const f=o/2|0;if(this.leftInit=l-f,this.rightInit=l+f,this.upInit=u-f,this.downInit=u+f,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let s=this.leftInit,o=this.rightInit,l=this.upInit,u=this.downInit,f=!1,h=!0,g=!1,x=!1,E=!1,D=!1,I=!1;const T=this.width,S=this.height;for(;h;){h=!1;let M=!0;for(;(M||!x)&&o<T;)M=this.containsBlackPoint(l,u,o,!1),M?(o++,h=!0,x=!0):x||o++;if(o>=T){f=!0;break}let R=!0;for(;(R||!E)&&u<S;)R=this.containsBlackPoint(s,o,u,!0),R?(u++,h=!0,E=!0):E||u++;if(u>=S){f=!0;break}let L=!0;for(;(L||!D)&&s>=0;)L=this.containsBlackPoint(l,u,s,!1),L?(s--,h=!0,D=!0):D||s--;if(s<0){f=!0;break}let U=!0;for(;(U||!I)&&l>=0;)U=this.containsBlackPoint(s,o,l,!0),U?(l--,h=!0,I=!0):I||l--;if(l<0){f=!0;break}h&&(g=!0)}if(!f&&g){const M=o-s;let R=null;for(let k=1;null===R&&k<M;k++)R=this.getBlackPointOnSegment(s,u-k,s+k,u);if(null==R)throw new V;let L=null;for(let k=1;null===L&&k<M;k++)L=this.getBlackPointOnSegment(s,l+k,s+k,l);if(null==L)throw new V;let U=null;for(let k=1;null===U&&k<M;k++)U=this.getBlackPointOnSegment(o,l+k,o-k,l);if(null==U)throw new V;let q=null;for(let k=1;null===q&&k<M;k++)q=this.getBlackPointOnSegment(o,u-k,o-k,u);if(null==q)throw new V;return this.centerEdges(q,R,U,L)}throw new V}getBlackPointOnSegment(s,o,l,u){const f=Re.round(Re.distance(s,o,l,u)),h=(l-s)/f,g=(u-o)/f,x=this.image;for(let E=0;E<f;E++){const D=Re.round(s+E*h),I=Re.round(o+E*g);if(x.get(D,I))return new ee(D,I)}return null}centerEdges(s,o,l,u){const f=s.getX(),h=s.getY(),g=o.getX(),x=o.getY(),E=l.getX(),D=l.getY(),I=u.getX(),T=u.getY(),S=w.CORR;return f<this.width/2?[new ee(I-S,T+S),new ee(g+S,x+S),new ee(E-S,D-S),new ee(f+S,h-S)]:[new ee(I+S,T+S),new ee(g+S,x-S),new ee(E-S,D+S),new ee(f-S,h-S)]}containsBlackPoint(s,o,l,u){const f=this.image;if(u){for(let h=s;h<=o;h++)if(f.get(h,l))return!0}else for(let h=s;h<=o;h++)if(f.get(l,h))return!0;return!1}}return w.INIT_SIZE=10,w.CORR=1,w})();class Uo{static checkAndNudgePoints(i,s){const o=i.getWidth(),l=i.getHeight();let u=!0;for(let f=0;f<s.length&&u;f+=2){const h=Math.floor(s[f]),g=Math.floor(s[f+1]);if(h<-1||h>o||g<-1||g>l)throw new V;u=!1,-1===h?(s[f]=0,u=!0):h===o&&(s[f]=o-1,u=!0),-1===g?(s[f+1]=0,u=!0):g===l&&(s[f+1]=l-1,u=!0)}u=!0;for(let f=s.length-2;f>=0&&u;f-=2){const h=Math.floor(s[f]),g=Math.floor(s[f+1]);if(h<-1||h>o||g<-1||g>l)throw new V;u=!1,-1===h?(s[f]=0,u=!0):h===o&&(s[f]=o-1,u=!0),-1===g?(s[f+1]=0,u=!0):g===l&&(s[f+1]=l-1,u=!0)}}}class Mn{constructor(i,s,o,l,u,f,h,g,x){this.a11=i,this.a21=s,this.a31=o,this.a12=l,this.a22=u,this.a32=f,this.a13=h,this.a23=g,this.a33=x}static quadrilateralToQuadrilateral(i,s,o,l,u,f,h,g,x,E,D,I,T,S,M,R){const L=Mn.quadrilateralToSquare(i,s,o,l,u,f,h,g);return Mn.squareToQuadrilateral(x,E,D,I,T,S,M,R).times(L)}transformPoints(i){const s=i.length,o=this.a11,l=this.a12,u=this.a13,f=this.a21,h=this.a22,g=this.a23,x=this.a31,E=this.a32,D=this.a33;for(let I=0;I<s;I+=2){const T=i[I],S=i[I+1],M=u*T+g*S+D;i[I]=(o*T+f*S+x)/M,i[I+1]=(l*T+h*S+E)/M}}transformPointsWithValues(i,s){const o=this.a11,l=this.a12,u=this.a13,f=this.a21,h=this.a22,g=this.a23,x=this.a31,E=this.a32,D=this.a33,I=i.length;for(let T=0;T<I;T++){const S=i[T],M=s[T],R=u*S+g*M+D;i[T]=(o*S+f*M+x)/R,s[T]=(l*S+h*M+E)/R}}static squareToQuadrilateral(i,s,o,l,u,f,h,g){const x=i-o+u-h,E=s-l+f-g;if(0===x&&0===E)return new Mn(o-i,u-o,i,l-s,f-l,s,0,0,1);{const D=o-u,I=h-u,T=l-f,S=g-f,M=D*S-I*T,R=(x*S-I*E)/M,L=(D*E-x*T)/M;return new Mn(o-i+R*o,h-i+L*h,i,l-s+R*l,g-s+L*g,s,R,L,1)}}static quadrilateralToSquare(i,s,o,l,u,f,h,g){return Mn.squareToQuadrilateral(i,s,o,l,u,f,h,g).buildAdjoint()}buildAdjoint(){return new Mn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new Mn(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class pl extends Uo{sampleGrid(i,s,o,l,u,f,h,g,x,E,D,I,T,S,M,R,L,U,q){const k=Mn.quadrilateralToQuadrilateral(l,u,f,h,g,x,E,D,I,T,S,M,R,L,U,q);return this.sampleGridWithTransform(i,s,o,k)}sampleGridWithTransform(i,s,o,l){if(s<=0||o<=0)throw new V;const u=new ht(s,o),f=new Float32Array(2*s);for(let h=0;h<o;h++){const g=f.length,x=h+.5;for(let E=0;E<g;E+=2)f[E]=E/2+.5,f[E+1]=x;l.transformPoints(f),Uo.checkAndNudgePoints(i,f);try{for(let E=0;E<g;E+=2)i.get(Math.floor(f[E]),Math.floor(f[E+1]))&&u.set(E/2,h)}catch(E){throw new V}}return u}}class Qt{static setGridSampler(i){Qt.gridSampler=i}static getInstance(){return Qt.gridSampler}}Qt.gridSampler=new pl;class Gt{constructor(i,s){this.x=i,this.y=s}toResultPoint(){return new ee(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ml{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let s=this.getMatrixCenter(),o=this.getBullsEyeCorners(s);if(i){let f=o[0];o[0]=o[2],o[2]=f}this.extractParameters(o);let l=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),u=this.getMatrixCornerPoints(o);return new Ms(l,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!(this.isValidPoint(i[0])&&this.isValidPoint(i[1])&&this.isValidPoint(i[2])&&this.isValidPoint(i[3])))throw new V;let s=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(i[0],i[1],s),this.sampleLine(i[1],i[2],s),this.sampleLine(i[2],i[3],s),this.sampleLine(i[3],i[0],s)]);this.shift=this.getRotation(o,s);let l=0;for(let f=0;f<4;f++){let h=o[(this.shift+f)%4];this.compact?(l<<=7,l+=h>>1&127):(l<<=10,l+=(h>>2&992)+(h>>1&31))}let u=this.getCorrectedParameterData(l,this.compact);this.compact?(this.nbLayers=1+(u>>6),this.nbDataBlocks=1+(63&u)):(this.nbLayers=1+(u>>11),this.nbDataBlocks=1+(2047&u))}getRotation(i,s){let o=0;i.forEach((l,u,f)=>{o=(l>>s-2<<1)+(1&l)+(o<<3)}),o=((1&o)<<11)+(o>>1);for(let l=0;l<4;l++)if(Ce.bitCount(o^this.EXPECTED_CORNER_BITS[l])<=2)return l;throw new V}getCorrectedParameterData(i,s){let o,l;s?(o=7,l=2):(o=10,l=4);let u=o-l,f=new Int32Array(o);for(let g=o-1;g>=0;--g)f[g]=15&i,i>>=4;try{new Si(Ve.AZTEC_PARAM).decode(f,u)}catch(g){throw new V}let h=0;for(let g=0;g<l;g++)h=(h<<4)+f[g];return h}getBullsEyeCorners(i){let s=i,o=i,l=i,u=i,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let D=this.getFirstDifferent(s,f,1,-1),I=this.getFirstDifferent(o,f,1,1),T=this.getFirstDifferent(l,f,-1,1),S=this.getFirstDifferent(u,f,-1,-1);if(this.nbCenterLayers>2){let M=this.distancePoint(S,D)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(M<.75||M>1.25||!this.isWhiteOrBlackRectangle(D,I,T,S))break}s=D,o=I,l=T,u=S,f=!f}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new V;this.compact=5===this.nbCenterLayers;let h=new ee(s.getX()+.5,s.getY()-.5),g=new ee(o.getX()+.5,o.getY()+.5),x=new ee(l.getX()-.5,l.getY()+.5),E=new ee(u.getX()-.5,u.getY()-.5);return this.expandSquare([h,g,x,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,s,o,l;try{let h=new vi(this.image).detect();i=h[0],s=h[1],o=h[2],l=h[3]}catch(h){let g=this.image.getWidth()/2,x=this.image.getHeight()/2;i=this.getFirstDifferent(new Gt(g+7,x-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Gt(g+7,x+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Gt(g-7,x+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new Gt(g-7,x-7),!1,-1,-1).toResultPoint()}let u=Re.round((i.getX()+l.getX()+s.getX()+o.getX())/4),f=Re.round((i.getY()+l.getY()+s.getY()+o.getY())/4);try{let h=new vi(this.image,15,u,f).detect();i=h[0],s=h[1],o=h[2],l=h[3]}catch(h){i=this.getFirstDifferent(new Gt(u+7,f-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Gt(u+7,f+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new Gt(u-7,f+7),!1,-1,1).toResultPoint(),l=this.getFirstDifferent(new Gt(u-7,f-7),!1,-1,-1).toResultPoint()}return u=Re.round((i.getX()+l.getX()+s.getX()+o.getX())/4),f=Re.round((i.getY()+l.getY()+s.getY()+o.getY())/4),new Gt(u,f)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,s,o,l,u){let f=Qt.getInstance(),h=this.getDimension(),g=h/2-this.nbCenterLayers,x=h/2+this.nbCenterLayers;return f.sampleGrid(i,h,h,g,g,x,g,x,x,g,x,s.getX(),s.getY(),o.getX(),o.getY(),l.getX(),l.getY(),u.getX(),u.getY())}sampleLine(i,s,o){let l=0,u=this.distanceResultPoint(i,s),f=u/o,h=i.getX(),g=i.getY(),x=f*(s.getX()-i.getX())/u,E=f*(s.getY()-i.getY())/u;for(let D=0;D<o;D++)this.image.get(Re.round(h+D*x),Re.round(g+D*E))&&(l|=1<<o-D-1);return l}isWhiteOrBlackRectangle(i,s,o,l){i=new Gt(i.getX()-3,i.getY()+3),s=new Gt(s.getX()-3,s.getY()-3),o=new Gt(o.getX()+3,o.getY()-3),l=new Gt(l.getX()+3,l.getY()+3);let f=this.getColor(l,i);if(0===f)return!1;let h=this.getColor(i,s);return h===f&&(h=this.getColor(s,o),h===f)&&(h=this.getColor(o,l),h===f)}getColor(i,s){let o=this.distancePoint(i,s),l=(s.getX()-i.getX())/o,u=(s.getY()-i.getY())/o,f=0,h=i.getX(),g=i.getY(),x=this.image.get(i.getX(),i.getY()),E=Math.ceil(o);for(let I=0;I<E;I++)h+=l,g+=u,this.image.get(Re.round(h),Re.round(g))!==x&&f++;let D=f/o;return D>.1&&D<.9?0:D<=.1===x?1:-1}getFirstDifferent(i,s,o,l){let u=i.getX()+o,f=i.getY()+l;for(;this.isValid(u,f)&&this.image.get(u,f)===s;)u+=o,f+=l;for(u-=o,f-=l;this.isValid(u,f)&&this.image.get(u,f)===s;)u+=o;for(u-=o;this.isValid(u,f)&&this.image.get(u,f)===s;)f+=l;return f-=l,new Gt(u,f)}expandSquare(i,s,o){let l=o/(2*s),u=i[0].getX()-i[2].getX(),f=i[0].getY()-i[2].getY(),h=(i[0].getX()+i[2].getX())/2,g=(i[0].getY()+i[2].getY())/2,x=new ee(h+l*u,g+l*f),E=new ee(h-l*u,g-l*f);return u=i[1].getX()-i[3].getX(),f=i[1].getY()-i[3].getY(),h=(i[1].getX()+i[3].getX())/2,g=(i[1].getY()+i[3].getY())/2,[x,new ee(h+l*u,g+l*f),E,new ee(h-l*u,g-l*f)]}isValid(i,s){return i>=0&&i<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(i){let s=Re.round(i.getX()),o=Re.round(i.getY());return this.isValid(s,o)}distancePoint(i,s){return Re.distance(i.getX(),i.getY(),s.getX(),s.getY())}distanceResultPoint(i,s){return Re.distance(i.getX(),i.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Ce.truncDivision(this.nbLayers-4,8)+1)+15}}class Mi{decode(i,s=null){let o=null,l=new ml(i.getBlackMatrix()),u=null,f=null;try{let E=l.detectMirror(!1);u=E.getPoints(),this.reportFoundResultPoints(s,u),f=(new Vo).decode(E)}catch(E){o=E}if(null==f)try{let E=l.detectMirror(!0);u=E.getPoints(),this.reportFoundResultPoints(s,u),f=(new Vo).decode(E)}catch(E){throw null!=o?o:E}let h=new Ht(f.getText(),f.getRawBytes(),f.getNumBits(),u,ae.AZTEC,Ge.currentTimeMillis()),g=f.getByteSegments();null!=g&&h.putMetadata(st.BYTE_SEGMENTS,g);let x=f.getECLevel();return null!=x&&h.putMetadata(st.ERROR_CORRECTION_LEVEL,x),h}reportFoundResultPoints(i,s){if(null!=i){let o=i.get(et.NEED_RESULT_POINT_CALLBACK);null!=o&&s.forEach((l,u,f)=>{o.foundPossibleResultPoint(l)})}}reset(){}}class pt{decode(i,s){try{return this.doDecode(i,s)}catch(o){if(s&&!0===s.get(et.TRY_HARDER)&&i.isRotateSupported()){const u=i.rotateCounterClockwise(),f=this.doDecode(u,s),h=f.getResultMetadata();let g=270;null!==h&&!0===h.get(st.ORIENTATION)&&(g+=h.get(st.ORIENTATION)%360),f.putMetadata(st.ORIENTATION,g);const x=f.getResultPoints();if(null!==x){const E=u.getHeight();for(let D=0;D<x.length;D++)x[D]=new ee(E-x[D].getY()-1,x[D].getX())}return f}throw new V}}reset(){}doDecode(i,s){const o=i.getWidth(),l=i.getHeight();let u=new Be(o);const f=s&&!0===s.get(et.TRY_HARDER),h=Math.max(1,l>>(f?8:5));let g;g=f?l:15;const x=Math.trunc(l/2);for(let E=0;E<g;E++){const D=Math.trunc((E+1)/2),T=x+h*(0==(1&E)?D:-D);if(T<0||T>=l)break;try{u=i.getBlackRow(T,u)}catch(S){continue}for(let S=0;S<2;S++){if(1===S&&(u.reverse(),s&&!0===s.get(et.NEED_RESULT_POINT_CALLBACK))){const M=new Map;s.forEach((R,L)=>M.set(L,R)),M.delete(et.NEED_RESULT_POINT_CALLBACK),s=M}try{const M=this.decodeRow(T,u,s);if(1===S){M.putMetadata(st.ORIENTATION,180);const R=M.getResultPoints();null!==R&&(R[0]=new ee(o-R[0].getX()-1,R[0].getY()),R[1]=new ee(o-R[1].getX()-1,R[1].getY()))}return M}catch(M){}}}throw new V}static recordPattern(i,s,o){const l=o.length;for(let x=0;x<l;x++)o[x]=0;const u=i.getSize();if(s>=u)throw new V;let f=!i.get(s),h=0,g=s;for(;g<u;){if(i.get(g)!==f)o[h]++;else{if(++h===l)break;o[h]=1,f=!f}g++}if(h!==l&&(h!==l-1||g!==u))throw new V}static recordPatternInReverse(i,s,o){let l=o.length,u=i.get(s);for(;s>0&&l>=0;)i.get(--s)!==u&&(l--,u=!u);if(l>=0)throw new V;pt.recordPattern(i,s+1,o)}static patternMatchVariance(i,s,o){const l=i.length;let u=0,f=0;for(let x=0;x<l;x++)u+=i[x],f+=s[x];if(u<f)return Number.POSITIVE_INFINITY;const h=u/f;o*=h;let g=0;for(let x=0;x<l;x++){const E=i[x],D=s[x]*h,I=E>D?E-D:D-E;if(I>o)return Number.POSITIVE_INFINITY;g+=I}return g/u}}class Q extends pt{static findStartPattern(i){const s=i.getSize(),o=i.getNextSet(0);let l=0,u=Int32Array.from([0,0,0,0,0,0]),f=o,h=!1;for(let x=o;x<s;x++)if(i.get(x)!==h)u[l]++;else{if(5===l){let E=Q.MAX_AVG_VARIANCE,D=-1;for(let I=Q.CODE_START_A;I<=Q.CODE_START_C;I++){const T=pt.patternMatchVariance(u,Q.CODE_PATTERNS[I],Q.MAX_INDIVIDUAL_VARIANCE);T<E&&(E=T,D=I)}if(D>=0&&i.isRange(Math.max(0,f-(x-f)/2),f,!1))return Int32Array.from([f,x,D]);f+=u[0]+u[1],u=u.slice(2,u.length-1),u[l-1]=0,u[l]=0,l--}else l++;u[l]=1,h=!h}throw new V}static decodeCode(i,s,o){pt.recordPattern(i,o,s);let l=Q.MAX_AVG_VARIANCE,u=-1;for(let f=0;f<Q.CODE_PATTERNS.length;f++){const g=this.patternMatchVariance(s,Q.CODE_PATTERNS[f],Q.MAX_INDIVIDUAL_VARIANCE);g<l&&(l=g,u=f)}if(u>=0)return u;throw new V}decodeRow(i,s,o){const l=o&&!0===o.get(et.ASSUME_GS1),u=Q.findStartPattern(s),f=u[2];let h=0;const g=new Uint8Array(20);let x;switch(g[h++]=f,f){case Q.CODE_START_A:x=Q.CODE_CODE_A;break;case Q.CODE_START_B:x=Q.CODE_CODE_B;break;case Q.CODE_START_C:x=Q.CODE_CODE_C;break;default:throw new Z}let E=!1,D=!1,I="",T=u[0],S=u[1];const M=Int32Array.from([0,0,0,0,0,0]);let R=0,L=0,U=f,q=0,k=!0,be=!1,we=!1;for(;!E;){const Ei=D;switch(D=!1,R=L,L=Q.decodeCode(s,M,S),g[h++]=L,L!==Q.CODE_STOP&&(k=!0),L!==Q.CODE_STOP&&(q++,U+=q*L),T=S,S+=M.reduce((Bf,kf)=>Bf+kf,0),L){case Q.CODE_START_A:case Q.CODE_START_B:case Q.CODE_START_C:throw new Z}switch(x){case Q.CODE_CODE_A:if(L<64)I+=String.fromCharCode(we===be?" ".charCodeAt(0)+L:" ".charCodeAt(0)+L+128),we=!1;else if(L<96)I+=String.fromCharCode(we===be?L-64:L+64),we=!1;else switch(L!==Q.CODE_STOP&&(k=!1),L){case Q.CODE_FNC_1:l&&(I+=0===I.length?"]C1":String.fromCharCode(29));break;case Q.CODE_FNC_2:case Q.CODE_FNC_3:break;case Q.CODE_FNC_4_A:!be&&we?(be=!0,we=!1):be&&we?(be=!1,we=!1):we=!0;break;case Q.CODE_SHIFT:D=!0,x=Q.CODE_CODE_B;break;case Q.CODE_CODE_B:x=Q.CODE_CODE_B;break;case Q.CODE_CODE_C:x=Q.CODE_CODE_C;break;case Q.CODE_STOP:E=!0}break;case Q.CODE_CODE_B:if(L<96)I+=String.fromCharCode(we===be?" ".charCodeAt(0)+L:" ".charCodeAt(0)+L+128),we=!1;else switch(L!==Q.CODE_STOP&&(k=!1),L){case Q.CODE_FNC_1:l&&(I+=0===I.length?"]C1":String.fromCharCode(29));break;case Q.CODE_FNC_2:case Q.CODE_FNC_3:break;case Q.CODE_FNC_4_B:!be&&we?(be=!0,we=!1):be&&we?(be=!1,we=!1):we=!0;break;case Q.CODE_SHIFT:D=!0,x=Q.CODE_CODE_A;break;case Q.CODE_CODE_A:x=Q.CODE_CODE_A;break;case Q.CODE_CODE_C:x=Q.CODE_CODE_C;break;case Q.CODE_STOP:E=!0}break;case Q.CODE_CODE_C:if(L<100)L<10&&(I+="0"),I+=L;else switch(L!==Q.CODE_STOP&&(k=!1),L){case Q.CODE_FNC_1:l&&(I+=0===I.length?"]C1":String.fromCharCode(29));break;case Q.CODE_CODE_A:x=Q.CODE_CODE_A;break;case Q.CODE_CODE_B:x=Q.CODE_CODE_B;break;case Q.CODE_STOP:E=!0}}Ei&&(x=x===Q.CODE_CODE_A?Q.CODE_CODE_B:Q.CODE_CODE_A)}const nn=S-T;if(S=s.getNextUnset(S),!s.isRange(S,Math.min(s.getSize(),S+(S-T)/2),!1))throw new V;if(U-=q*R,U%103!==R)throw new at;const Pn=I.length;if(0===Pn)throw new V;Pn>0&&k&&(I=I.substring(0,x===Q.CODE_CODE_C?Pn-2:Pn-1));const rn=(u[1]+u[0])/2,Ze=T+nn/2,Ut=g.length,wn=new Uint8Array(Ut);for(let Ei=0;Ei<Ut;Ei++)wn[Ei]=g[Ei];const yi=[new ee(rn,i),new ee(Ze,i)];return new Ht(I,wn,0,yi,ae.CODE_128,(new Date).getTime())}}Q.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Q.MAX_AVG_VARIANCE=.25,Q.MAX_INDIVIDUAL_VARIANCE=.7,Q.CODE_SHIFT=98,Q.CODE_CODE_C=99,Q.CODE_CODE_B=100,Q.CODE_CODE_A=101,Q.CODE_FNC_1=102,Q.CODE_FNC_2=97,Q.CODE_FNC_3=96,Q.CODE_FNC_4_A=101,Q.CODE_FNC_4_B=100,Q.CODE_START_A=103,Q.CODE_START_B=104,Q.CODE_START_C=105,Q.CODE_STOP=106;let jo=(()=>{class w extends pt{constructor(s=!1,o=!1){super(),this.usingCheckDigit=s,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,o,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let x,E,f=w.findAsteriskPattern(o,u),h=o.getNextSet(f[1]),g=o.getSize();do{w.recordPattern(o,h,u);let R=w.toNarrowWidePattern(u);if(R<0)throw new V;x=w.patternToChar(R),this.decodeRowResult+=x,E=h;for(let L of u)h+=L;h=o.getNextSet(h)}while("*"!==x);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let T,D=0;for(let R of u)D+=R;if(h!==g&&2*(h-E-D)<D)throw new V;if(this.usingCheckDigit){let R=this.decodeRowResult.length-1,L=0;for(let U=0;U<R;U++)L+=w.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(U));if(this.decodeRowResult.charAt(R)!==w.ALPHABET_STRING.charAt(L%43))throw new at;this.decodeRowResult=this.decodeRowResult.substring(0,R)}if(0===this.decodeRowResult.length)throw new V;T=this.extendedMode?w.decodeExtended(this.decodeRowResult):this.decodeRowResult;let M=E+D/2;return new Ht(T,null,0,[new ee((f[1]+f[0])/2,s),new ee(M,s)],ae.CODE_39,(new Date).getTime())}static findAsteriskPattern(s,o){let l=s.getSize(),u=s.getNextSet(0),f=0,h=u,g=!1,x=o.length;for(let E=u;E<l;E++)if(s.get(E)!==g)o[f]++;else{if(f===x-1){if(this.toNarrowWidePattern(o)===w.ASTERISK_ENCODING&&s.isRange(Math.max(0,h-Math.floor((E-h)/2)),h,!1))return[h,E];h+=o[0]+o[1],o.copyWithin(0,2,2+f-1),o[f-1]=0,o[f]=0,f--}else f++;o[f]=1,g=!g}throw new V}static toNarrowWidePattern(s){let u,o=s.length,l=0;do{let f=2147483647;for(let x of s)x<f&&x>l&&(f=x);l=f,u=0;let h=0,g=0;for(let x=0;x<o;x++){let E=s[x];E>l&&(g|=1<<o-1-x,u++,h+=E)}if(3===u){for(let x=0;x<o&&u>0;x++){let E=s[x];if(E>l&&(u--,2*E>=h))return-1}return g}}while(u>3);return-1}static patternToChar(s){for(let o=0;o<w.CHARACTER_ENCODINGS.length;o++)if(w.CHARACTER_ENCODINGS[o]===s)return w.ALPHABET_STRING.charAt(o);if(s===w.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(s){let o=s.length,l="";for(let u=0;u<o;u++){let f=s.charAt(u);if("+"===f||"$"===f||"%"===f||"/"===f){let h=s.charAt(u+1),g="\0";switch(f){case"+":if(!(h>="A"&&h<="Z"))throw new Z;g=String.fromCharCode(h.charCodeAt(0)+32);break;case"$":if(!(h>="A"&&h<="Z"))throw new Z;g=String.fromCharCode(h.charCodeAt(0)-64);break;case"%":if(h>="A"&&h<="E")g=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")g=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")g=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")g=String.fromCharCode(h.charCodeAt(0)+43);else if("U"===h)g="\0";else if("V"===h)g="@";else if("W"===h)g="`";else{if("X"!==h&&"Y"!==h&&"Z"!==h)throw new Z;g="\x7f"}break;case"/":if(h>="A"&&h<="O")g=String.fromCharCode(h.charCodeAt(0)-32);else{if("Z"!==h)throw new Z;g=":"}}l+=g,u++}else l+=f}return l}}return w.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",w.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],w.ASTERISK_ENCODING=148,w})();class Xe extends pt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,s,o){let l=this.decodeStart(s),u=this.decodeEnd(s),f=new je;Xe.decodeMiddle(s,l[1],u[0],f);let h=f.toString(),g=null;null!=o&&(g=o.get(et.ALLOWED_LENGTHS)),null==g&&(g=Xe.DEFAULT_ALLOWED_LENGTHS);let x=h.length,E=!1,D=0;for(let S of g){if(x===S){E=!0;break}S>D&&(D=S)}if(!E&&x>D&&(E=!0),!E)throw new Z;const I=[new ee(l[1],i),new ee(u[0],i)];return new Ht(h,null,0,I,ae.ITF,(new Date).getTime())}static decodeMiddle(i,s,o,l){let u=new Int32Array(10),f=new Int32Array(5),h=new Int32Array(5);for(u.fill(0),f.fill(0),h.fill(0);s<o;){pt.recordPattern(i,s,u);for(let x=0;x<5;x++){let E=2*x;f[x]=u[E],h[x]=u[E+1]}let g=Xe.decodeDigit(f);l.append(g.toString()),g=this.decodeDigit(h),l.append(g.toString()),u.forEach(function(x){s+=x})}}decodeStart(i){let s=Xe.skipWhiteSpace(i),o=Xe.findGuardPattern(i,s,Xe.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(i,o[0]),o}validateQuietZone(i,s){let o=10*this.narrowLineWidth;o=o<s?o:s;for(let l=s-1;o>0&&l>=0&&!i.get(l);l--)o--;if(0!==o)throw new V}static skipWhiteSpace(i){const s=i.getSize(),o=i.getNextSet(0);if(o===s)throw new V;return o}decodeEnd(i){i.reverse();try{let o,s=Xe.skipWhiteSpace(i);try{o=Xe.findGuardPattern(i,s,Xe.END_PATTERN_REVERSED[0])}catch(u){u instanceof V&&(o=Xe.findGuardPattern(i,s,Xe.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,o[0]);let l=o[0];return o[0]=i.getSize()-o[1],o[1]=i.getSize()-l,o}finally{i.reverse()}}static findGuardPattern(i,s,o){let l=o.length,u=new Int32Array(l),f=i.getSize(),h=!1,g=0,x=s;u.fill(0);for(let E=s;E<f;E++)if(i.get(E)!==h)u[g]++;else{if(g===l-1){if(pt.patternMatchVariance(u,o,Xe.MAX_INDIVIDUAL_VARIANCE)<Xe.MAX_AVG_VARIANCE)return[x,E];x+=u[0]+u[1],Ge.arraycopy(u,2,u,0,g-1),u[g-1]=0,u[g]=0,g--}else g++;u[g]=1,h=!h}throw new V}static decodeDigit(i){let s=Xe.MAX_AVG_VARIANCE,o=-1,l=Xe.PATTERNS.length;for(let u=0;u<l;u++){let h=pt.patternMatchVariance(i,Xe.PATTERNS[u],Xe.MAX_INDIVIDUAL_VARIANCE);h<s?(s=h,o=u):h===s&&(o=-1)}if(o>=0)return o%10;throw new V}}Xe.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Xe.MAX_AVG_VARIANCE=.38,Xe.MAX_INDIVIDUAL_VARIANCE=.5,Xe.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Xe.START_PATTERN=Int32Array.from([1,1,1,1]),Xe.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class ct extends pt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let o,s=!1,l=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),o=ct.findGuardPattern(i,l,!1,this.START_END_PATTERN,u);let f=o[0];l=o[1];let h=f-(l-f);h>=0&&(s=i.isRange(h,f,!1))}return o}static checkChecksum(i){return ct.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let s=i.length;if(0===s)return!1;let o=parseInt(i.charAt(s-1),10);return ct.getStandardUPCEANChecksum(i.substring(0,s-1))===o}static getStandardUPCEANChecksum(i){let s=i.length,o=0;for(let l=s-1;l>=0;l-=2){let u=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new Z;o+=u}o*=3;for(let l=s-2;l>=0;l-=2){let u=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new Z;o+=u}return(1e3-o)%10}static decodeEnd(i,s){return ct.findGuardPattern(i,s,!1,ct.START_END_PATTERN,new Int32Array(ct.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,s,o,l){return this.findGuardPattern(i,s,o,l,new Int32Array(l.length))}static findGuardPattern(i,s,o,l,u){let f=i.getSize(),h=0,g=s=o?i.getNextUnset(s):i.getNextSet(s),x=l.length,E=o;for(let D=s;D<f;D++)if(i.get(D)!==E)u[h]++;else{if(h===x-1){if(pt.patternMatchVariance(u,l,ct.MAX_INDIVIDUAL_VARIANCE)<ct.MAX_AVG_VARIANCE)return Int32Array.from([g,D]);g+=u[0]+u[1];let I=u.slice(2,u.length-1);for(let T=0;T<h-1;T++)u[T]=I[T];u[h-1]=0,u[h]=0,h--}else h++;u[h]=1,E=!E}throw new V}static decodeDigit(i,s,o,l){this.recordPattern(i,o,s);let u=this.MAX_AVG_VARIANCE,f=-1,h=l.length;for(let g=0;g<h;g++){let E=pt.patternMatchVariance(s,l[g],ct.MAX_INDIVIDUAL_VARIANCE);E<u&&(u=E,f=g)}if(f>=0)return f;throw new V}}ct.MAX_AVG_VARIANCE=.48,ct.MAX_INDIVIDUAL_VARIANCE=.7,ct.START_END_PATTERN=Int32Array.from([1,1,1]),ct.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),ct.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ct.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ni{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,s,o){let l=this.decodeRowStringBuffer,u=this.decodeMiddle(s,o,l),f=l.toString(),h=Ni.parseExtensionString(f),g=[new ee((o[0]+o[1])/2,i),new ee(u,i)],x=new Ht(f,null,0,g,ae.UPC_EAN_EXTENSION,(new Date).getTime());return null!=h&&x.putAllMetadata(h),x}decodeMiddle(i,s,o){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=i.getSize(),f=s[1],h=0;for(let x=0;x<5&&f<u;x++){let E=ct.decodeDigit(i,l,f,ct.L_AND_G_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+E%10);for(let D of l)f+=D;E>=10&&(h|=1<<4-x),4!==x&&(f=i.getNextSet(f),f=i.getNextUnset(f))}if(5!==o.length)throw new V;let g=this.determineCheckDigit(h);if(Ni.extensionChecksum(o.toString())!==g)throw new V;return f}static extensionChecksum(i){let s=i.length,o=0;for(let l=s-2;l>=0;l-=2)o+=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);o*=3;for(let l=s-1;l>=0;l-=2)o+=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);return o*=3,o%10}determineCheckDigit(i){for(let s=0;s<10;s++)if(i===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new V}static parseExtensionString(i){if(5!==i.length)return null;let s=Ni.parseExtension5String(i);return null==s?null:new Map([[st.SUGGESTED_PRICE,s]])}static parseExtension5String(i){let s;switch(i.charAt(0)){case"0":s="\xa3";break;case"5":s="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s=""}let o=parseInt(i.substring(1)),u=o%100;return s+(o/100).toString()+"."+(u<10?"0"+u:u.toString())}}class Oi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,s,o){let l=this.decodeRowStringBuffer,u=this.decodeMiddle(s,o,l),f=l.toString(),h=Oi.parseExtensionString(f),g=[new ee((o[0]+o[1])/2,i),new ee(u,i)],x=new Ht(f,null,0,g,ae.UPC_EAN_EXTENSION,(new Date).getTime());return null!=h&&x.putAllMetadata(h),x}decodeMiddle(i,s,o){let l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=i.getSize(),f=s[1],h=0;for(let g=0;g<2&&f<u;g++){let x=ct.decodeDigit(i,l,f,ct.L_AND_G_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+x%10);for(let E of l)f+=E;x>=10&&(h|=1<<1-g),1!==g&&(f=i.getNextSet(f),f=i.getNextUnset(f))}if(2!==o.length)throw new V;if(parseInt(o.toString())%4!==h)throw new V;return f}static parseExtensionString(i){return 2!==i.length?null:new Map([[st.ISSUE_NUMBER,parseInt(i)]])}}class Ns{static decodeRow(i,s,o){let l=ct.findGuardPattern(s,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Ni).decodeRow(i,s,l)}catch(u){return(new Oi).decodeRow(i,s,l)}}}Ns.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Le extends ct{constructor(){super(),this.decodeRowStringBuffer="",Le.L_AND_G_PATTERNS=Le.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let s=Le.L_PATTERNS[i-10],o=new Int32Array(s.length);for(let l=0;l<s.length;l++)o[l]=s[s.length-l-1];Le.L_AND_G_PATTERNS[i]=o}}decodeRow(i,s,o){let l=Le.findStartGuardPattern(s),u=null==o?null:o.get(et.NEED_RESULT_POINT_CALLBACK);if(null!=u){const k=new ee((l[0]+l[1])/2,i);u.foundPossibleResultPoint(k)}let f=this.decodeMiddle(s,l,this.decodeRowStringBuffer),h=f.rowOffset,g=f.resultString;if(null!=u){const k=new ee(h,i);u.foundPossibleResultPoint(k)}let x=Le.decodeEnd(s,h);if(null!=u){const k=new ee((x[0]+x[1])/2,i);u.foundPossibleResultPoint(k)}let E=x[1],D=E+(E-x[0]);if(D>=s.getSize()||!s.isRange(E,D,!1))throw new V;let I=g.toString();if(I.length<8)throw new Z;if(!Le.checkChecksum(I))throw new at;let T=(l[1]+l[0])/2,S=(x[1]+x[0])/2,M=this.getBarcodeFormat(),R=[new ee(T,i),new ee(S,i)],L=new Ht(I,null,0,R,M,(new Date).getTime()),U=0;try{let k=Ns.decodeRow(i,s,x[1]);L.putMetadata(st.UPC_EAN_EXTENSION,k.getText()),L.putAllMetadata(k.getResultMetadata()),L.addResultPoints(k.getResultPoints()),U=k.getText().length}catch(k){}let q=null==o?null:o.get(et.ALLOWED_EAN_EXTENSIONS);if(null!=q){let k=!1;for(let be in q)if(U.toString()===be){k=!0;break}if(!k)throw new V}return L}static checkChecksum(i){return Le.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let s=i.length;if(0===s)return!1;let o=parseInt(i.charAt(s-1),10);return Le.getStandardUPCEANChecksum(i.substring(0,s-1))===o}static getStandardUPCEANChecksum(i){let s=i.length,o=0;for(let l=s-1;l>=0;l-=2){let u=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new Z;o+=u}o*=3;for(let l=s-2;l>=0;l-=2){let u=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);if(u<0||u>9)throw new Z;o+=u}return(1e3-o)%10}static decodeEnd(i,s){return Le.findGuardPattern(i,s,!1,Le.START_END_PATTERN,new Int32Array(Le.START_END_PATTERN.length).fill(0))}}let hi=(()=>{class w extends Le{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=s.getSize(),h=o[1],g=0;for(let E=0;E<6&&h<f;E++){let D=Le.decodeDigit(s,u,h,Le.L_AND_G_PATTERNS);l+=String.fromCharCode("0".charCodeAt(0)+D%10);for(let I of u)h+=I;D>=10&&(g|=1<<5-E)}l=w.determineFirstDigit(l,g),h=Le.findGuardPattern(s,h,!0,Le.MIDDLE_PATTERN,new Int32Array(Le.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&h<f;E++){let D=Le.decodeDigit(s,u,h,Le.L_PATTERNS);l+=String.fromCharCode("0".charCodeAt(0)+D);for(let I of u)h+=I}return{rowOffset:h,resultString:l}}getBarcodeFormat(){return ae.EAN_13}static determineFirstDigit(s,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return String.fromCharCode("0".charCodeAt(0)+l)+s;throw new V}}return w.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],w})();class Os extends Le{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,s,o){const l=this.decodeMiddleCounters;l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=i.getSize(),f=s[1];for(let g=0;g<4&&f<u;g++){let x=Le.decodeDigit(i,l,f,Le.L_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+x);for(let E of l)f+=E}f=Le.findGuardPattern(i,f,!0,Le.MIDDLE_PATTERN,new Int32Array(Le.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<4&&f<u;g++){let x=Le.decodeDigit(i,l,f,Le.L_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+x);for(let E of l)f+=E}return{rowOffset:f,resultString:o}}getBarcodeFormat(){return ae.EAN_8}}class xl extends Le{constructor(){super(...arguments),this.ean13Reader=new hi}getBarcodeFormat(){return ae.UPC_A}decode(i,s){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,s,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,s,o))}decodeMiddle(i,s,o){return this.ean13Reader.decodeMiddle(i,s,o)}maybeReturnResult(i){let s=i.getText();if("0"===s.charAt(0)){let o=new Ht(s.substring(1),null,null,i.getResultPoints(),ae.UPC_A);return null!=i.getResultMetadata()&&o.putAllMetadata(i.getResultMetadata()),o}throw new V}reset(){this.ean13Reader.reset()}}class fn extends Le{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,s,o){const l=this.decodeMiddleCounters.map(g=>g);l[0]=0,l[1]=0,l[2]=0,l[3]=0;const u=i.getSize();let f=s[1],h=0;for(let g=0;g<6&&f<u;g++){const x=fn.decodeDigit(i,l,f,fn.L_AND_G_PATTERNS);o+=String.fromCharCode("0".charCodeAt(0)+x%10);for(let E of l)f+=E;x>=10&&(h|=1<<5-g)}return fn.determineNumSysAndCheckDigit(new je(o),h),f}decodeEnd(i,s){return fn.findGuardPatternWithoutCounters(i,s,!0,fn.MIDDLE_END_PATTERN)}checkChecksum(i){return Le.checkChecksum(fn.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,s){for(let o=0;o<=1;o++)for(let l=0;l<10;l++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][l])return i.insert(0,"0"+o),void i.append("0"+l);throw V.getNotFoundInstance()}getBarcodeFormat(){return ae.UPC_E}static convertUPCEtoUPCA(i){const s=i.slice(1,7).split("").map(u=>u.charCodeAt(0)),o=new je;o.append(i.charAt(0));let l=s[5];switch(l){case 0:case 1:case 2:o.appendChars(s,0,2),o.append(l),o.append("0000"),o.appendChars(s,2,3);break;case 3:o.appendChars(s,0,3),o.append("00000"),o.appendChars(s,3,2);break;case 4:o.appendChars(s,0,4),o.append("00000"),o.append(s[4]);break;default:o.appendChars(s,0,5),o.append("0000"),o.append(l)}return i.length>=8&&o.append(i.charAt(7)),o.toString()}}fn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),fn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])];class Ri extends pt{constructor(i){super();let s=null==i?null:i.get(et.POSSIBLE_FORMATS),o=[];null!=s&&(s.indexOf(ae.EAN_13)>-1?o.push(new hi):s.indexOf(ae.UPC_A)>-1&&o.push(new xl),s.indexOf(ae.EAN_8)>-1&&o.push(new Os),s.indexOf(ae.UPC_E)>-1&&o.push(new fn)),0===o.length&&(o.push(new hi),o.push(new Os),o.push(new fn)),this.readers=o}decodeRow(i,s,o){for(let l of this.readers)try{const u=l.decodeRow(i,s,o),f=u.getBarcodeFormat()===ae.EAN_13&&"0"===u.getText().charAt(0),h=null==o?null:o.get(et.POSSIBLE_FORMATS),g=null==h||h.includes(ae.UPC_A);if(f&&g){const x=u.getRawBytes(),E=new Ht(u.getText().substring(1),x,x.length,u.getResultPoints(),ae.UPC_A);return E.putAllMetadata(u.getResultMetadata()),E}return u}catch(u){}throw new V}reset(){for(let i of this.readers)i.reset()}}let ar=(()=>{class w extends pt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,o){for(let l=0;l<o.length;l++)if(pt.patternMatchVariance(s,o[l],w.MAX_INDIVIDUAL_VARIANCE)<w.MAX_AVG_VARIANCE)return l;throw new V}static count(s){return Re.sum(new Int32Array(s))}static increment(s,o){let l=0,u=o[0];for(let f=1;f<s.length;f++)o[f]>u&&(u=o[f],l=f);s[l]++}static decrement(s,o){let l=0,u=o[0];for(let f=1;f<s.length;f++)o[f]<u&&(u=o[f],l=f);s[l]--}static isFinderPattern(s){let o=s[0]+s[1],u=o/(o+s[2]+s[3]);if(u>=w.MIN_FINDER_PATTERN_RATIO&&u<=w.MAX_FINDER_PATTERN_RATIO){let f=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let g of s)g>h&&(h=g),g<f&&(f=g);return h<10*f}return!1}}return w.MAX_AVG_VARIANCE=.2,w.MAX_INDIVIDUAL_VARIANCE=.45,w.MIN_FINDER_PATTERN_RATIO=9.5/12,w.MAX_FINDER_PATTERN_RATIO=12.5/14,w})();class Sr{constructor(i,s){this.value=i,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){return i instanceof Sr&&this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Nn{constructor(i,s,o,l,u){this.value=i,this.startEnd=s,this.value=i,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new ee(o,u)),this.resultPoints.push(new ee(l,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){return i instanceof Nn&&this.value===i.value}hashCode(){return this.value}}class On{constructor(){}static getRSSvalue(i,s,o){let l=0;for(let g of i)l+=g;let u=0,f=0,h=i.length;for(let g=0;g<h-1;g++){let x;for(x=1,f|=1<<g;x<i[g];x++,f&=~(1<<g)){let E=On.combins(l-x-1,h-g-2);if(o&&0===f&&l-x-(h-g-1)>=h-g-1&&(E-=On.combins(l-x-(h-g),h-g-2)),h-g-1>1){let D=0;for(let I=l-x-(h-g-2);I>s;I--)D+=On.combins(l-x-I-1,h-g-3);E-=D*(h-1-g)}else l-x>s&&E--;u+=E}l-=x}return u}static combins(i,s){let o,l;i-s>s?(l=s,o=i-s):(l=i-s,o=s);let u=1,f=1;for(let h=i;h>o;h--)u*=h,f<=l&&(u/=f,f++);for(;f<=l;)u/=f,f++;return u}}class vr{constructor(i,s){s?this.decodedInformation=null:(this.finished=i,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Rs{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}let dn=(()=>{class w extends Rs{constructor(s,o){super(s),this.value=o}getValue(){return this.value}isFNC1(){return this.value===w.FNC1}}return w.FNC1="$",w})();class Mr extends Rs{constructor(i,s,o){super(i),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}let Zr=(()=>{class w extends Rs{constructor(s,o,l){if(super(s),o<0||o>10||l<0||l>10)throw new Z;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===w.FNC1}isSecondDigitFNC1(){return this.secondDigit===w.FNC1}isAnyFNC1(){return this.firstDigit===w.FNC1||this.secondDigit===w.FNC1}}return w.FNC1=10,w})();class ${constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new V;let s=i.substring(0,2);for(let u of $.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===$.VARIABLE_LENGTH?$.processVariableAI(2,u[2],i):$.processFixedAI(2,u[1],i);if(i.length<3)throw new V;let o=i.substring(0,3);for(let u of $.THREE_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===$.VARIABLE_LENGTH?$.processVariableAI(3,u[2],i):$.processFixedAI(3,u[1],i);for(let u of $.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===$.VARIABLE_LENGTH?$.processVariableAI(4,u[2],i):$.processFixedAI(4,u[1],i);if(i.length<4)throw new V;let l=i.substring(0,4);for(let u of $.FOUR_DIGIT_DATA_LENGTH)if(u[0]===l)return u[1]===$.VARIABLE_LENGTH?$.processVariableAI(4,u[2],i):$.processFixedAI(4,u[1],i);throw new V}static processFixedAI(i,s,o){if(o.length<i)throw new V;let l=o.substring(0,i);if(o.length<i+s)throw new V;let u=o.substring(i,i+s),f=o.substring(i+s),h="("+l+")"+u,g=$.parseFieldsInGeneralPurpose(f);return null==g?h:h+g}static processVariableAI(i,s,o){let u,l=o.substring(0,i);u=o.length<i+s?o.length:i+s;let f=o.substring(i,u),h=o.substring(u),g="("+l+")"+f,x=$.parseFieldsInGeneralPurpose(h);return null==x?g:g+x}}$.VARIABLE_LENGTH=[],$.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",$.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",$.VARIABLE_LENGTH,20],["22",$.VARIABLE_LENGTH,29],["30",$.VARIABLE_LENGTH,8],["37",$.VARIABLE_LENGTH,8],["90",$.VARIABLE_LENGTH,30],["91",$.VARIABLE_LENGTH,30],["92",$.VARIABLE_LENGTH,30],["93",$.VARIABLE_LENGTH,30],["94",$.VARIABLE_LENGTH,30],["95",$.VARIABLE_LENGTH,30],["96",$.VARIABLE_LENGTH,30],["97",$.VARIABLE_LENGTH,3],["98",$.VARIABLE_LENGTH,30],["99",$.VARIABLE_LENGTH,30]],$.THREE_DIGIT_DATA_LENGTH=[["240",$.VARIABLE_LENGTH,30],["241",$.VARIABLE_LENGTH,30],["242",$.VARIABLE_LENGTH,6],["250",$.VARIABLE_LENGTH,30],["251",$.VARIABLE_LENGTH,30],["253",$.VARIABLE_LENGTH,17],["254",$.VARIABLE_LENGTH,20],["400",$.VARIABLE_LENGTH,30],["401",$.VARIABLE_LENGTH,30],["402",17],["403",$.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",$.VARIABLE_LENGTH,20],["421",$.VARIABLE_LENGTH,15],["422",3],["423",$.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],$.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",$.VARIABLE_LENGTH,15],["391",$.VARIABLE_LENGTH,18],["392",$.VARIABLE_LENGTH,15],["393",$.VARIABLE_LENGTH,18],["703",$.VARIABLE_LENGTH,30]],$.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",$.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",$.VARIABLE_LENGTH,20],["8003",$.VARIABLE_LENGTH,30],["8004",$.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",$.VARIABLE_LENGTH,30],["8008",$.VARIABLE_LENGTH,12],["8018",18],["8020",$.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",$.VARIABLE_LENGTH,70],["8200",$.VARIABLE_LENGTH,70]];class Qr{constructor(i){this.buffer=new je,this.information=i}decodeAllCodes(i,s){let o=s,l=null;for(;;){let u=this.decodeGeneralPurposeField(o,l),f=$.parseFieldsInGeneralPurpose(u.getNewString());if(null!=f&&i.append(f),l=u.isRemaining()?""+u.getRemainingValue():null,o===u.getNewPosition())break;o=u.getNewPosition()}return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let s=i;s<i+3;++s)if(this.information.get(s))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(i,4);return new Zr(this.information.getSize(),0===u?Zr.FNC1:u-1,Zr.FNC1)}let s=this.extractNumericValueFromBitArray(i,7);return new Zr(i+7,(s-8)/11,(s-8)%11)}extractNumericValueFromBitArray(i,s){return Qr.extractNumericValueFromBitArray(this.information,i,s)}static extractNumericValueFromBitArray(i,s,o){let l=0;for(let u=0;u<o;++u)i.get(s+u)&&(l|=1<<o-u-1);return l}decodeGeneralPurposeField(i,s){this.buffer.setLengthToZero(),null!=s&&this.buffer.append(s),this.current.setPosition(i);let o=this.parseBlocks();return null!=o&&o.isRemaining()?new Mr(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Mr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,s;do{let o=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),i=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),i=s.isFinished()):(s=this.parseNumericBlock(),i=s.isFinished()),o===this.current.getPosition()&&!i)break}while(!i);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let s;return s=i.isSecondDigitFNC1()?new Mr(this.current.getPosition(),this.buffer.toString()):new Mr(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new vr(!0,s)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let s=new Mr(this.current.getPosition(),this.buffer.toString());return new vr(!0,s)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new vr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let s=new Mr(this.current.getPosition(),this.buffer.toString());return new vr(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new vr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let s=new Mr(this.current.getPosition(),this.buffer.toString());return new vr(!0,s)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new vr(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,7);if(o>=64&&o<116)return!0;if(i+8>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(i,8);return l>=232&&l<253}decodeIsoIec646(i){let s=this.extractNumericValueFromBitArray(i,5);if(15===s)return new dn(i+5,dn.FNC1);if(s>=5&&s<15)return new dn(i+5,"0"+(s-5));let u,o=this.extractNumericValueFromBitArray(i,7);if(o>=64&&o<90)return new dn(i+7,""+(o+1));if(o>=90&&o<116)return new dn(i+7,""+(o+7));switch(this.extractNumericValueFromBitArray(i,8)){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new Z}return new dn(i+8,u)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(i,5);if(s>=5&&s<16)return!0;if(i+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(i,6);return o>=16&&o<63}decodeAlphanumeric(i){let s=this.extractNumericValueFromBitArray(i,5);if(15===s)return new dn(i+5,dn.FNC1);if(s>=5&&s<15)return new dn(i+5,"0"+(s-5));let l,o=this.extractNumericValueFromBitArray(i,6);if(o>=32&&o<58)return new dn(i+6,""+(o+33));switch(o){case 58:l="*";break;case 59:l=",";break;case 60:l="-";break;case 61:l=".";break;case 62:l="/";break;default:throw new or("Decoding invalid alphanumeric value: "+o)}return new dn(i+6,l)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let s=0;s<5&&s+i<this.information.getSize();++s)if(2===s){if(!this.information.get(i+2))return!1}else if(this.information.get(i+s))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let s=i;s<i+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let s=0;s<4&&s+i<this.information.getSize();++s)if(this.information.get(i+s))return!1;return!0}}class Ls{constructor(i){this.information=i,this.generalDecoder=new Qr(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}let Cn=(()=>{class w extends Ls{constructor(s){super(s)}encodeCompressedGtin(s,o){s.append("(01)");let l=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,o,l)}encodeCompressedGtinWithoutAI(s,o,l){for(let u=0;u<4;++u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*u,10);f/100==0&&s.append("0"),f/10==0&&s.append("0"),s.append(f)}w.appendCheckDigit(s,l)}static appendCheckDigit(s,o){let l=0;for(let u=0;u<13;u++){let f=s.charAt(u+o).charCodeAt(0)-"0".charCodeAt(0);l+=0==(1&u)?3*f:f}l=10-l%10,10===l&&(l=0),s.append(l)}}return w.GTIN_SIZE=40,w})(),Ho=(()=>{class w extends Cn{constructor(s){super(s)}parseInformation(){let s=new je;s.append("(01)");let o=s.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(w.HEADER_SIZE,4);return s.append(l),this.encodeCompressedGtinWithoutAI(s,w.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(s,w.HEADER_SIZE+44)}}return w.HEADER_SIZE=4,w})(),vf=(()=>{class w extends Ls{constructor(s){super(s)}parseInformation(){let s=new je;return this.getGeneralDecoder().decodeAllCodes(s,w.HEADER_SIZE)}}return w.HEADER_SIZE=5,w})();class Li extends Cn{constructor(i){super(i)}encodeCompressedWeight(i,s,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,o);this.addWeightCode(i,l);let u=this.checkWeight(l),f=1e5;for(let h=0;h<5;++h)u/f==0&&i.append("0"),f/=10;i.append(u)}}let Go=(()=>{class w extends Li{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=w.HEADER_SIZE+Li.GTIN_SIZE+w.WEIGHT_SIZE)throw new V;let s=new je;return this.encodeCompressedGtin(s,w.HEADER_SIZE),this.encodeCompressedWeight(s,w.HEADER_SIZE+Li.GTIN_SIZE,w.WEIGHT_SIZE),s.toString()}}return w.HEADER_SIZE=5,w.WEIGHT_SIZE=15,w})();class Fs extends Go{constructor(i){super(i)}addWeightCode(i,s){i.append("(3103)")}checkWeight(i){return i}}class Mf extends Go{constructor(i){super(i)}addWeightCode(i,s){i.append(s<1e4?"(3202)":"(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}let yl=(()=>{class w extends Cn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<w.HEADER_SIZE+Cn.GTIN_SIZE)throw new V;let s=new je;this.encodeCompressedGtin(s,w.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(w.HEADER_SIZE+Cn.GTIN_SIZE,w.LAST_DIGIT_SIZE);s.append("(392"),s.append(o),s.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(w.HEADER_SIZE+Cn.GTIN_SIZE+w.LAST_DIGIT_SIZE,null);return s.append(l.getNewString()),s.toString()}}return w.HEADER_SIZE=8,w.LAST_DIGIT_SIZE=2,w})(),El=(()=>{class w extends Cn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<w.HEADER_SIZE+Cn.GTIN_SIZE)throw new V;let s=new je;this.encodeCompressedGtin(s,w.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(w.HEADER_SIZE+Cn.GTIN_SIZE,w.LAST_DIGIT_SIZE);s.append("(393"),s.append(o),s.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(w.HEADER_SIZE+Cn.GTIN_SIZE+w.LAST_DIGIT_SIZE,w.FIRST_THREE_DIGITS_SIZE);l/100==0&&s.append("0"),l/10==0&&s.append("0"),s.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(w.HEADER_SIZE+Cn.GTIN_SIZE+w.LAST_DIGIT_SIZE+w.FIRST_THREE_DIGITS_SIZE,null);return s.append(u.getNewString()),s.toString()}}return w.HEADER_SIZE=8,w.LAST_DIGIT_SIZE=2,w.FIRST_THREE_DIGITS_SIZE=10,w})(),Wn=(()=>{class w extends Li{constructor(s,o,l){super(s),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=w.HEADER_SIZE+w.GTIN_SIZE+w.WEIGHT_SIZE+w.DATE_SIZE)throw new V;let s=new je;return this.encodeCompressedGtin(s,w.HEADER_SIZE),this.encodeCompressedWeight(s,w.HEADER_SIZE+w.GTIN_SIZE,w.WEIGHT_SIZE),this.encodeCompressedDate(s,w.HEADER_SIZE+w.GTIN_SIZE+w.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,w.DATE_SIZE);if(38400==l)return;s.append("("),s.append(this.dateCode),s.append(")");let u=l%32;l/=32;let f=l%12+1;l/=12;let h=l;h/10==0&&s.append("0"),s.append(h),f/10==0&&s.append("0"),s.append(f),u/10==0&&s.append("0"),s.append(u)}addWeightCode(s,o){s.append("("),s.append(this.firstAIdigits),s.append(o/1e5),s.append(")")}checkWeight(s){return s%1e5}}return w.HEADER_SIZE=8,w.WEIGHT_SIZE=20,w.DATE_SIZE=16,w})();class lr{constructor(i,s,o,l){this.leftchar=i,this.rightchar=s,this.finderpattern=o,this.maybeLast=l}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(i,s){return i instanceof lr&&lr.equalsOrNull(i.leftchar,s.leftchar)&&lr.equalsOrNull(i.rightchar,s.rightchar)&&lr.equalsOrNull(i.finderpattern,s.finderpattern)}static equalsOrNull(i,s){return null===i?null===s:lr.equals(i,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ps{constructor(i,s,o){this.pairs=i,this.rowNumber=s,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,s){return i instanceof Ps&&this.checkEqualitity(i,s)&&i.wasReversed===s.wasReversed}checkEqualitity(i,s){if(!i||!s)return;let o;return i.forEach((l,u)=>{s.forEach(f=>{l.getLeftChar().getValue()===f.getLeftChar().getValue()&&l.getRightChar().getValue()===f.getRightChar().getValue()&&l.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(o=!0)})}),o}}class G extends ar{constructor(i){super(...arguments),this.pairs=new Array(G.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===i}decodeRow(i,s,o){this.pairs.length=0,this.startFromEven=!1;try{return G.constructResult(this.decodeRow2pairs(i,s))}catch(l){this.verbose&&console.log(l)}return this.pairs.length=0,this.startFromEven=!0,G.constructResult(this.decodeRow2pairs(i,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,s){let l,o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,i))}catch(u){if(u instanceof V){if(!this.pairs.length)throw new V;o=!0}}if(this.checkChecksum())return this.pairs;if(l=!!this.rows.length,this.storeRow(i,!1),l){let u=this.checkRowsBoolean(!1);if(null!=u||(u=this.checkRowsBoolean(!0),null!=u))return u}throw new V}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return i&&(this.rows=this.rows.reverse()),s}checkRows(i,s){for(let o=s;o<this.rows.length;o++){let l=this.rows[o];this.pairs.length=0;for(let f of i)this.pairs.push(f.getPairs());if(this.pairs.push(l.getPairs()),!G.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(i);u.push(l);try{return this.checkRows(u,o+1)}catch(f){this.verbose&&console.log(f)}}throw new V}static isValidSequence(i){for(let s of G.FINDER_PATTERN_SEQUENCES){if(i.length>s.length)continue;let o=!0;for(let l=0;l<i.length;l++)if(i[l].getFinderPattern().getValue()!=s[l]){o=!1;break}if(o)return!0}return!1}storeRow(i,s){let o=0,l=!1,u=!1;for(;o<this.rows.length;){let f=this.rows[o];if(f.getRowNumber()>i){u=f.isEquivalent(this.pairs);break}l=f.isEquivalent(this.pairs),o++}u||l||G.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new Ps(this.pairs,i,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,s){for(let o of s)if(o.getPairs().length!==i.length)for(let l of o.getPairs())for(let u of i)if(lr.equals(l,u))break}static isPartialRow(i,s){for(let o of s){let l=!0;for(let u of i){let f=!1;for(let h of o.getPairs())if(u.equals(h)){f=!0;break}if(!f){l=!1;break}}if(l)return!0}return!1}getRows(){return this.rows}static constructResult(i){let l=function zo(w){try{if(w.get(1))return new Ho(w);if(!w.get(2))return new vf(w);switch(Qr.extractNumericValueFromBitArray(w,1,4)){case 4:return new Fs(w);case 5:return new Mf(w)}switch(Qr.extractNumericValueFromBitArray(w,1,5)){case 12:return new yl(w);case 13:return new El(w)}switch(Qr.extractNumericValueFromBitArray(w,1,7)){case 56:return new Wn(w,"310","11");case 57:return new Wn(w,"320","11");case 58:return new Wn(w,"310","13");case 59:return new Wn(w,"320","13");case 60:return new Wn(w,"310","15");case 61:return new Wn(w,"320","15");case 62:return new Wn(w,"310","17");case 63:return new Wn(w,"320","17")}}catch(i){throw console.log(i),new or("unknown decoder: "+w)}}(class wl{static buildBitArray(i){let s=2*i.length-1;null==i[i.length-1].getRightChar()&&(s-=1);let l=new Be(12*s),u=0,h=i[0].getRightChar().getValue();for(let g=11;g>=0;--g)0!=(h&1<<g)&&l.set(u),u++;for(let g=1;g<i.length;++g){let x=i[g],E=x.getLeftChar().getValue();for(let D=11;D>=0;--D)0!=(E&1<<D)&&l.set(u),u++;if(null!=x.getRightChar()){let D=x.getRightChar().getValue();for(let I=11;I>=0;--I)0!=(D&1<<I)&&l.set(u),u++}}return l}}.buildBitArray(i)).parseInformation(),u=i[0].getFinderPattern().getResultPoints(),f=i[i.length-1].getFinderPattern().getResultPoints();return new Ht(l,null,null,[u[0],u[1],f[0],f[1]],ae.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),s=i.getLeftChar(),o=i.getRightChar();if(null==o)return!1;let l=o.getChecksumPortion(),u=2;for(let h=1;h<this.pairs.size();++h){let g=this.pairs.get(h);l+=g.getLeftChar().getChecksumPortion(),u++;let x=g.getRightChar();null!=x&&(l+=x.getChecksumPortion(),u++)}return l%=211,211*(u-4)+l==s.getValue()}static getNextSecondBar(i,s){let o;return i.get(s)?(o=i.getNextUnset(s),o=i.getNextSet(o)):(o=i.getNextSet(s),o=i.getNextUnset(o)),o}retrieveNextPair(i,s,o){let l=s.length%2==0;this.startFromEven&&(l=!l);let u,f=!0,h=-1;do{this.findNextPair(i,s,h),u=this.parseFoundFinderPattern(i,o,l),null==u?h=G.getNextSecondBar(i,this.startEnd[0]):f=!1}while(f);let x,g=this.decodeDataCharacter(i,u,l,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new V;try{x=this.decodeDataCharacter(i,u,l,!1)}catch(E){x=null,this.verbose&&console.log(E)}return new lr(g,x,u,!0)}isEmptyPair(i){return 0===i.length}findNextPair(i,s,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let f,u=i.getSize();f=o>=0?o:this.isEmptyPair(s)?0:s[s.length-1].getFinderPattern().getStartEnd()[1];let h=s.length%2!=0;this.startFromEven&&(h=!h);let g=!1;for(;f<u&&(g=!i.get(f),g);)f++;let x=0,E=f;for(let D=f;D<u;D++)if(i.get(D)!=g)l[x]++;else{if(3==x){if(h&&G.reverseCounters(l),G.isFinderPattern(l))return this.startEnd[0]=E,void(this.startEnd[1]=D);h&&G.reverseCounters(l),E+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,g=!g}throw new V}static reverseCounters(i){let s=i.length;for(let o=0;o<s/2;++o){let l=i[o];i[o]=i[s-o-1],i[s-o-1]=l}}parseFoundFinderPattern(i,s,o){let l,u,f;if(o){let x=this.startEnd[0]-1;for(;x>=0&&!i.get(x);)x--;x++,l=this.startEnd[0]-x,u=x,f=this.startEnd[1]}else u=this.startEnd[0],f=i.getNextUnset(this.startEnd[1]+1),l=f-this.startEnd[1];let g,h=this.getDecodeFinderCounters();Ge.arraycopy(h,0,h,1,h.length-1),h[0]=l;try{g=this.parseFinderValue(h,G.FINDER_PATTERNS)}catch(x){return null}return new Nn(g,[u,f],u,f,s)}decodeDataCharacter(i,s,o,l){let u=this.getDataCharacterCounters();for(let Ze=0;Ze<u.length;Ze++)u[Ze]=0;if(l)G.recordPatternInReverse(i,s.getStartEnd()[0],u);else{G.recordPattern(i,s.getStartEnd()[1],u);for(let Ze=0,Ut=u.length-1;Ze<Ut;Ze++,Ut--){let wn=u[Ze];u[Ze]=u[Ut],u[Ut]=wn}}let h=Re.sum(new Int32Array(u))/17,g=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(h-g)/g>.3)throw new V;let x=this.getOddCounts(),E=this.getEvenCounts(),D=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let Ze=0;Ze<u.length;Ze++){let Ut=1*u[Ze]/h,wn=Ut+.5;if(wn<1){if(Ut<.3)throw new V;wn=1}else if(wn>8){if(Ut>8.7)throw new V;wn=8}let yi=Ze/2;0==(1&Ze)?(x[yi]=wn,D[yi]=Ut-wn):(E[yi]=wn,I[yi]=Ut-wn)}this.adjustOddEvenCounts(17);let T=4*s.getValue()+(o?0:2)+(l?0:1)-1,S=0,M=0;for(let Ze=x.length-1;Ze>=0;Ze--)G.isNotA1left(s,o,l)&&(M+=x[Ze]*G.WEIGHTS[T][2*Ze]),S+=x[Ze];let R=0;for(let Ze=E.length-1;Ze>=0;Ze--)G.isNotA1left(s,o,l)&&(R+=E[Ze]*G.WEIGHTS[T][2*Ze+1]);let L=M+R;if(0!=(1&S)||S>13||S<4)throw new V;let U=(13-S)/2,q=G.SYMBOL_WIDEST[U],k=9-q,be=On.getRSSvalue(x,q,!0),we=On.getRSSvalue(E,k,!1);return new Sr(be*G.EVEN_TOTAL_SUBSET[U]+we+G.GSUM[U],L)}static isNotA1left(i,s,o){return!(0==i.getValue()&&s&&o)}adjustOddEvenCounts(i){let s=Re.sum(new Int32Array(this.getOddCounts())),o=Re.sum(new Int32Array(this.getEvenCounts())),l=!1,u=!1;s>13?u=!0:s<4&&(l=!0);let f=!1,h=!1;o>13?h=!0:o<4&&(f=!0);let g=s+o-i,x=1==(1&s),E=0==(1&o);if(1==g)if(x){if(E)throw new V;u=!0}else{if(!E)throw new V;h=!0}else if(-1==g)if(x){if(E)throw new V;l=!0}else{if(!E)throw new V;f=!0}else{if(0!=g)throw new V;if(x){if(!E)throw new V;s<o?(l=!0,h=!0):(u=!0,f=!0)}else if(E)throw new V}if(l){if(u)throw new V;G.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&G.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(h)throw new V;G.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&G.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}G.SYMBOL_WIDEST=[7,5,4,3,1],G.EVEN_TOTAL_SUBSET=[4,20,52,104,204],G.GSUM=[0,348,1388,2948,3988],G.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],G.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],G.FINDER_PAT_A=0,G.FINDER_PAT_B=1,G.FINDER_PAT_C=2,G.FINDER_PAT_D=3,G.FINDER_PAT_E=4,G.FINDER_PAT_F=5,G.FINDER_PATTERN_SEQUENCES=[[G.FINDER_PAT_A,G.FINDER_PAT_A],[G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B],[G.FINDER_PAT_A,G.FINDER_PAT_C,G.FINDER_PAT_B,G.FINDER_PAT_D],[G.FINDER_PAT_A,G.FINDER_PAT_E,G.FINDER_PAT_B,G.FINDER_PAT_D,G.FINDER_PAT_C],[G.FINDER_PAT_A,G.FINDER_PAT_E,G.FINDER_PAT_B,G.FINDER_PAT_D,G.FINDER_PAT_D,G.FINDER_PAT_F],[G.FINDER_PAT_A,G.FINDER_PAT_E,G.FINDER_PAT_B,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_F,G.FINDER_PAT_F],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_D],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_E],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_F,G.FINDER_PAT_F],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_E,G.FINDER_PAT_F,G.FINDER_PAT_F]],G.MAX_PAIRS=11;class Cl extends Sr{constructor(i,s,o){super(i,s),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class rt extends ar{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,s,o){const l=this.decodePair(s,!1,i,o);rt.addOrTally(this.possibleLeftPairs,l),s.reverse();let u=this.decodePair(s,!0,i,o);rt.addOrTally(this.possibleRightPairs,u),s.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1)for(let h of this.possibleRightPairs)if(h.getCount()>1&&rt.checkChecksum(f,h))return rt.constructResult(f,h);throw new V}static addOrTally(i,s){if(null==s)return;let o=!1;for(let l of i)if(l.getValue()===s.getValue()){l.incrementCount(),o=!0;break}o||i.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,s){let o=4537077*i.getValue()+s.getValue(),l=new String(o).toString(),u=new je;for(let x=13-l.length;x>0;x--)u.append("0");u.append(l);let f=0;for(let x=0;x<13;x++){let E=u.charAt(x).charCodeAt(0)-"0".charCodeAt(0);f+=0==(1&x)?3*E:E}f=10-f%10,10===f&&(f=0),u.append(f.toString());let h=i.getFinderPattern().getResultPoints(),g=s.getFinderPattern().getResultPoints();return new Ht(u.toString(),null,0,[h[0],h[1],g[0],g[1]],ae.RSS_14,(new Date).getTime())}static checkChecksum(i,s){let o=(i.getChecksumPortion()+16*s.getChecksumPortion())%79,l=9*i.getFinderPattern().getValue()+s.getFinderPattern().getValue();return l>72&&l--,l>8&&l--,o===l}decodePair(i,s,o,l){try{let u=this.findFinderPattern(i,s),f=this.parseFoundFinderPattern(i,o,s,u),h=null==l?null:l.get(et.NEED_RESULT_POINT_CALLBACK);if(null!=h){let E=(u[0]+u[1])/2;s&&(E=i.getSize()-1-E),h.foundPossibleResultPoint(new ee(E,o))}let g=this.decodeDataCharacter(i,f,!0),x=this.decodeDataCharacter(i,f,!1);return new Cl(1597*g.getValue()+x.getValue(),g.getChecksumPortion()+4*x.getChecksumPortion(),f)}catch(u){return null}}decodeDataCharacter(i,s,o){let l=this.getDataCharacterCounters();for(let R=0;R<l.length;R++)l[R]=0;if(o)pt.recordPatternInReverse(i,s.getStartEnd()[0],l);else{pt.recordPattern(i,s.getStartEnd()[1]+1,l);for(let R=0,L=l.length-1;R<L;R++,L--){let U=l[R];l[R]=l[L],l[L]=U}}let u=o?16:15,f=Re.sum(new Int32Array(l))/u,h=this.getOddCounts(),g=this.getEvenCounts(),x=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let R=0;R<l.length;R++){let L=l[R]/f,U=Math.floor(L+.5);U<1?U=1:U>8&&(U=8);let q=Math.floor(R/2);0==(1&R)?(h[q]=U,x[q]=L-U):(g[q]=U,E[q]=L-U)}this.adjustOddEvenCounts(o,u);let D=0,I=0;for(let R=h.length-1;R>=0;R--)I*=9,I+=h[R],D+=h[R];let T=0,S=0;for(let R=g.length-1;R>=0;R--)T*=9,T+=g[R],S+=g[R];let M=I+3*T;if(o){if(0!=(1&D)||D>12||D<4)throw new V;let R=(12-D)/2,L=rt.OUTSIDE_ODD_WIDEST[R],U=9-L,q=On.getRSSvalue(h,L,!1),k=On.getRSSvalue(g,U,!0);return new Sr(q*rt.OUTSIDE_EVEN_TOTAL_SUBSET[R]+k+rt.OUTSIDE_GSUM[R],M)}{if(0!=(1&S)||S>10||S<4)throw new V;let R=(10-S)/2,L=rt.INSIDE_ODD_WIDEST[R],U=9-L,q=On.getRSSvalue(h,L,!0),k=On.getRSSvalue(g,U,!1);return new Sr(k*rt.INSIDE_ODD_TOTAL_SUBSET[R]+q+rt.INSIDE_GSUM[R],M)}}findFinderPattern(i,s){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let l=i.getSize(),u=!1,f=0;for(;f<l&&(u=!i.get(f),s!==u);)f++;let h=0,g=f;for(let x=f;x<l;x++)if(i.get(x)!==u)o[h]++;else{if(3===h){if(ar.isFinderPattern(o))return[g,x];g+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,h--}else h++;o[h]=1,u=!u}throw new V}parseFoundFinderPattern(i,s,o,l){let u=i.get(l[0]),f=l[0]-1;for(;f>=0&&u!==i.get(f);)f--;f++;const h=l[0]-f,g=this.getDecodeFinderCounters(),x=new Int32Array(g.length);Ge.arraycopy(g,0,x,1,g.length-1),x[0]=h;const E=this.parseFinderValue(x,rt.FINDER_PATTERNS);let D=f,I=l[1];return o&&(D=i.getSize()-1-D,I=i.getSize()-1-I),new Nn(E,[f,l[1]],D,I,s)}adjustOddEvenCounts(i,s){let o=Re.sum(new Int32Array(this.getOddCounts())),l=Re.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1,h=!1,g=!1;i?(o>12?f=!0:o<4&&(u=!0),l>12?g=!0:l<4&&(h=!0)):(o>11?f=!0:o<5&&(u=!0),l>10?g=!0:l<4&&(h=!0));let x=o+l-s,E=(1&o)==(i?1:0),D=1==(1&l);if(1===x)if(E){if(D)throw new V;f=!0}else{if(!D)throw new V;g=!0}else if(-1===x)if(E){if(D)throw new V;u=!0}else{if(!D)throw new V;h=!0}else{if(0!==x)throw new V;if(E){if(!D)throw new V;o<l?(u=!0,g=!0):(f=!0,h=!0)}else if(D)throw new V}if(u){if(f)throw new V;ar.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&ar.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(g)throw new V;ar.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&ar.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}rt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],rt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],rt.OUTSIDE_GSUM=[0,161,961,2015,2715],rt.INSIDE_GSUM=[0,336,1036,1516],rt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],rt.INSIDE_ODD_WIDEST=[2,4,6,8],rt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class qr extends pt{constructor(i,s){super(),this.readers=[],this.verbose=!0===s;const o=i?i.get(et.POSSIBLE_FORMATS):null,l=i&&void 0!==i.get(et.ASSUME_CODE_39_CHECK_DIGIT);o&&((o.includes(ae.EAN_13)||o.includes(ae.UPC_A)||o.includes(ae.EAN_8)||o.includes(ae.UPC_E))&&this.readers.push(new Ri(i)),o.includes(ae.CODE_39)&&this.readers.push(new jo(l)),o.includes(ae.CODE_128)&&this.readers.push(new Q),o.includes(ae.ITF)&&this.readers.push(new Xe),o.includes(ae.RSS_14)&&this.readers.push(new rt),o.includes(ae.RSS_EXPANDED)&&this.readers.push(new G(this.verbose))),0===this.readers.length&&(this.readers.push(new Ri(i)),this.readers.push(new jo),this.readers.push(new Ri(i)),this.readers.push(new Q),this.readers.push(new Xe),this.readers.push(new rt),this.readers.push(new G(this.verbose)))}decodeRow(i,s,o){for(let l=0;l<this.readers.length;l++)try{return this.readers[l].decodeRow(i,s,o)}catch(u){}throw new V}reset(){this.readers.forEach(i=>i.reset())}}class Ue{constructor(i,s,o){this.ecCodewords=i,this.ecBlocks=[s],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Pe{constructor(i,s){this.count=i,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Se{constructor(i,s,o,l,u,f){this.versionNumber=i,this.symbolSizeRows=s,this.symbolSizeColumns=o,this.dataRegionSizeRows=l,this.dataRegionSizeColumns=u,this.ecBlocks=f;let h=0;const g=f.getECCodewords(),x=f.getECBlocks();for(let E of x)h+=E.getCount()*(E.getDataCodewords()+g);this.totalCodewords=h}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,s){if(0!=(1&i)||0!=(1&s))throw new Z;for(let o of Se.VERSIONS)if(o.symbolSizeRows===i&&o.symbolSizeColumns===s)return o;throw new Z}toString(){return""+this.versionNumber}static buildVersions(){return[new Se(1,10,10,8,8,new Ue(5,new Pe(1,3))),new Se(2,12,12,10,10,new Ue(7,new Pe(1,5))),new Se(3,14,14,12,12,new Ue(10,new Pe(1,8))),new Se(4,16,16,14,14,new Ue(12,new Pe(1,12))),new Se(5,18,18,16,16,new Ue(14,new Pe(1,18))),new Se(6,20,20,18,18,new Ue(18,new Pe(1,22))),new Se(7,22,22,20,20,new Ue(20,new Pe(1,30))),new Se(8,24,24,22,22,new Ue(24,new Pe(1,36))),new Se(9,26,26,24,24,new Ue(28,new Pe(1,44))),new Se(10,32,32,14,14,new Ue(36,new Pe(1,62))),new Se(11,36,36,16,16,new Ue(42,new Pe(1,86))),new Se(12,40,40,18,18,new Ue(48,new Pe(1,114))),new Se(13,44,44,20,20,new Ue(56,new Pe(1,144))),new Se(14,48,48,22,22,new Ue(68,new Pe(1,174))),new Se(15,52,52,24,24,new Ue(42,new Pe(2,102))),new Se(16,64,64,14,14,new Ue(56,new Pe(2,140))),new Se(17,72,72,16,16,new Ue(36,new Pe(4,92))),new Se(18,80,80,18,18,new Ue(48,new Pe(4,114))),new Se(19,88,88,20,20,new Ue(56,new Pe(4,144))),new Se(20,96,96,22,22,new Ue(68,new Pe(4,174))),new Se(21,104,104,24,24,new Ue(56,new Pe(6,136))),new Se(22,120,120,18,18,new Ue(68,new Pe(6,175))),new Se(23,132,132,20,20,new Ue(62,new Pe(8,163))),new Se(24,144,144,22,22,new Ue(62,new Pe(8,156),new Pe(2,155))),new Se(25,8,18,6,16,new Ue(7,new Pe(1,5))),new Se(26,8,32,6,14,new Ue(11,new Pe(1,10))),new Se(27,12,26,10,24,new Ue(14,new Pe(1,16))),new Se(28,12,36,10,16,new Ue(18,new Pe(1,22))),new Se(29,16,36,14,16,new Ue(24,new Pe(1,32))),new Se(30,16,48,14,22,new Ue(28,new Pe(1,49)))]}}Se.VERSIONS=Se.buildVersions();class gi{constructor(i){const s=i.getHeight();if(s<8||s>144||0!=(1&s))throw new Z;this.version=gi.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new ht(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const s=i.getHeight(),o=i.getWidth();return Se.getVersionForDimensions(s,o)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let s=0,o=4,l=0;const u=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let h=!1,g=!1,x=!1,E=!1;do{if(o!==u||0!==l||h)if(o!==u-2||0!==l||0==(3&f)||g)if(o!==u+4||2!==l||0!=(7&f)||x)if(o!==u-2||0!==l||4!=(7&f)||E){do{o<u&&l>=0&&!this.readMappingMatrix.get(l,o)&&(i[s++]=255&this.readUtah(o,l,u,f)),o-=2,l+=2}while(o>=0&&l<f);o+=1,l+=3;do{o>=0&&l<f&&!this.readMappingMatrix.get(l,o)&&(i[s++]=255&this.readUtah(o,l,u,f)),o+=2,l-=2}while(o<u&&l>=0);o+=3,l+=1}else i[s++]=255&this.readCorner4(u,f),o-=2,l+=2,E=!0;else i[s++]=255&this.readCorner3(u,f),o-=2,l+=2,x=!0;else i[s++]=255&this.readCorner2(u,f),o-=2,l+=2,g=!0;else i[s++]=255&this.readCorner1(u,f),o-=2,l+=2,h=!0}while(o<u||l<f);if(s!==this.version.getTotalCodewords())throw new Z;return i}readModule(i,s,o,l){return i<0&&(i+=o,s+=4-(o+4&7)),s<0&&(s+=l,i+=4-(l+4&7)),this.readMappingMatrix.set(s,i),this.mappingBitMatrix.get(s,i)}readUtah(i,s,o,l){let u=0;return this.readModule(i-2,s-2,o,l)&&(u|=1),u<<=1,this.readModule(i-2,s-1,o,l)&&(u|=1),u<<=1,this.readModule(i-1,s-2,o,l)&&(u|=1),u<<=1,this.readModule(i-1,s-1,o,l)&&(u|=1),u<<=1,this.readModule(i-1,s,o,l)&&(u|=1),u<<=1,this.readModule(i,s-2,o,l)&&(u|=1),u<<=1,this.readModule(i,s-1,o,l)&&(u|=1),u<<=1,this.readModule(i,s,o,l)&&(u|=1),u}readCorner1(i,s){let o=0;return this.readModule(i-1,0,i,s)&&(o|=1),o<<=1,this.readModule(i-1,1,i,s)&&(o|=1),o<<=1,this.readModule(i-1,2,i,s)&&(o|=1),o<<=1,this.readModule(0,s-2,i,s)&&(o|=1),o<<=1,this.readModule(0,s-1,i,s)&&(o|=1),o<<=1,this.readModule(1,s-1,i,s)&&(o|=1),o<<=1,this.readModule(2,s-1,i,s)&&(o|=1),o<<=1,this.readModule(3,s-1,i,s)&&(o|=1),o}readCorner2(i,s){let o=0;return this.readModule(i-3,0,i,s)&&(o|=1),o<<=1,this.readModule(i-2,0,i,s)&&(o|=1),o<<=1,this.readModule(i-1,0,i,s)&&(o|=1),o<<=1,this.readModule(0,s-4,i,s)&&(o|=1),o<<=1,this.readModule(0,s-3,i,s)&&(o|=1),o<<=1,this.readModule(0,s-2,i,s)&&(o|=1),o<<=1,this.readModule(0,s-1,i,s)&&(o|=1),o<<=1,this.readModule(1,s-1,i,s)&&(o|=1),o}readCorner3(i,s){let o=0;return this.readModule(i-1,0,i,s)&&(o|=1),o<<=1,this.readModule(i-1,s-1,i,s)&&(o|=1),o<<=1,this.readModule(0,s-3,i,s)&&(o|=1),o<<=1,this.readModule(0,s-2,i,s)&&(o|=1),o<<=1,this.readModule(0,s-1,i,s)&&(o|=1),o<<=1,this.readModule(1,s-3,i,s)&&(o|=1),o<<=1,this.readModule(1,s-2,i,s)&&(o|=1),o<<=1,this.readModule(1,s-1,i,s)&&(o|=1),o}readCorner4(i,s){let o=0;return this.readModule(i-3,0,i,s)&&(o|=1),o<<=1,this.readModule(i-2,0,i,s)&&(o|=1),o<<=1,this.readModule(i-1,0,i,s)&&(o|=1),o<<=1,this.readModule(0,s-2,i,s)&&(o|=1),o<<=1,this.readModule(0,s-1,i,s)&&(o|=1),o<<=1,this.readModule(1,s-1,i,s)&&(o|=1),o<<=1,this.readModule(2,s-1,i,s)&&(o|=1),o<<=1,this.readModule(3,s-1,i,s)&&(o|=1),o}extractDataRegion(i){const s=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(i.getHeight()!==s)throw new te("Dimension of bitMatrix must match the version size");const l=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),f=s/l|0,h=o/u|0,E=new ht(h*u,f*l);for(let D=0;D<f;++D){const I=D*l;for(let T=0;T<h;++T){const S=T*u;for(let M=0;M<l;++M){const R=D*(l+2)+1+M,L=I+M;for(let U=0;U<u;++U)i.get(T*(u+2)+1+U,R)&&E.set(S+U,L)}}}return E}}class He{constructor(i,s){this.numDataCodewords=i,this.codewords=s}static getDataBlocks(i,s){const o=s.getECBlocks();let l=0;const u=o.getECBlocks();for(let M of u)l+=M.getCount();const f=new Array(l);let h=0;for(let M of u)for(let R=0;R<M.getCount();R++){const L=M.getDataCodewords(),U=o.getECCodewords()+L;f[h++]=new He(L,new Uint8Array(U))}const x=f[0].codewords.length-o.getECCodewords(),E=x-1;let D=0;for(let M=0;M<E;M++)for(let R=0;R<h;R++)f[R].codewords[M]=i[D++];const I=24===s.getVersionNumber(),T=I?8:h;for(let M=0;M<T;M++)f[M].codewords[x-1]=i[D++];const S=f[0].codewords.length;for(let M=x;M<S;M++)for(let R=0;R<h;R++){const L=I?(R+8)%h:R;f[L].codewords[I&&L>7?M-1:M]=i[D++]}if(D!==i.length)throw new te;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class pi{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new te(""+i);let s=0,o=this.bitOffset,l=this.byteOffset;const u=this.bytes;if(o>0){const f=8-o,h=i<f?i:f,g=f-h;s=(u[l]&255>>8-h<<g)>>g,i-=h,o+=h,8===o&&(o=0,l++)}if(i>0){for(;i>=8;)s=s<<8|255&u[l],l++,i-=8;if(i>0){const f=8-i;s=s<<i|(u[l]&255>>f<<f)>>f,o+=i}}return this.bitOffset=o,this.byteOffset=l,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var de=(()=>{return(w=de||(de={}))[w.PAD_ENCODE=0]="PAD_ENCODE",w[w.ASCII_ENCODE=1]="ASCII_ENCODE",w[w.C40_ENCODE=2]="C40_ENCODE",w[w.TEXT_ENCODE=3]="TEXT_ENCODE",w[w.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",w[w.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",w[w.BASE256_ENCODE=6]="BASE256_ENCODE",de;var w})();class Rn{static decode(i){const s=new pi(i),o=new je,l=new je,u=new Array;let f=de.ASCII_ENCODE;do{if(f===de.ASCII_ENCODE)f=this.decodeAsciiSegment(s,o,l);else{switch(f){case de.C40_ENCODE:this.decodeC40Segment(s,o);break;case de.TEXT_ENCODE:this.decodeTextSegment(s,o);break;case de.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,o);break;case de.EDIFACT_ENCODE:this.decodeEdifactSegment(s,o);break;case de.BASE256_ENCODE:this.decodeBase256Segment(s,o,u);break;default:throw new Z}f=de.ASCII_ENCODE}}while(f!==de.PAD_ENCODE&&s.available()>0);return l.length()>0&&o.append(l.toString()),new sr(i,o.toString(),0===u.length?null:u,null)}static decodeAsciiSegment(i,s,o){let l=!1;do{let u=i.readBits(8);if(0===u)throw new Z;if(u<=128)return l&&(u+=128),s.append(String.fromCharCode(u-1)),de.ASCII_ENCODE;if(129===u)return de.PAD_ENCODE;if(u<=229){const f=u-130;f<10&&s.append("0"),s.append(""+f)}else switch(u){case 230:return de.C40_ENCODE;case 231:return de.BASE256_ENCODE;case 232:s.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:l=!0;break;case 236:s.append("[)>\x1e05\x1d"),o.insert(0,"\x1e\x04");break;case 237:s.append("[)>\x1e06\x1d"),o.insert(0,"\x1e\x04");break;case 238:return de.ANSIX12_ENCODE;case 239:return de.TEXT_ENCODE;case 240:return de.EDIFACT_ENCODE;default:if(254!==u||0!==i.available())throw new Z}}while(i.available()>0);return de.ASCII_ENCODE}static decodeC40Segment(i,s){let o=!1;const l=[];let u=0;do{if(8===i.available())return;const f=i.readBits(8);if(254===f)return;this.parseTwoBytes(f,i.readBits(8),l);for(let h=0;h<3;h++){const g=l[h];switch(u){case 0:if(g<3)u=g+1;else{if(!(g<this.C40_BASIC_SET_CHARS.length))throw new Z;{const x=this.C40_BASIC_SET_CHARS[g];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}}break;case 1:o?(s.append(String.fromCharCode(g+128)),o=!1):s.append(String.fromCharCode(g)),u=0;break;case 2:if(g<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[g];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}else switch(g){case 27:s.append(String.fromCharCode(29));break;case 30:o=!0;break;default:throw new Z}u=0;break;case 3:o?(s.append(String.fromCharCode(g+224)),o=!1):s.append(String.fromCharCode(g+96)),u=0;break;default:throw new Z}}}while(i.available()>0)}static decodeTextSegment(i,s){let o=!1,l=[],u=0;do{if(8===i.available())return;const f=i.readBits(8);if(254===f)return;this.parseTwoBytes(f,i.readBits(8),l);for(let h=0;h<3;h++){const g=l[h];switch(u){case 0:if(g<3)u=g+1;else{if(!(g<this.TEXT_BASIC_SET_CHARS.length))throw new Z;{const x=this.TEXT_BASIC_SET_CHARS[g];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}}break;case 1:o?(s.append(String.fromCharCode(g+128)),o=!1):s.append(String.fromCharCode(g)),u=0;break;case 2:if(g<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[g];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x)}else switch(g){case 27:s.append(String.fromCharCode(29));break;case 30:o=!0;break;default:throw new Z}u=0;break;case 3:if(!(g<this.TEXT_SHIFT3_SET_CHARS.length))throw new Z;{const x=this.TEXT_SHIFT3_SET_CHARS[g];o?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),o=!1):s.append(x),u=0}break;default:throw new Z}}}while(i.available()>0)}static decodeAnsiX12Segment(i,s){const o=[];do{if(8===i.available())return;const l=i.readBits(8);if(254===l)return;this.parseTwoBytes(l,i.readBits(8),o);for(let u=0;u<3;u++){const f=o[u];switch(f){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(f<14)s.append(String.fromCharCode(f+44));else{if(!(f<40))throw new Z;s.append(String.fromCharCode(f+51))}}}}while(i.available()>0)}static parseTwoBytes(i,s,o){let l=(i<<8)+s-1,u=Math.floor(l/1600);o[0]=u,l-=1600*u,u=Math.floor(l/40),o[1]=u,o[2]=l-40*u}static decodeEdifactSegment(i,s){do{if(i.available()<=16)return;for(let o=0;o<4;o++){let l=i.readBits(6);if(31===l){const u=8-i.getBitOffset();return void(8!==u&&i.readBits(u))}0==(32&l)&&(l|=64),s.append(String.fromCharCode(l))}}while(i.available()>0)}static decodeBase256Segment(i,s,o){let l=1+i.getByteOffset();const u=this.unrandomize255State(i.readBits(8),l++);let f;if(f=0===u?i.available()/8|0:u<250?u:250*(u-249)+this.unrandomize255State(i.readBits(8),l++),f<0)throw new Z;const h=new Uint8Array(f);for(let g=0;g<f;g++){if(i.available()<8)throw new Z;h[g]=this.unrandomize255State(i.readBits(8),l++)}o.push(h);try{s.append(Dt.decode(h,ue.ISO88591))}catch(g){throw new or("Platform does not support required encoding: "+g.message)}}static unrandomize255State(i,s){const l=i-(149*s%255+1);return l>=0?l:l+256}}Rn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Rn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Rn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Rn.TEXT_SHIFT2_SET_CHARS=Rn.C40_SHIFT2_SET_CHARS,Rn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class Al{constructor(){this.rsDecoder=new Si(Ve.DATA_MATRIX_FIELD_256)}decode(i){const s=new gi(i),o=s.getVersion(),l=s.readCodewords(),u=He.getDataBlocks(l,o);let f=0;for(let x of u)f+=x.getNumDataCodewords();const h=new Uint8Array(f),g=u.length;for(let x=0;x<g;x++){const E=u[x],D=E.getCodewords(),I=E.getNumDataCodewords();this.correctErrors(D,I);for(let T=0;T<I;T++)h[T*g+x]=D[T]}return Rn.decode(h)}correctErrors(i,s){const o=new Int32Array(i);try{this.rsDecoder.decode(o,i.length-s)}catch(l){throw new at}for(let l=0;l<s;l++)i[l]=o[l]}}class it{constructor(i){this.image=i,this.rectangleDetector=new vi(this.image)}detect(){const i=this.rectangleDetector.detect();let s=this.detectSolid1(i);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new V;s=this.shiftToModuleCenter(s);const o=s[0],l=s[1],u=s[2],f=s[3];let h=this.transitionsBetween(o,f)+1,g=this.transitionsBetween(u,f)+1;1==(1&h)&&(h+=1),1==(1&g)&&(g+=1),4*h<7*g&&4*g<7*h&&(h=g=Math.max(h,g));let x=it.sampleGrid(this.image,o,l,u,f,h,g);return new vs(x,[o,l,u,f])}static shiftPoint(i,s,o){let l=(s.getX()-i.getX())/(o+1),u=(s.getY()-i.getY())/(o+1);return new ee(i.getX()+l,i.getY()+u)}static moveAway(i,s,o){let l=i.getX(),u=i.getY();return l<s?l-=1:l+=1,u<o?u-=1:u+=1,new ee(l,u)}detectSolid1(i){let s=i[0],o=i[1],l=i[3],u=i[2],f=this.transitionsBetween(s,o),h=this.transitionsBetween(o,l),g=this.transitionsBetween(l,u),x=this.transitionsBetween(u,s),E=f,D=[u,s,o,l];return E>h&&(E=h,D[0]=s,D[1]=o,D[2]=l,D[3]=u),E>g&&(E=g,D[0]=o,D[1]=l,D[2]=u,D[3]=s),E>x&&(D[0]=l,D[1]=u,D[2]=s,D[3]=o),D}detectSolid2(i){let s=i[0],o=i[1],l=i[2],u=i[3],f=this.transitionsBetween(s,u),h=it.shiftPoint(o,l,4*(f+1)),g=it.shiftPoint(l,o,4*(f+1));return this.transitionsBetween(h,s)<this.transitionsBetween(g,u)?(i[0]=s,i[1]=o,i[2]=l,i[3]=u):(i[0]=o,i[1]=l,i[2]=u,i[3]=s),i}correctTopRight(i){let s=i[0],o=i[1],l=i[2],u=i[3],f=this.transitionsBetween(s,u),h=this.transitionsBetween(o,u),g=it.shiftPoint(s,o,4*(h+1)),x=it.shiftPoint(l,o,4*(f+1));f=this.transitionsBetween(g,u),h=this.transitionsBetween(x,u);let E=new ee(u.getX()+(l.getX()-o.getX())/(f+1),u.getY()+(l.getY()-o.getY())/(f+1)),D=new ee(u.getX()+(s.getX()-o.getX())/(h+1),u.getY()+(s.getY()-o.getY())/(h+1));return this.isValid(E)?this.isValid(D)?this.transitionsBetween(g,E)+this.transitionsBetween(x,E)>this.transitionsBetween(g,D)+this.transitionsBetween(x,D)?E:D:E:this.isValid(D)?D:null}shiftToModuleCenter(i){let s=i[0],o=i[1],l=i[2],u=i[3],f=this.transitionsBetween(s,u)+1,h=this.transitionsBetween(l,u)+1,g=it.shiftPoint(s,o,4*h),x=it.shiftPoint(l,o,4*f);f=this.transitionsBetween(g,u)+1,h=this.transitionsBetween(x,u)+1,1==(1&f)&&(f+=1),1==(1&h)&&(h+=1);let I,T,E=(s.getX()+o.getX()+l.getX()+u.getX())/4,D=(s.getY()+o.getY()+l.getY()+u.getY())/4;return s=it.moveAway(s,E,D),o=it.moveAway(o,E,D),l=it.moveAway(l,E,D),u=it.moveAway(u,E,D),g=it.shiftPoint(s,o,4*h),g=it.shiftPoint(g,u,4*f),I=it.shiftPoint(o,s,4*h),I=it.shiftPoint(I,l,4*f),x=it.shiftPoint(l,u,4*h),x=it.shiftPoint(x,o,4*f),T=it.shiftPoint(u,l,4*h),T=it.shiftPoint(T,s,4*f),[g,I,x,T]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,s,o,l,u,f,h){return Qt.getInstance().sampleGrid(i,f,h,.5,.5,f-.5,.5,f-.5,h-.5,.5,h-.5,s.getX(),s.getY(),u.getX(),u.getY(),l.getX(),l.getY(),o.getX(),o.getY())}transitionsBetween(i,s){let o=Math.trunc(i.getX()),l=Math.trunc(i.getY()),u=Math.trunc(s.getX()),f=Math.trunc(s.getY()),h=Math.abs(f-l)>Math.abs(u-o);if(h){let M=o;o=l,l=M,M=u,u=f,f=M}let g=Math.abs(u-o),x=Math.abs(f-l),E=-g/2,D=l<f?1:-1,I=o<u?1:-1,T=0,S=this.image.get(h?l:o,h?o:l);for(let M=o,R=l;M!==u;M+=I){let L=this.image.get(h?R:M,h?M:R);if(L!==S&&(T++,S=L),E+=x,E>0){if(R===f)break;R+=D,E-=g}}return T}}let pe=(()=>{class w{constructor(){this.decoder=new Al}decode(s,o=null){let l,u;if(null!=o&&o.has(et.PURE_BARCODE)){const E=w.extractPureBits(s.getBlackMatrix());l=this.decoder.decode(E),u=w.NO_POINTS}else{const E=new it(s.getBlackMatrix()).detect();l=this.decoder.decode(E.getBits()),u=E.getPoints()}const f=l.getRawBytes(),h=new Ht(l.getText(),f,8*f.length,u,ae.DATA_MATRIX,Ge.currentTimeMillis()),g=l.getByteSegments();null!=g&&h.putMetadata(st.BYTE_SEGMENTS,g);const x=l.getECLevel();return null!=x&&h.putMetadata(st.ERROR_CORRECTION_LEVEL,x),h}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(null==o||null==l)throw new V;const u=this.moduleSize(o,s);let f=o[1],g=o[0];const E=(l[0]-g+1)/u,D=(l[1]-f+1)/u;if(E<=0||D<=0)throw new V;const I=u/2;f+=I,g+=I;const T=new ht(E,D);for(let S=0;S<D;S++){const M=f+S*u;for(let R=0;R<E;R++)s.get(g+R*u,M)&&T.set(R,S)}return T}static moduleSize(s,o){const l=o.getWidth();let u=s[0];const f=s[1];for(;u<l&&o.get(u,f);)u++;if(u===l)throw new V;const h=u-s[0];if(0===h)throw new V;return h}}return w.NO_POINTS=[],w})();var Kr=(()=>{return(w=Kr||(Kr={}))[w.L=0]="L",w[w.M=1]="M",w[w.Q=2]="Q",w[w.H=3]="H",Kr;var w})();class ie{constructor(i,s,o){this.value=i,this.stringValue=s,this.bits=o,ie.FOR_BITS.set(o,this),ie.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return ie.L;case"M":return ie.M;case"Q":return ie.Q;case"H":return ie.H;default:throw new Jt(i+"not available")}}toString(){return this.stringValue}equals(i){return i instanceof ie&&this.value===i.value}static forBits(i){if(i<0||i>=ie.FOR_BITS.size)throw new te;return ie.FOR_BITS.get(i)}}ie.FOR_BITS=new Map,ie.FOR_VALUE=new Map,ie.L=new ie(Kr.L,"L",1),ie.M=new ie(Kr.M,"M",0),ie.Q=new ie(Kr.Q,"Q",3),ie.H=new ie(Kr.H,"H",2);class At{constructor(i){this.errorCorrectionLevel=ie.forBits(i>>3&3),this.dataMask=7&i}static numBitsDiffering(i,s){return Ce.bitCount(i^s)}static decodeFormatInformation(i,s){const o=At.doDecodeFormatInformation(i,s);return null!==o?o:At.doDecodeFormatInformation(i^At.FORMAT_INFO_MASK_QR,s^At.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,s){let o=Number.MAX_SAFE_INTEGER,l=0;for(const u of At.FORMAT_INFO_DECODE_LOOKUP){const f=u[0];if(f===i||f===s)return new At(u[1]);let h=At.numBitsDiffering(i,f);h<o&&(l=u[1],o=h),i!==s&&(h=At.numBitsDiffering(s,f),h<o&&(l=u[1],o=h))}return o<=3?new At(l):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){return i instanceof At&&this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}At.FORMAT_INFO_MASK_QR=21522,At.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class N{constructor(i,...s){this.ecCodewordsPerBlock=i,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const s=this.ecBlocks;for(const o of s)i+=o.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class _{constructor(i,s){this.count=i,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class se{constructor(i,s,...o){this.versionNumber=i,this.alignmentPatternCenters=s,this.ecBlocks=o;let l=0;const u=o[0].getECCodewordsPerBlock(),f=o[0].getECBlocks();for(const h of f)l+=h.getCount()*(h.getDataCodewords()+u);this.totalCodewords=l}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!=1)throw new Z;try{return this.getVersionForNumber((i-17)/4)}catch(s){throw new Z}}static getVersionForNumber(i){if(i<1||i>40)throw new te;return se.VERSIONS[i-1]}static decodeVersionInformation(i){let s=Number.MAX_SAFE_INTEGER,o=0;for(let l=0;l<se.VERSION_DECODE_INFO.length;l++){const u=se.VERSION_DECODE_INFO[l];if(u===i)return se.getVersionForNumber(l+7);const f=At.numBitsDiffering(i,u);f<s&&(o=l+7,s=f)}return s<=3?se.getVersionForNumber(o):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),s=new ht(i);s.setRegion(0,0,9,9),s.setRegion(i-8,0,8,9),s.setRegion(0,i-8,9,8);const o=this.alignmentPatternCenters.length;for(let l=0;l<o;l++){const u=this.alignmentPatternCenters[l]-2;for(let f=0;f<o;f++)0===l&&(0===f||f===o-1)||l===o-1&&0===f||s.setRegion(this.alignmentPatternCenters[f]-2,u,5,5)}return s.setRegion(6,9,1,i-17),s.setRegion(9,6,i-17,1),this.versionNumber>6&&(s.setRegion(i-11,0,3,6),s.setRegion(0,i-11,6,3)),s}toString(){return""+this.versionNumber}}se.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),se.VERSIONS=[new se(1,new Int32Array(0),new N(7,new _(1,19)),new N(10,new _(1,16)),new N(13,new _(1,13)),new N(17,new _(1,9))),new se(2,Int32Array.from([6,18]),new N(10,new _(1,34)),new N(16,new _(1,28)),new N(22,new _(1,22)),new N(28,new _(1,16))),new se(3,Int32Array.from([6,22]),new N(15,new _(1,55)),new N(26,new _(1,44)),new N(18,new _(2,17)),new N(22,new _(2,13))),new se(4,Int32Array.from([6,26]),new N(20,new _(1,80)),new N(18,new _(2,32)),new N(26,new _(2,24)),new N(16,new _(4,9))),new se(5,Int32Array.from([6,30]),new N(26,new _(1,108)),new N(24,new _(2,43)),new N(18,new _(2,15),new _(2,16)),new N(22,new _(2,11),new _(2,12))),new se(6,Int32Array.from([6,34]),new N(18,new _(2,68)),new N(16,new _(4,27)),new N(24,new _(4,19)),new N(28,new _(4,15))),new se(7,Int32Array.from([6,22,38]),new N(20,new _(2,78)),new N(18,new _(4,31)),new N(18,new _(2,14),new _(4,15)),new N(26,new _(4,13),new _(1,14))),new se(8,Int32Array.from([6,24,42]),new N(24,new _(2,97)),new N(22,new _(2,38),new _(2,39)),new N(22,new _(4,18),new _(2,19)),new N(26,new _(4,14),new _(2,15))),new se(9,Int32Array.from([6,26,46]),new N(30,new _(2,116)),new N(22,new _(3,36),new _(2,37)),new N(20,new _(4,16),new _(4,17)),new N(24,new _(4,12),new _(4,13))),new se(10,Int32Array.from([6,28,50]),new N(18,new _(2,68),new _(2,69)),new N(26,new _(4,43),new _(1,44)),new N(24,new _(6,19),new _(2,20)),new N(28,new _(6,15),new _(2,16))),new se(11,Int32Array.from([6,30,54]),new N(20,new _(4,81)),new N(30,new _(1,50),new _(4,51)),new N(28,new _(4,22),new _(4,23)),new N(24,new _(3,12),new _(8,13))),new se(12,Int32Array.from([6,32,58]),new N(24,new _(2,92),new _(2,93)),new N(22,new _(6,36),new _(2,37)),new N(26,new _(4,20),new _(6,21)),new N(28,new _(7,14),new _(4,15))),new se(13,Int32Array.from([6,34,62]),new N(26,new _(4,107)),new N(22,new _(8,37),new _(1,38)),new N(24,new _(8,20),new _(4,21)),new N(22,new _(12,11),new _(4,12))),new se(14,Int32Array.from([6,26,46,66]),new N(30,new _(3,115),new _(1,116)),new N(24,new _(4,40),new _(5,41)),new N(20,new _(11,16),new _(5,17)),new N(24,new _(11,12),new _(5,13))),new se(15,Int32Array.from([6,26,48,70]),new N(22,new _(5,87),new _(1,88)),new N(24,new _(5,41),new _(5,42)),new N(30,new _(5,24),new _(7,25)),new N(24,new _(11,12),new _(7,13))),new se(16,Int32Array.from([6,26,50,74]),new N(24,new _(5,98),new _(1,99)),new N(28,new _(7,45),new _(3,46)),new N(24,new _(15,19),new _(2,20)),new N(30,new _(3,15),new _(13,16))),new se(17,Int32Array.from([6,30,54,78]),new N(28,new _(1,107),new _(5,108)),new N(28,new _(10,46),new _(1,47)),new N(28,new _(1,22),new _(15,23)),new N(28,new _(2,14),new _(17,15))),new se(18,Int32Array.from([6,30,56,82]),new N(30,new _(5,120),new _(1,121)),new N(26,new _(9,43),new _(4,44)),new N(28,new _(17,22),new _(1,23)),new N(28,new _(2,14),new _(19,15))),new se(19,Int32Array.from([6,30,58,86]),new N(28,new _(3,113),new _(4,114)),new N(26,new _(3,44),new _(11,45)),new N(26,new _(17,21),new _(4,22)),new N(26,new _(9,13),new _(16,14))),new se(20,Int32Array.from([6,34,62,90]),new N(28,new _(3,107),new _(5,108)),new N(26,new _(3,41),new _(13,42)),new N(30,new _(15,24),new _(5,25)),new N(28,new _(15,15),new _(10,16))),new se(21,Int32Array.from([6,28,50,72,94]),new N(28,new _(4,116),new _(4,117)),new N(26,new _(17,42)),new N(28,new _(17,22),new _(6,23)),new N(30,new _(19,16),new _(6,17))),new se(22,Int32Array.from([6,26,50,74,98]),new N(28,new _(2,111),new _(7,112)),new N(28,new _(17,46)),new N(30,new _(7,24),new _(16,25)),new N(24,new _(34,13))),new se(23,Int32Array.from([6,30,54,78,102]),new N(30,new _(4,121),new _(5,122)),new N(28,new _(4,47),new _(14,48)),new N(30,new _(11,24),new _(14,25)),new N(30,new _(16,15),new _(14,16))),new se(24,Int32Array.from([6,28,54,80,106]),new N(30,new _(6,117),new _(4,118)),new N(28,new _(6,45),new _(14,46)),new N(30,new _(11,24),new _(16,25)),new N(30,new _(30,16),new _(2,17))),new se(25,Int32Array.from([6,32,58,84,110]),new N(26,new _(8,106),new _(4,107)),new N(28,new _(8,47),new _(13,48)),new N(30,new _(7,24),new _(22,25)),new N(30,new _(22,15),new _(13,16))),new se(26,Int32Array.from([6,30,58,86,114]),new N(28,new _(10,114),new _(2,115)),new N(28,new _(19,46),new _(4,47)),new N(28,new _(28,22),new _(6,23)),new N(30,new _(33,16),new _(4,17))),new se(27,Int32Array.from([6,34,62,90,118]),new N(30,new _(8,122),new _(4,123)),new N(28,new _(22,45),new _(3,46)),new N(30,new _(8,23),new _(26,24)),new N(30,new _(12,15),new _(28,16))),new se(28,Int32Array.from([6,26,50,74,98,122]),new N(30,new _(3,117),new _(10,118)),new N(28,new _(3,45),new _(23,46)),new N(30,new _(4,24),new _(31,25)),new N(30,new _(11,15),new _(31,16))),new se(29,Int32Array.from([6,30,54,78,102,126]),new N(30,new _(7,116),new _(7,117)),new N(28,new _(21,45),new _(7,46)),new N(30,new _(1,23),new _(37,24)),new N(30,new _(19,15),new _(26,16))),new se(30,Int32Array.from([6,26,52,78,104,130]),new N(30,new _(5,115),new _(10,116)),new N(28,new _(19,47),new _(10,48)),new N(30,new _(15,24),new _(25,25)),new N(30,new _(23,15),new _(25,16))),new se(31,Int32Array.from([6,30,56,82,108,134]),new N(30,new _(13,115),new _(3,116)),new N(28,new _(2,46),new _(29,47)),new N(30,new _(42,24),new _(1,25)),new N(30,new _(23,15),new _(28,16))),new se(32,Int32Array.from([6,34,60,86,112,138]),new N(30,new _(17,115)),new N(28,new _(10,46),new _(23,47)),new N(30,new _(10,24),new _(35,25)),new N(30,new _(19,15),new _(35,16))),new se(33,Int32Array.from([6,30,58,86,114,142]),new N(30,new _(17,115),new _(1,116)),new N(28,new _(14,46),new _(21,47)),new N(30,new _(29,24),new _(19,25)),new N(30,new _(11,15),new _(46,16))),new se(34,Int32Array.from([6,34,62,90,118,146]),new N(30,new _(13,115),new _(6,116)),new N(28,new _(14,46),new _(23,47)),new N(30,new _(44,24),new _(7,25)),new N(30,new _(59,16),new _(1,17))),new se(35,Int32Array.from([6,30,54,78,102,126,150]),new N(30,new _(12,121),new _(7,122)),new N(28,new _(12,47),new _(26,48)),new N(30,new _(39,24),new _(14,25)),new N(30,new _(22,15),new _(41,16))),new se(36,Int32Array.from([6,24,50,76,102,128,154]),new N(30,new _(6,121),new _(14,122)),new N(28,new _(6,47),new _(34,48)),new N(30,new _(46,24),new _(10,25)),new N(30,new _(2,15),new _(64,16))),new se(37,Int32Array.from([6,28,54,80,106,132,158]),new N(30,new _(17,122),new _(4,123)),new N(28,new _(29,46),new _(14,47)),new N(30,new _(49,24),new _(10,25)),new N(30,new _(24,15),new _(46,16))),new se(38,Int32Array.from([6,32,58,84,110,136,162]),new N(30,new _(4,122),new _(18,123)),new N(28,new _(13,46),new _(32,47)),new N(30,new _(48,24),new _(14,25)),new N(30,new _(42,15),new _(32,16))),new se(39,Int32Array.from([6,26,54,82,110,138,166]),new N(30,new _(20,117),new _(4,118)),new N(28,new _(40,47),new _(7,48)),new N(30,new _(43,24),new _(22,25)),new N(30,new _(10,15),new _(67,16))),new se(40,Int32Array.from([6,30,58,86,114,142,170]),new N(30,new _(19,118),new _(6,119)),new N(28,new _(18,47),new _(31,48)),new N(30,new _(34,24),new _(34,25)),new N(30,new _(20,15),new _(61,16)))];var It=(()=>{return(w=It||(It={}))[w.DATA_MASK_000=0]="DATA_MASK_000",w[w.DATA_MASK_001=1]="DATA_MASK_001",w[w.DATA_MASK_010=2]="DATA_MASK_010",w[w.DATA_MASK_011=3]="DATA_MASK_011",w[w.DATA_MASK_100=4]="DATA_MASK_100",w[w.DATA_MASK_101=5]="DATA_MASK_101",w[w.DATA_MASK_110=6]="DATA_MASK_110",w[w.DATA_MASK_111=7]="DATA_MASK_111",It;var w})();class Dn{constructor(i,s){this.value=i,this.isMasked=s}unmaskBitMatrix(i,s){for(let o=0;o<s;o++)for(let l=0;l<s;l++)this.isMasked(o,l)&&i.flip(l,o)}}Dn.values=new Map([[It.DATA_MASK_000,new Dn(It.DATA_MASK_000,(w,i)=>0==(w+i&1))],[It.DATA_MASK_001,new Dn(It.DATA_MASK_001,(w,i)=>0==(1&w))],[It.DATA_MASK_010,new Dn(It.DATA_MASK_010,(w,i)=>i%3==0)],[It.DATA_MASK_011,new Dn(It.DATA_MASK_011,(w,i)=>(w+i)%3==0)],[It.DATA_MASK_100,new Dn(It.DATA_MASK_100,(w,i)=>0==(Math.floor(w/2)+Math.floor(i/3)&1))],[It.DATA_MASK_101,new Dn(It.DATA_MASK_101,(w,i)=>w*i%6==0)],[It.DATA_MASK_110,new Dn(It.DATA_MASK_110,(w,i)=>w*i%6<3)],[It.DATA_MASK_111,new Dn(It.DATA_MASK_111,(w,i)=>0==(w+i+w*i%3&1))]]);class Fi{constructor(i){const s=i.getHeight();if(s<21||1!=(3&s))throw new Z;this.bitMatrix=i}readFormatInformation(){if(null!=this.parsedFormatInfo)return this.parsedFormatInfo;let i=0;for(let u=0;u<6;u++)i=this.copyBit(u,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let u=5;u>=0;u--)i=this.copyBit(8,u,i);const s=this.bitMatrix.getHeight();let o=0;const l=s-7;for(let u=s-1;u>=l;u--)o=this.copyBit(8,u,o);for(let u=s-8;u<s;u++)o=this.copyBit(u,8,o);if(this.parsedFormatInfo=At.decodeFormatInformation(i,o),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new Z}readVersion(){if(null!=this.parsedVersion)return this.parsedVersion;const i=this.bitMatrix.getHeight(),s=Math.floor((i-17)/4);if(s<=6)return se.getVersionForNumber(s);let o=0;const l=i-11;for(let f=5;f>=0;f--)for(let h=i-9;h>=l;h--)o=this.copyBit(h,f,o);let u=se.decodeVersionInformation(o);if(null!==u&&u.getDimensionForVersion()===i)return this.parsedVersion=u,u;o=0;for(let f=5;f>=0;f--)for(let h=i-9;h>=l;h--)o=this.copyBit(f,h,o);if(u=se.decodeVersionInformation(o),null!==u&&u.getDimensionForVersion()===i)return this.parsedVersion=u,u;throw new Z}copyBit(i,s,o){return(this.isMirror?this.bitMatrix.get(s,i):this.bitMatrix.get(i,s))?o<<1|1:o<<1}readCodewords(){const i=this.readFormatInformation(),s=this.readVersion(),o=Dn.values.get(i.getDataMask()),l=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,l);const u=s.buildFunctionPattern();let f=!0;const h=new Uint8Array(s.getTotalCodewords());let g=0,x=0,E=0;for(let D=l-1;D>0;D-=2){6===D&&D--;for(let I=0;I<l;I++){const T=f?l-1-I:I;for(let S=0;S<2;S++)u.get(D-S,T)||(E++,x<<=1,this.bitMatrix.get(D-S,T)&&(x|=1),8===E&&(h[g++]=x,E=0,x=0))}f=!f}if(g!==s.getTotalCodewords())throw new Z;return h}remask(){if(null===this.parsedFormatInfo)return;const i=Dn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,s)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let s=0,o=i.getWidth();s<o;s++)for(let l=s+1,u=i.getHeight();l<u;l++)i.get(s,l)!==i.get(l,s)&&(i.flip(l,s),i.flip(s,l))}}class zt{constructor(i,s){this.numDataCodewords=i,this.codewords=s}static getDataBlocks(i,s,o){if(i.length!==s.getTotalCodewords())throw new te;const l=s.getECBlocksForLevel(o);let u=0;const f=l.getECBlocks();for(const S of f)u+=S.getCount();const h=new Array(u);let g=0;for(const S of f)for(let M=0;M<S.getCount();M++){const R=S.getDataCodewords(),L=l.getECCodewordsPerBlock()+R;h[g++]=new zt(R,new Uint8Array(L))}const x=h[0].codewords.length;let E=h.length-1;for(;E>=0&&h[E].codewords.length!==x;)E--;E++;const D=x-l.getECCodewordsPerBlock();let I=0;for(let S=0;S<D;S++)for(let M=0;M<g;M++)h[M].codewords[S]=i[I++];for(let S=E;S<g;S++)h[S].codewords[D]=i[I++];const T=h[0].codewords.length;for(let S=D;S<T;S++)for(let M=0;M<g;M++)h[M].codewords[M<E?S:S+1]=i[I++];return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var hn=(()=>{return(w=hn||(hn={}))[w.TERMINATOR=0]="TERMINATOR",w[w.NUMERIC=1]="NUMERIC",w[w.ALPHANUMERIC=2]="ALPHANUMERIC",w[w.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",w[w.BYTE=4]="BYTE",w[w.ECI=5]="ECI",w[w.KANJI=6]="KANJI",w[w.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",w[w.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",w[w.HANZI=9]="HANZI",hn;var w})();class le{constructor(i,s,o,l){this.value=i,this.stringValue=s,this.characterCountBitsForVersions=o,this.bits=l,le.FOR_BITS.set(l,this),le.FOR_VALUE.set(i,this)}static forBits(i){const s=le.FOR_BITS.get(i);if(void 0===s)throw new te;return s}getCharacterCountBits(i){const s=i.getVersionNumber();let o;return o=s<=9?0:s<=26?1:2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(i){return i instanceof le&&this.value===i.value}toString(){return this.stringValue}}le.FOR_BITS=new Map,le.FOR_VALUE=new Map,le.TERMINATOR=new le(hn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),le.NUMERIC=new le(hn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),le.ALPHANUMERIC=new le(hn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),le.STRUCTURED_APPEND=new le(hn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),le.BYTE=new le(hn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),le.ECI=new le(hn.ECI,"ECI",Int32Array.from([0,0,0]),7),le.KANJI=new le(hn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),le.FNC1_FIRST_POSITION=new le(hn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),le.FNC1_SECOND_POSITION=new le(hn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),le.HANZI=new le(hn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);let Il=(()=>{class w{static decode(s,o,l,u){const f=new pi(s);let h=new je;const g=new Array;let x=-1,E=-1;try{let T,D=null,I=!1;do{if(f.available()<4)T=le.TERMINATOR;else{const S=f.readBits(4);T=le.forBits(S)}switch(T){case le.TERMINATOR:break;case le.FNC1_FIRST_POSITION:case le.FNC1_SECOND_POSITION:I=!0;break;case le.STRUCTURED_APPEND:if(f.available()<16)throw new Z;x=f.readBits(8),E=f.readBits(8);break;case le.ECI:const S=w.parseECIValue(f);if(D=Y.getCharacterSetECIByValue(S),null===D)throw new Z;break;case le.HANZI:const M=f.readBits(4),R=f.readBits(T.getCharacterCountBits(o));M===w.GB2312_SUBSET&&w.decodeHanziSegment(f,h,R);break;default:const L=f.readBits(T.getCharacterCountBits(o));switch(T){case le.NUMERIC:w.decodeNumericSegment(f,h,L);break;case le.ALPHANUMERIC:w.decodeAlphanumericSegment(f,h,L,I);break;case le.BYTE:w.decodeByteSegment(f,h,L,D,g,u);break;case le.KANJI:w.decodeKanjiSegment(f,h,L);break;default:throw new Z}}}while(T!==le.TERMINATOR)}catch(D){throw new Z}return new sr(s,h.toString(),0===g.length?null:g,null===l?null:l.toString(),x,E)}static decodeHanziSegment(s,o,l){if(13*l>s.available())throw new Z;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const h=s.readBits(13);let g=h/96<<8&4294967295|h%96;g+=g<959?41377:42657,u[f]=g>>8&255,u[f+1]=255&g,f+=2,l--}try{o.append(Dt.decode(u,ue.GB2312))}catch(h){throw new Z(h)}}static decodeKanjiSegment(s,o,l){if(13*l>s.available())throw new Z;const u=new Uint8Array(2*l);let f=0;for(;l>0;){const h=s.readBits(13);let g=h/192<<8&4294967295|h%192;g+=g<7936?33088:49472,u[f]=g>>8,u[f+1]=g,f+=2,l--}try{o.append(Dt.decode(u,ue.SHIFT_JIS))}catch(h){throw new Z(h)}}static decodeByteSegment(s,o,l,u,f,h){if(8*l>s.available())throw new Z;const g=new Uint8Array(l);for(let E=0;E<l;E++)g[E]=s.readBits(8);let x;x=null===u?ue.guessEncoding(g,h):u.getName();try{o.append(Dt.decode(g,x))}catch(E){throw new Z(E)}f.push(g)}static toAlphaNumericChar(s){if(s>=w.ALPHANUMERIC_CHARS.length)throw new Z;return w.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,o,l,u){const f=o.length();for(;l>1;){if(s.available()<11)throw new Z;const h=s.readBits(11);o.append(w.toAlphaNumericChar(Math.floor(h/45))),o.append(w.toAlphaNumericChar(h%45)),l-=2}if(1===l){if(s.available()<6)throw new Z;o.append(w.toAlphaNumericChar(s.readBits(6)))}if(u)for(let h=f;h<o.length();h++)"%"===o.charAt(h)&&(h<o.length()-1&&"%"===o.charAt(h+1)?o.deleteCharAt(h+1):o.setCharAt(h,String.fromCharCode(29)))}static decodeNumericSegment(s,o,l){for(;l>=3;){if(s.available()<10)throw new Z;const u=s.readBits(10);if(u>=1e3)throw new Z;o.append(w.toAlphaNumericChar(Math.floor(u/100))),o.append(w.toAlphaNumericChar(Math.floor(u/10)%10)),o.append(w.toAlphaNumericChar(u%10)),l-=3}if(2===l){if(s.available()<7)throw new Z;const u=s.readBits(7);if(u>=100)throw new Z;o.append(w.toAlphaNumericChar(Math.floor(u/10))),o.append(w.toAlphaNumericChar(u%10))}else if(1===l){if(s.available()<4)throw new Z;const u=s.readBits(4);if(u>=10)throw new Z;o.append(w.toAlphaNumericChar(u))}}static parseECIValue(s){const o=s.readBits(8);if(0==(128&o))return 127&o;if(128==(192&o))return(63&o)<<8&4294967295|s.readBits(8);if(192==(224&o))return(31&o)<<16&4294967295|s.readBits(16);throw new Z}}return w.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",w.GB2312_SUBSET=1,w})();class Ln{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||null===i||i.length<3)return;const s=i[0];i[0]=i[2],i[2]=s}}class Nf{constructor(){this.rsDecoder=new Si(Ve.QR_CODE_FIELD_256)}decodeBooleanArray(i,s){return this.decodeBitMatrix(ht.parseFromBooleanArray(i),s)}decodeBitMatrix(i,s){const o=new Fi(i);let l=null;try{return this.decodeBitMatrixParser(o,s)}catch(u){l=u}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const u=this.decodeBitMatrixParser(o,s);return u.setOther(new Ln(!0)),u}catch(u){throw null!==l?l:u}}decodeBitMatrixParser(i,s){const o=i.readVersion(),l=i.readFormatInformation().getErrorCorrectionLevel(),u=i.readCodewords(),f=zt.getDataBlocks(u,o,l);let h=0;for(const E of f)h+=E.getNumDataCodewords();const g=new Uint8Array(h);let x=0;for(const E of f){const D=E.getCodewords(),I=E.getNumDataCodewords();this.correctErrors(D,I);for(let T=0;T<I;T++)g[x++]=D[T]}return Il.decode(g,o,l,s)}correctErrors(i,s){const o=new Int32Array(i);try{this.rsDecoder.decode(o,i.length-s)}catch(l){throw new at}for(let l=0;l<s;l++)i[l]=o[l]}}class Yo extends ee{constructor(i,s,o){super(i,s),this.estimatedModuleSize=o}aboutEquals(i,s,o){if(Math.abs(s-this.getY())<=i&&Math.abs(o-this.getX())<=i){const l=Math.abs(i-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(i,s,o){const l=(this.getX()+s)/2,u=(this.getY()+i)/2;return new Yo(l,u,(this.estimatedModuleSize+o)/2)}}class Bs{constructor(i,s,o,l,u,f,h){this.image=i,this.startX=s,this.startY=o,this.width=l,this.height=u,this.moduleSize=f,this.resultPointCallback=h,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,s=this.height,l=i+this.width,u=this.startY+s/2,f=new Int32Array(3),h=this.image;for(let g=0;g<s;g++){const x=u+(0==(1&g)?Math.floor((g+1)/2):-Math.floor((g+1)/2));f[0]=0,f[1]=0,f[2]=0;let E=i;for(;E<l&&!h.get(E,x);)E++;let D=0;for(;E<l;){if(h.get(E,x))if(1===D)f[1]++;else if(2===D){if(this.foundPatternCross(f)){const I=this.handlePossibleCenter(f,x,E);if(null!==I)return I}f[0]=f[2],f[1]=1,f[2]=0,D=1}else f[++D]++;else 1===D&&D++,f[D]++;E++}if(this.foundPatternCross(f)){const I=this.handlePossibleCenter(f,x,l);if(null!==I)return I}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new V}static centerFromEnd(i,s){return s-i[2]-i[1]/2}foundPatternCross(i){const s=this.moduleSize,o=s/2;for(let l=0;l<3;l++)if(Math.abs(s-i[l])>=o)return!1;return!0}crossCheckVertical(i,s,o,l){const u=this.image,f=u.getHeight(),h=this.crossCheckStateCount;h[0]=0,h[1]=0,h[2]=0;let g=i;for(;g>=0&&u.get(s,g)&&h[1]<=o;)h[1]++,g--;if(g<0||h[1]>o)return NaN;for(;g>=0&&!u.get(s,g)&&h[0]<=o;)h[0]++,g--;if(h[0]>o)return NaN;for(g=i+1;g<f&&u.get(s,g)&&h[1]<=o;)h[1]++,g++;if(g===f||h[1]>o)return NaN;for(;g<f&&!u.get(s,g)&&h[2]<=o;)h[2]++,g++;return h[2]>o||5*Math.abs(h[0]+h[1]+h[2]-l)>=2*l?NaN:this.foundPatternCross(h)?Bs.centerFromEnd(h,g):NaN}handlePossibleCenter(i,s,o){const l=i[0]+i[1]+i[2],u=Bs.centerFromEnd(i,o),f=this.crossCheckVertical(s,u,2*i[1],l);if(!isNaN(f)){const h=(i[0]+i[1]+i[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(h,f,u))return x.combineEstimate(f,u,h);const g=new Yo(u,f,h);this.possibleCenters.push(g),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(g)}return null}}class Xo extends ee{constructor(i,s,o,l){super(i,s),this.estimatedModuleSize=o,this.count=l,void 0===l&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,s,o){if(Math.abs(s-this.getY())<=i&&Math.abs(o-this.getX())<=i){const l=Math.abs(i-this.estimatedModuleSize);return l<=1||l<=this.estimatedModuleSize}return!1}combineEstimate(i,s,o){const l=this.count+1,u=(this.count*this.getX()+s)/l,f=(this.count*this.getY()+i)/l;return new Xo(u,f,(this.count*this.estimatedModuleSize+o)/l,l)}}class _l{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}let Of=(()=>{class w{constructor(s,o){this.image=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const o=null!=s&&void 0!==s.get(et.TRY_HARDER),l=null!=s&&void 0!==s.get(et.PURE_BARCODE),u=this.image,f=u.getHeight(),h=u.getWidth();let g=Math.floor(3*f/(4*w.MAX_MODULES));(g<w.MIN_SKIP||o)&&(g=w.MIN_SKIP);let x=!1;const E=new Int32Array(5);for(let I=g-1;I<f&&!x;I+=g){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let T=0;for(let S=0;S<h;S++)if(u.get(S,I))1==(1&T)&&T++,E[T]++;else if(0==(1&T))if(4===T)if(w.foundPatternCross(E)){if(!0!==this.handlePossibleCenter(E,I,S,l)){E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,T=3;continue}if(g=2,!0===this.hasSkipped)x=this.haveMultiplyConfirmedCenters();else{const R=this.findRowSkip();R>E[2]&&(I+=R-E[2]-g,S=h-1)}T=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,T=3;else E[++T]++;else E[T]++;w.foundPatternCross(E)&&!0===this.handlePossibleCenter(E,I,h,l)&&(g=E[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const D=this.selectBestPatterns();return ee.orderBestPatterns(D),new _l(D)}static centerFromEnd(s,o){return o-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let o=0;for(let f=0;f<5;f++){const h=s[f];if(0===h)return!1;o+=h}if(o<7)return!1;const l=o/7,u=l/2;return Math.abs(l-s[0])<u&&Math.abs(l-s[1])<u&&Math.abs(3*l-s[2])<3*u&&Math.abs(l-s[3])<u&&Math.abs(l-s[4])<u}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,o,l,u){const f=this.getCrossCheckStateCount();let h=0;const g=this.image;for(;s>=h&&o>=h&&g.get(o-h,s-h);)f[2]++,h++;if(s<h||o<h)return!1;for(;s>=h&&o>=h&&!g.get(o-h,s-h)&&f[1]<=l;)f[1]++,h++;if(s<h||o<h||f[1]>l)return!1;for(;s>=h&&o>=h&&g.get(o-h,s-h)&&f[0]<=l;)f[0]++,h++;if(f[0]>l)return!1;const x=g.getHeight(),E=g.getWidth();for(h=1;s+h<x&&o+h<E&&g.get(o+h,s+h);)f[2]++,h++;if(s+h>=x||o+h>=E)return!1;for(;s+h<x&&o+h<E&&!g.get(o+h,s+h)&&f[3]<l;)f[3]++,h++;if(s+h>=x||o+h>=E||f[3]>=l)return!1;for(;s+h<x&&o+h<E&&g.get(o+h,s+h)&&f[4]<l;)f[4]++,h++;return!(f[4]>=l)&&Math.abs(f[0]+f[1]+f[2]+f[3]+f[4]-u)<2*u&&w.foundPatternCross(f)}crossCheckVertical(s,o,l,u){const f=this.image,h=f.getHeight(),g=this.getCrossCheckStateCount();let x=s;for(;x>=0&&f.get(o,x);)g[2]++,x--;if(x<0)return NaN;for(;x>=0&&!f.get(o,x)&&g[1]<=l;)g[1]++,x--;if(x<0||g[1]>l)return NaN;for(;x>=0&&f.get(o,x)&&g[0]<=l;)g[0]++,x--;if(g[0]>l)return NaN;for(x=s+1;x<h&&f.get(o,x);)g[2]++,x++;if(x===h)return NaN;for(;x<h&&!f.get(o,x)&&g[3]<l;)g[3]++,x++;if(x===h||g[3]>=l)return NaN;for(;x<h&&f.get(o,x)&&g[4]<l;)g[4]++,x++;return g[4]>=l||5*Math.abs(g[0]+g[1]+g[2]+g[3]+g[4]-u)>=2*u?NaN:w.foundPatternCross(g)?w.centerFromEnd(g,x):NaN}crossCheckHorizontal(s,o,l,u){const f=this.image,h=f.getWidth(),g=this.getCrossCheckStateCount();let x=s;for(;x>=0&&f.get(x,o);)g[2]++,x--;if(x<0)return NaN;for(;x>=0&&!f.get(x,o)&&g[1]<=l;)g[1]++,x--;if(x<0||g[1]>l)return NaN;for(;x>=0&&f.get(x,o)&&g[0]<=l;)g[0]++,x--;if(g[0]>l)return NaN;for(x=s+1;x<h&&f.get(x,o);)g[2]++,x++;if(x===h)return NaN;for(;x<h&&!f.get(x,o)&&g[3]<l;)g[3]++,x++;if(x===h||g[3]>=l)return NaN;for(;x<h&&f.get(x,o)&&g[4]<l;)g[4]++,x++;return g[4]>=l||5*Math.abs(g[0]+g[1]+g[2]+g[3]+g[4]-u)>=u?NaN:w.foundPatternCross(g)?w.centerFromEnd(g,x):NaN}handlePossibleCenter(s,o,l,u){const f=s[0]+s[1]+s[2]+s[3]+s[4];let h=w.centerFromEnd(s,l),g=this.crossCheckVertical(o,Math.floor(h),s[2],f);if(!isNaN(g)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(g),s[2],f),!isNaN(h)&&(!u||this.crossCheckDiagonal(Math.floor(g),Math.floor(h),s[2],f)))){const x=f/7;let E=!1;const D=this.possibleCenters;for(let I=0,T=D.length;I<T;I++){const S=D[I];if(S.aboutEquals(x,g,h)){D[I]=S.combineEstimate(g,h,x),E=!0;break}}if(!E){const I=new Xo(h,g,x);D.push(I),null!=this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(I)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=w.CENTER_QUORUM){if(null!=o)return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);o=l}return 0}haveMultiplyConfirmedCenters(){let s=0,o=0;const l=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=w.CENTER_QUORUM&&(s++,o+=h.getEstimatedModuleSize());if(s<3)return!1;const u=o/l;let f=0;for(const h of this.possibleCenters)f+=Math.abs(h.getEstimatedModuleSize()-u);return f<=.05*o}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new V;const o=this.possibleCenters;let l;if(s>3){let u=0,f=0;for(const x of this.possibleCenters){const E=x.getEstimatedModuleSize();u+=E,f+=E*E}l=u/s;let h=Math.sqrt(f/s-l*l);o.sort((x,E)=>{const D=Math.abs(E.getEstimatedModuleSize()-l),I=Math.abs(x.getEstimatedModuleSize()-l);return D<I?-1:D>I?1:0});const g=Math.max(.2*l,h);for(let x=0;x<o.length&&o.length>3;x++)Math.abs(o[x].getEstimatedModuleSize()-l)>g&&(o.splice(x,1),x--)}if(o.length>3){let u=0;for(const f of o)u+=f.getEstimatedModuleSize();l=u/o.length,o.sort((f,h)=>{if(h.getCount()===f.getCount()){const g=Math.abs(h.getEstimatedModuleSize()-l),x=Math.abs(f.getEstimatedModuleSize()-l);return g<x?1:g>x?-1:0}return h.getCount()-f.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}return w.CENTER_QUORUM=2,w.MIN_SKIP=3,w.MAX_MODULES=57,w})();class mi{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=null==i?null:i.get(et.NEED_RESULT_POINT_CALLBACK);const o=new Of(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(o)}processFinderPatternInfo(i){const s=i.getTopLeft(),o=i.getTopRight(),l=i.getBottomLeft(),u=this.calculateModuleSize(s,o,l);if(u<1)throw new V("No pattern found in proccess finder.");const f=mi.computeDimension(s,o,l,u),h=se.getProvisionalVersionForDimension(f),g=h.getDimensionForVersion()-7;let x=null;if(h.getAlignmentPatternCenters().length>0){const T=o.getX()-s.getX()+l.getX(),S=o.getY()-s.getY()+l.getY(),M=1-3/g,R=Math.floor(s.getX()+M*(T-s.getX())),L=Math.floor(s.getY()+M*(S-s.getY()));for(let U=4;U<=16;U<<=1)try{x=this.findAlignmentInRegion(u,R,L,U);break}catch(q){if(!(q instanceof V))throw q}}const E=mi.createTransform(s,o,l,x,f),D=mi.sampleGrid(this.image,E,f);let I;return I=null===x?[l,s,o]:[l,s,o,x],new vs(D,I)}static createTransform(i,s,o,l,u){const f=u-3.5;let h,g,x,E;return null!==l?(h=l.getX(),g=l.getY(),x=f-3,E=x):(h=s.getX()-i.getX()+o.getX(),g=s.getY()-i.getY()+o.getY(),x=f,E=f),Mn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,x,E,3.5,f,i.getX(),i.getY(),s.getX(),s.getY(),h,g,o.getX(),o.getY())}static sampleGrid(i,s,o){return Qt.getInstance().sampleGridWithTransform(i,o,o,s)}static computeDimension(i,s,o,l){const u=Re.round(ee.distance(i,s)/l),f=Re.round(ee.distance(i,o)/l);let h=Math.floor((u+f)/2)+7;switch(3&h){case 0:h++;break;case 2:h--;break;case 3:throw new V("Dimensions could be not found.")}return h}calculateModuleSize(i,s,o){return(this.calculateModuleSizeOneWay(i,s)+this.calculateModuleSizeOneWay(i,o))/2}calculateModuleSizeOneWay(i,s){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(s.getX()),Math.floor(s.getY())),l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(o)?l/7:isNaN(l)?o/7:(o+l)/14}sizeOfBlackWhiteBlackRunBothWays(i,s,o,l){let u=this.sizeOfBlackWhiteBlackRun(i,s,o,l),f=1,h=i-(o-i);h<0?(f=i/(i-h),h=0):h>=this.image.getWidth()&&(f=(this.image.getWidth()-1-i)/(h-i),h=this.image.getWidth()-1);let g=Math.floor(s-(l-s)*f);return f=1,g<0?(f=s/(s-g),g=0):g>=this.image.getHeight()&&(f=(this.image.getHeight()-1-s)/(g-s),g=this.image.getHeight()-1),h=Math.floor(i+(h-i)*f),u+=this.sizeOfBlackWhiteBlackRun(i,s,h,g),u-1}sizeOfBlackWhiteBlackRun(i,s,o,l){const u=Math.abs(l-s)>Math.abs(o-i);if(u){let T=i;i=s,s=T,T=o,o=l,l=T}const f=Math.abs(o-i),h=Math.abs(l-s);let g=-f/2;const x=i<o?1:-1,E=s<l?1:-1;let D=0;const I=o+x;for(let T=i,S=s;T!==I;T+=x){if(1===D===this.image.get(u?S:T,u?T:S)){if(2===D)return Re.distance(T,S,i,s);D++}if(g+=h,g>0){if(S===l)break;S+=E,g-=f}}return 2===D?Re.distance(o+x,l,i,s):NaN}findAlignmentInRegion(i,s,o,l){const u=Math.floor(l*i),f=Math.max(0,s-u),h=Math.min(this.image.getWidth()-1,s+u);if(h-f<3*i)throw new V("Alignment top exceeds estimated module size.");const g=Math.max(0,o-u),x=Math.min(this.image.getHeight()-1,o+u);if(x-g<3*i)throw new V("Alignment bottom exceeds estimated module size.");return new Bs(this.image,f,g,h-f,x-g,i,this.resultPointCallback).find()}}class Nr{constructor(){this.decoder=new Nf}getDecoder(){return this.decoder}decode(i,s){let o,l;if(null!=s&&void 0!==s.get(et.PURE_BARCODE)){const g=Nr.extractPureBits(i.getBlackMatrix());o=this.decoder.decodeBitMatrix(g,s),l=Nr.NO_POINTS}else{const g=new mi(i.getBlackMatrix()).detect(s);o=this.decoder.decodeBitMatrix(g.getBits(),s),l=g.getPoints()}o.getOther()instanceof Ln&&o.getOther().applyMirroredCorrection(l);const u=new Ht(o.getText(),o.getRawBytes(),void 0,l,ae.QR_CODE,void 0),f=o.getByteSegments();null!==f&&u.putMetadata(st.BYTE_SEGMENTS,f);const h=o.getECLevel();return null!==h&&u.putMetadata(st.ERROR_CORRECTION_LEVEL,h),o.hasStructuredAppend()&&(u.putMetadata(st.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),u.putMetadata(st.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),u}reset(){}static extractPureBits(i){const s=i.getTopLeftOnBit(),o=i.getBottomRightOnBit();if(null===s||null===o)throw new V;const l=this.moduleSize(s,i);let u=s[1],f=o[1],h=s[0],g=o[0];if(h>=g||u>=f)throw new V;if(f-u!=g-h&&(g=h+(f-u),g>=i.getWidth()))throw new V;const x=Math.round((g-h+1)/l),E=Math.round((f-u+1)/l);if(x<=0||E<=0)throw new V;if(E!==x)throw new V;const D=Math.floor(l/2);u+=D,h+=D;const I=h+Math.floor((x-1)*l)-g;if(I>0){if(I>D)throw new V;h-=I}const T=u+Math.floor((E-1)*l)-f;if(T>0){if(T>D)throw new V;u-=T}const S=new ht(x,E);for(let M=0;M<E;M++){const R=u+Math.floor(M*l);for(let L=0;L<x;L++)i.get(h+Math.floor(L*l),R)&&S.set(L,M)}return S}static moduleSize(i,s){const o=s.getHeight(),l=s.getWidth();let u=i[0],f=i[1],h=!0,g=0;for(;u<l&&f<o;){if(h!==s.get(u,f)){if(5==++g)break;h=!h}u++,f++}if(u===l||f===o)throw new V;return(u-i[0])/7}}Nr.NO_POINTS=new Array;class ne{PDF417Common(){}static getBitCountSum(i){return Re.sum(i)}static toIntArray(i){if(null==i||!i.length)return ne.EMPTY_INT_ARRAY;const s=new Int32Array(i.length);let o=0;for(const l of i)s[o++]=l;return s}static getCodeword(i){const s=Ct.binarySearch(ne.SYMBOL_TABLE,262143&i);return s<0?-1:(ne.CODEWORD_TABLE[s]-1)%ne.NUMBER_OF_CODEWORDS}}ne.NUMBER_OF_CODEWORDS=929,ne.MAX_CODEWORDS_IN_BARCODE=ne.NUMBER_OF_CODEWORDS-1,ne.MIN_ROWS_IN_BARCODE=3,ne.MAX_ROWS_IN_BARCODE=90,ne.MODULES_IN_CODEWORD=17,ne.MODULES_IN_STOP_PATTERN=18,ne.BARS_IN_MODULE=8,ne.EMPTY_INT_ARRAY=new Int32Array([]),ne.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ne.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ke{constructor(i,s){this.bits=i,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Ae{static detectMultiple(i,s,o){let l=i.getBlackMatrix(),u=Ae.detect(o,l);return u.length||(l=l.clone(),l.rotate180(),u=Ae.detect(o,l)),new Ke(l,u)}static detect(i,s){const o=new Array;let l=0,u=0,f=!1;for(;l<s.getHeight();){const h=Ae.findVertices(s,l,u);if(null!=h[0]||null!=h[3]){if(f=!0,o.push(h),!i)break;null!=h[2]?(u=Math.trunc(h[2].getX()),l=Math.trunc(h[2].getY())):(u=Math.trunc(h[4].getX()),l=Math.trunc(h[4].getY()))}else{if(!f)break;f=!1,u=0;for(const g of o)null!=g[1]&&(l=Math.trunc(Math.max(l,g[1].getY()))),null!=g[3]&&(l=Math.max(l,Math.trunc(g[3].getY())));l+=Ae.ROW_STEP}}return o}static findVertices(i,s,o){const l=i.getHeight(),u=i.getWidth(),f=new Array(8);return Ae.copyToResult(f,Ae.findRowsWithPattern(i,l,u,s,o,Ae.START_PATTERN),Ae.INDEXES_START_PATTERN),null!=f[4]&&(o=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY())),Ae.copyToResult(f,Ae.findRowsWithPattern(i,l,u,s,o,Ae.STOP_PATTERN),Ae.INDEXES_STOP_PATTERN),f}static copyToResult(i,s,o){for(let l=0;l<o.length;l++)i[o[l]]=s[l]}static findRowsWithPattern(i,s,o,l,u,f){const h=new Array(4);let g=!1;const x=new Int32Array(f.length);for(;l<s;l+=Ae.ROW_STEP){let D=Ae.findGuardPattern(i,u,l,o,!1,f,x);if(null!=D){for(;l>0;){const I=Ae.findGuardPattern(i,u,--l,o,!1,f,x);if(null==I){l++;break}D=I}h[0]=new ee(D[0],l),h[1]=new ee(D[1],l),g=!0;break}}let E=l+1;if(g){let D=0,I=Int32Array.from([Math.trunc(h[0].getX()),Math.trunc(h[1].getX())]);for(;E<s;E++){const T=Ae.findGuardPattern(i,I[0],E,o,!1,f,x);if(null!=T&&Math.abs(I[0]-T[0])<Ae.MAX_PATTERN_DRIFT&&Math.abs(I[1]-T[1])<Ae.MAX_PATTERN_DRIFT)I=T,D=0;else{if(D>Ae.SKIPPED_ROW_COUNT_MAX)break;D++}}E-=D+1,h[2]=new ee(I[0],E),h[3]=new ee(I[1],E)}return E-l<Ae.BARCODE_MIN_HEIGHT&&Ct.fill(h,null),h}static findGuardPattern(i,s,o,l,u,f,h){Ct.fillWithin(h,0,h.length,0);let g=s,x=0;for(;i.get(g,o)&&g>0&&x++<Ae.MAX_PIXEL_DRIFT;)g--;let E=g,D=0,I=f.length;for(let T=u;E<l;E++)if(i.get(E,o)!==T)h[D]++;else{if(D===I-1){if(Ae.patternMatchVariance(h,f,Ae.MAX_INDIVIDUAL_VARIANCE)<Ae.MAX_AVG_VARIANCE)return new Int32Array([g,E]);g+=h[0]+h[1],Ge.arraycopy(h,2,h,0,D-1),h[D-1]=0,h[D]=0,D--}else D++;h[D]=1,T=!T}return D===I-1&&Ae.patternMatchVariance(h,f,Ae.MAX_INDIVIDUAL_VARIANCE)<Ae.MAX_AVG_VARIANCE?new Int32Array([g,E-1]):null}static patternMatchVariance(i,s,o){let l=i.length,u=0,f=0;for(let x=0;x<l;x++)u+=i[x],f+=s[x];if(u<f)return 1/0;let h=u/f;o*=h;let g=0;for(let x=0;x<l;x++){let E=i[x],D=s[x]*h,I=E>D?E-D:D-E;if(I>o)return 1/0;g+=I}return g/u}}Ae.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ae.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ae.MAX_AVG_VARIANCE=.42,Ae.MAX_INDIVIDUAL_VARIANCE=.8,Ae.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ae.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ae.MAX_PIXEL_DRIFT=3,Ae.MAX_PATTERN_DRIFT=5,Ae.SKIPPED_ROW_COUNT_MAX=25,Ae.ROW_STEP=5,Ae.BARCODE_MIN_HEIGHT=10;class kt{constructor(i,s){if(0===s.length)throw new te;this.field=i;let o=s.length;if(o>1&&0===s[0]){let l=1;for(;l<o&&0===s[l];)l++;l===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-l),Ge.arraycopy(s,l,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(0===i)return this.getCoefficient(0);if(1===i){let l=0;for(let u of this.coefficients)l=this.field.add(l,u);return l}let s=this.coefficients[0],o=this.coefficients.length;for(let l=1;l<o;l++)s=this.field.add(this.field.multiply(i,s),this.coefficients[l]);return s}add(i){if(!this.field.equals(i.field))throw new te("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let s=this.coefficients,o=i.coefficients;if(s.length>o.length){let f=s;s=o,o=f}let l=new Int32Array(o.length),u=o.length-s.length;Ge.arraycopy(o,0,l,0,u);for(let f=u;f<o.length;f++)l[f]=this.field.add(s[f-u],o[f]);return new kt(this.field,l)}subtract(i){if(!this.field.equals(i.field))throw new te("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof kt?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new te("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new kt(this.field,new Int32Array([0]));let s=this.coefficients,o=s.length,l=i.coefficients,u=l.length,f=new Int32Array(o+u-1);for(let h=0;h<o;h++){let g=s[h];for(let x=0;x<u;x++)f[h+x]=this.field.add(f[h+x],this.field.multiply(g,l[x]))}return new kt(this.field,f)}negative(){let i=this.coefficients.length,s=new Int32Array(i);for(let o=0;o<i;o++)s[o]=this.field.subtract(0,this.coefficients[o]);return new kt(this.field,s)}multiplyScalar(i){if(0===i)return new kt(this.field,new Int32Array([0]));if(1===i)return this;let s=this.coefficients.length,o=new Int32Array(s);for(let l=0;l<s;l++)o[l]=this.field.multiply(this.coefficients[l],i);return new kt(this.field,o)}multiplyByMonomial(i,s){if(i<0)throw new te;if(0===s)return new kt(this.field,new Int32Array([0]));let o=this.coefficients.length,l=new Int32Array(o+i);for(let u=0;u<o;u++)l[u]=this.field.multiply(this.coefficients[u],s);return new kt(this.field,l)}toString(){let i=new je;for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);0!==o&&(o<0?(i.append(" - "),o=-o):i.length()>0&&i.append(" + "),(0===s||1!==o)&&i.append(o),0!==s&&(1===s?i.append("x"):(i.append("x^"),i.append(s))))}return i.toString()}}class $e extends class Rf{add(i,s){return(i+s)%this.modulus}subtract(i,s){return(this.modulus+i-s)%this.modulus}exp(i){return this.expTable[i]}log(i){if(0===i)throw new te;return this.logTable[i]}inverse(i){if(0===i)throw new di;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,s){return 0===i||0===s?0:this.expTable[(this.logTable[i]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}{constructor(i,s){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let o=1;for(let l=0;l<i;l++)this.expTable[l]=o,o=o*s%i;for(let l=0;l<i-1;l++)this.logTable[this.expTable[l]]=l;this.zero=new kt(this,new Int32Array([0])),this.one=new kt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,s){if(i<0)throw new te;if(0===s)return this.zero;let o=new Int32Array(i+1);return o[0]=s,new kt(this,o)}}$e.PDF417_GF=new $e(ne.NUMBER_OF_CODEWORDS,3);class Tl{constructor(){this.field=$e.PDF417_GF}decode(i,s,o){let l=new kt(this.field,i),u=new Int32Array(s),f=!1;for(let S=s;S>0;S--){let M=l.evaluateAt(this.field.exp(S));u[s-S]=M,0!==M&&(f=!0)}if(!f)return 0;let h=this.field.getOne();if(null!=o)for(const S of o){let M=this.field.exp(i.length-1-S),R=new kt(this.field,new Int32Array([this.field.subtract(0,M),1]));h=h.multiply(R)}let g=new kt(this.field,u),x=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),g,s),E=x[0],D=x[1],I=this.findErrorLocations(E),T=this.findErrorMagnitudes(D,E,I);for(let S=0;S<I.length;S++){let M=i.length-1-this.field.log(I[S]);if(M<0)throw at.getChecksumInstance();i[M]=this.field.subtract(i[M],T[S])}return I.length}runEuclideanAlgorithm(i,s,o){if(i.getDegree()<s.getDegree()){let I=i;i=s,s=I}let l=i,u=s,f=this.field.getZero(),h=this.field.getOne();for(;u.getDegree()>=Math.round(o/2);){let I=l,T=f;if(l=u,f=h,l.isZero())throw at.getChecksumInstance();u=I;let S=this.field.getZero(),M=l.getCoefficient(l.getDegree()),R=this.field.inverse(M);for(;u.getDegree()>=l.getDegree()&&!u.isZero();){let L=u.getDegree()-l.getDegree(),U=this.field.multiply(u.getCoefficient(u.getDegree()),R);S=S.add(this.field.buildMonomial(L,U)),u=u.subtract(l.multiplyByMonomial(L,U))}h=S.multiply(f).subtract(T).negative()}let g=h.getCoefficient(0);if(0===g)throw at.getChecksumInstance();let x=this.field.inverse(g);return[h.multiply(x),u.multiply(x)]}findErrorLocations(i){let s=i.getDegree(),o=new Int32Array(s),l=0;for(let u=1;u<this.field.getSize()&&l<s;u++)0===i.evaluateAt(u)&&(o[l]=this.field.inverse(u),l++);if(l!==s)throw at.getChecksumInstance();return o}findErrorMagnitudes(i,s,o){let l=s.getDegree(),u=new Int32Array(l);for(let x=1;x<=l;x++)u[l-x]=this.field.multiply(x,s.getCoefficient(x));let f=new kt(this.field,u),h=o.length,g=new Int32Array(h);for(let x=0;x<h;x++){let E=this.field.inverse(o[x]),D=this.field.subtract(0,i.evaluateAt(E)),I=this.field.inverse(f.evaluateAt(E));g[x]=this.field.multiply(D,I)}return g}}class gn{constructor(i,s,o,l,u){i instanceof gn?this.constructor_2(i):this.constructor_1(i,s,o,l,u)}constructor_1(i,s,o,l,u){const f=null==s||null==o,h=null==l||null==u;if(f&&h)throw new V;f?(s=new ee(0,l.getY()),o=new ee(0,u.getY())):h&&(l=new ee(i.getWidth()-1,s.getY()),u=new ee(i.getWidth()-1,o.getY())),this.image=i,this.topLeft=s,this.bottomLeft=o,this.topRight=l,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),o.getX())),this.maxX=Math.trunc(Math.max(l.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),l.getY())),this.maxY=Math.trunc(Math.max(o.getY(),u.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,s){return null==i?s:null==s?i:new gn(i.image,i.topLeft,i.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(i,s,o){let l=this.topLeft,u=this.bottomLeft,f=this.topRight,h=this.bottomRight;if(i>0){let g=o?this.topLeft:this.topRight,x=Math.trunc(g.getY()-i);x<0&&(x=0);let E=new ee(g.getX(),x);o?l=E:f=E}if(s>0){let g=o?this.bottomLeft:this.bottomRight,x=Math.trunc(g.getY()+s);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let E=new ee(g.getX(),x);o?u=E:h=E}return new gn(this.image,l,u,f,h)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ks{constructor(i,s,o,l){this.columnCount=i,this.errorCorrectionLevel=l,this.rowCountUpperPart=s,this.rowCountLowerPart=o,this.rowCount=s+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class $r{constructor(){this.buffer=""}static form(i,s){let o=-1;return i.replace(/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g,function l(f,h,g,x,E,D){if("%%"===f)return"%";if(void 0===s[++o])return;f=x?parseInt(x.substr(1)):void 0;let T,I=E?parseInt(E.substr(1)):void 0;switch(D){case"s":T=s[o];break;case"c":T=s[o][0];break;case"f":T=parseFloat(s[o]).toFixed(f);break;case"p":T=parseFloat(s[o]).toPrecision(f);break;case"e":T=parseFloat(s[o]).toExponential(f);break;case"x":T=parseInt(s[o]).toString(I||16);break;case"d":T=parseFloat(parseInt(s[o],I||10).toPrecision(f)).toFixed(0)}T="object"==typeof T?JSON.stringify(T):(+T).toString(I);let S=parseInt(g),M=g&&g[0]+""=="0"?"0":" ";for(;T.length<S;)T=void 0!==h?T+M:M+T;return T})}format(i,...s){this.buffer+=$r.form(i,s)}toString(){return this.buffer}}let Zo=(()=>{class w{constructor(s){this.boundingBox=new gn(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let o=this.getCodeword(s);if(null!=o)return o;for(let l=1;l<w.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(s)-l;if(u>=0&&(o=this.codewords[u],null!=o)||(u=this.imageRowToCodewordIndex(s)+l,u<this.codewords.length&&(o=this.codewords[u],null!=o)))return o}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,o){this.codewords[this.imageRowToCodewordIndex(s)]=o}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new $r;let o=0;for(const l of this.codewords)null!=l?s.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue()):s.format("%3d:    |   %n",o++);return s.toString()}}return w.MAX_NEARBY_DISTANCE=5,w})();class xi{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let s=this.values.get(i);null==s&&(s=0),s++,this.values.set(i,s)}getValue(){let i=-1,s=new Array;for(const[o,l]of this.values.entries()){const u={getKey:()=>o,getValue:()=>l};u.getValue()>i?(i=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===i&&s.push(u.getKey())}return ne.toIntArray(s)}getConfidence(i){return this.values.get(i)}}class Vs extends Zo{constructor(i,s){super(i),this._isLeft=s}setRowNumbers(){for(let i of this.getCodewords())null!=i&&i.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,i);let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.imageRowToCodewordIndex(Math.trunc(u.getY())),g=-1,x=1,E=0;for(let D=f;D<h;D++){if(null==s[D])continue;let I=s[D],T=I.getRowNumber()-g;if(0===T)E++;else if(1===T)x=Math.max(x,E),E=1,g=I.getRowNumber();else if(T<0||I.getRowNumber()>=i.getRowCount()||T>D)s[D]=null;else{let S;S=x>2?(x-2)*T:T;let M=S>=D;for(let R=1;R<=S&&!M;R++)M=null!=s[D-R];M?s[D]=null:(g=I.getRowNumber(),E=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(null==i)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let s=new Int32Array(i.getRowCount());for(let o of this.getCodewords())if(null!=o){let l=o.getRowNumber();if(l>=s.length)continue;s[l]++}return s}adjustIncompleteIndicatorColumnRowNumbers(i){let s=this.getBoundingBox(),o=this._isLeft?s.getTopLeft():s.getTopRight(),l=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=this.getCodewords(),g=-1;for(let x=u;x<f;x++){if(null==h[x])continue;let E=h[x];E.setRowNumberAsRowIndicatorColumn();let D=E.getRowNumber()-g;0===D||(1===D?g=E.getRowNumber():E.getRowNumber()>=i.getRowCount()?h[x]=null:g=E.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),s=new xi,o=new xi,l=new xi,u=new xi;for(let h of i){if(null==h)continue;h.setRowNumberAsRowIndicatorColumn();let g=h.getValue()%30,x=h.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:o.setValue(3*g+1);break;case 1:u.setValue(g/3),l.setValue(g%3);break;case 2:s.setValue(g+1)}}if(0===s.getValue().length||0===o.getValue().length||0===l.getValue().length||0===u.getValue().length||s.getValue()[0]<1||o.getValue()[0]+l.getValue()[0]<ne.MIN_ROWS_IN_BARCODE||o.getValue()[0]+l.getValue()[0]>ne.MAX_ROWS_IN_BARCODE)return null;let f=new ks(s.getValue()[0],o.getValue()[0],l.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(i,f),f}removeIncorrectCodewords(i,s){for(let o=0;o<i.length;o++){let l=i[o];if(null==i[o])continue;let u=l.getValue()%30,f=l.getRowNumber();if(f>s.getRowCount())i[o]=null;else switch(this._isLeft||(f+=2),f%3){case 0:3*u+1!==s.getRowCountUpperPart()&&(i[o]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(i[o]=null);break;case 2:u+1!==s.getColumnCount()&&(i[o]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class cr{constructor(i,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s,i=ne.MAX_CODEWORDS_IN_BARCODE;do{s=i,i=this.adjustRowNumbersAndGetCount()}while(i>0&&i<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){null!=i&&i.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(0===i)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let o=this.detectionResultColumns[s].getCodewords();for(let l=0;l<o.length;l++)null!=o[l]&&(o[l].hasValidRowNumber()||this.adjustRowNumbers(s,l,o))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let i=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<i.length;o++)if(null!=i[o]&&null!=s[o]&&i[o].getRowNumber()===s[o].getRowNumber())for(let l=1;l<=this.barcodeColumnCount;l++){let u=this.detectionResultColumns[l].getCodewords()[o];null!=u&&(u.setRowNumber(i[o].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[l].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let i=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<s.length;o++){if(null==s[o])continue;let l=s[o].getRowNumber(),u=0;for(let f=this.barcodeColumnCount+1;f>0&&u<this.ADJUST_ROW_NUMBER_SKIP;f--){let h=this.detectionResultColumns[f].getCodewords()[o];null!=h&&(u=cr.adjustRowNumberIfValid(l,u,h),h.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let i=0,s=this.detectionResultColumns[0].getCodewords();for(let o=0;o<s.length;o++){if(null==s[o])continue;let l=s[o].getRowNumber(),u=0;for(let f=1;f<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;f++){let h=this.detectionResultColumns[f].getCodewords()[o];null!=h&&(u=cr.adjustRowNumberIfValid(l,u,h),h.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,s,o){return null==o||o.hasValidRowNumber()||(o.isValidRowNumber(i)?(o.setRowNumber(i),s=0):++s),s}adjustRowNumbers(i,s,o){let l=o[s],u=this.detectionResultColumns[i-1].getCodewords(),f=u;null!=this.detectionResultColumns[i+1]&&(f=this.detectionResultColumns[i+1].getCodewords());let h=new Array(14);h[2]=u[s],h[3]=f[s],s>0&&(h[0]=o[s-1],h[4]=u[s-1],h[5]=f[s-1]),s>1&&(h[8]=o[s-2],h[10]=u[s-2],h[11]=f[s-2]),s<o.length-1&&(h[1]=o[s+1],h[6]=u[s+1],h[7]=f[s+1]),s<o.length-2&&(h[9]=o[s+2],h[12]=u[s+2],h[13]=f[s+2]);for(let g of h)if(cr.adjustRowNumber(l,g))return}static adjustRowNumber(i,s){return!(null==s||!s.hasValidRowNumber()||s.getBucket()!==i.getBucket()||(i.setRowNumber(s.getRowNumber()),0))}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,s){this.detectionResultColumns[i]=s}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];null==i&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new $r;for(let o=0;o<i.getCodewords().length;o++){s.format("CW %3d:",o);for(let l=0;l<this.barcodeColumnCount+2;l++){if(null==this.detectionResultColumns[l]){s.format("    |   ");continue}let u=this.detectionResultColumns[l].getCodewords()[o];null!=u?s.format(" %3d|%3d",u.getRowNumber(),u.getValue()):s.format("    |   ")}s.format("%n")}return s.toString()}}let Us=(()=>{class w{constructor(s,o,l,u){this.rowNumber=w.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==w.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}return w.BARCODE_ROW_UNKNOWN=-1,w})();class Wt{static initialize(){for(let i=0;i<ne.SYMBOL_TABLE.length;i++){let s=ne.SYMBOL_TABLE[i],o=1&s;for(let l=0;l<ne.BARS_IN_MODULE;l++){let u=0;for(;(1&s)===o;)u+=1,s>>=1;o=1&s,Wt.RATIOS_TABLE[i]||(Wt.RATIOS_TABLE[i]=new Array(ne.BARS_IN_MODULE)),Wt.RATIOS_TABLE[i][ne.BARS_IN_MODULE-l-1]=Math.fround(u/ne.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let s=Wt.getDecodedCodewordValue(Wt.sampleBitCounts(i));return-1!==s?s:Wt.getClosestDecodedValue(i)}static sampleBitCounts(i){let s=Re.sum(i),o=new Int32Array(ne.BARS_IN_MODULE),l=0,u=0;for(let f=0;f<ne.MODULES_IN_CODEWORD;f++)u+i[l]<=s/(2*ne.MODULES_IN_CODEWORD)+f*s/ne.MODULES_IN_CODEWORD&&(u+=i[l],l++),o[l]++;return o}static getDecodedCodewordValue(i){let s=Wt.getBitValue(i);return-1===ne.getCodeword(s)?-1:s}static getBitValue(i){let s=0;for(let o=0;o<i.length;o++)for(let l=0;l<i[o];l++)s=s<<1|(o%2==0?1:0);return Math.trunc(s)}static getClosestDecodedValue(i){let s=Re.sum(i),o=new Array(ne.BARS_IN_MODULE);if(s>1)for(let f=0;f<o.length;f++)o[f]=Math.fround(i[f]/s);let l=Ss.MAX_VALUE,u=-1;this.bSymbolTableReady||Wt.initialize();for(let f=0;f<Wt.RATIOS_TABLE.length;f++){let h=0,g=Wt.RATIOS_TABLE[f];for(let x=0;x<ne.BARS_IN_MODULE;x++){let E=Math.fround(g[x]-o[x]);if(h+=Math.fround(E*E),h>=l)break}h<l&&(l=h,u=ne.SYMBOL_TABLE[f])}return u}}Wt.bSymbolTableReady=!1,Wt.RATIOS_TABLE=new Array(ne.SYMBOL_TABLE.length).map(w=>new Array(ne.BARS_IN_MODULE));class Qo{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class me{static parseLong(i,s){return parseInt(i,s)}}let js=(()=>{class w extends Bt{}return w.kind="NullPointerException",w})();class ur extends Bt{}class qo extends class bl{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,s,o){if(null==i)throw new js;if(s<0||s>i.length||o<0||s+o>i.length||s+o<0)throw new Ts;if(0!==o)for(let l=0;l<o;l++)this.write(i[s+l])}flush(){}close(){}}{constructor(i=32){if(super(),this.count=0,i<0)throw new te("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let o=this.buf.length<<1;if(o-i<0&&(o=i),o<0){if(i<0)throw new ur;o=Ce.MAX_VALUE}this.buf=Ct.copyOfUint8Array(this.buf,o)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,s,o){if(s<0||s>i.length||o<0||s+o-i.length>0)throw new Ts;this.ensureCapacity(this.count+o),Ge.arraycopy(i,s,this.buf,this.count,o),this.count+=o}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return Ct.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?"string"==typeof i?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var ze=(()=>{return(w=ze||(ze={}))[w.ALPHA=0]="ALPHA",w[w.LOWER=1]="LOWER",w[w.MIXED=2]="MIXED",w[w.PUNCT=3]="PUNCT",w[w.ALPHA_SHIFT=4]="ALPHA_SHIFT",w[w.PUNCT_SHIFT=5]="PUNCT_SHIFT",ze;var w})();function Yn(){if("undefined"!=typeof window)return window.BigInt||null;if("undefined"!=typeof global)return global.BigInt||null;if("undefined"!=typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let qt;function Or(w){if(void 0===qt&&(qt=Yn()),null===qt)throw new Error("BigInt is not supported!");return qt(w)}class F{static decode(i,s){let o=new je(""),l=Y.ISO8859_1;o.enableDecoding(l);let u=1,f=i[u++],h=new Qo;for(;u<i[0];){switch(f){case F.TEXT_COMPACTION_MODE_LATCH:u=F.textCompaction(i,u,o);break;case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:u=F.byteCompaction(f,i,l,u,o);break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(i[u++]);break;case F.NUMERIC_COMPACTION_MODE_LATCH:u=F.numericCompaction(i,u,o);break;case F.ECI_CHARSET:Y.getCharacterSetECIByValue(i[u++]);break;case F.ECI_GENERAL_PURPOSE:u+=2;break;case F.ECI_USER_DEFINED:u++;break;case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=F.decodeMacroBlock(i,u,h);break;case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:throw new Z;default:u--,u=F.textCompaction(i,u,o)}if(!(u<i.length))throw Z.getFormatInstance();f=i[u++]}if(0===o.length())throw Z.getFormatInstance();let g=new sr(null,o.toString(),null,s);return g.setOther(h),g}static decodeMacroBlock(i,s,o){if(s+F.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw Z.getFormatInstance();let l=new Int32Array(F.NUMBER_OF_SEQUENCE_CODEWORDS);for(let h=0;h<F.NUMBER_OF_SEQUENCE_CODEWORDS;h++,s++)l[h]=i[s];o.setSegmentIndex(Ce.parseInt(F.decodeBase900toBase10(l,F.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new je;s=F.textCompaction(i,s,u),o.setFileId(u.toString());let f=-1;for(i[s]===F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=s+1);s<i[0];)switch(i[s]){case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i[++s]){case F.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let h=new je;s=F.textCompaction(i,s+1,h),o.setFileName(h.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let g=new je;s=F.textCompaction(i,s+1,g),o.setSender(g.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new je;s=F.textCompaction(i,s+1,x),o.setAddressee(x.toString());break;case F.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new je;s=F.numericCompaction(i,s+1,E),o.setSegmentCount(Ce.parseInt(E.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let D=new je;s=F.numericCompaction(i,s+1,D),o.setTimestamp(me.parseLong(D.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let I=new je;s=F.numericCompaction(i,s+1,I),o.setChecksum(Ce.parseInt(I.toString()));break;case F.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let T=new je;s=F.numericCompaction(i,s+1,T),o.setFileSize(me.parseLong(T.toString()));break;default:throw Z.getFormatInstance()}break;case F.MACRO_PDF417_TERMINATOR:s++,o.setLastSegment(!0);break;default:throw Z.getFormatInstance()}if(-1!==f){let h=s-f;o.isLastSegment()&&h--,o.setOptionalData(Ct.copyOfRange(i,f,f+h))}return s}static textCompaction(i,s,o){let l=new Int32Array(2*(i[0]-s)),u=new Int32Array(2*(i[0]-s)),f=0,h=!1;for(;s<i[0]&&!h;){let g=i[s++];if(g<F.TEXT_COMPACTION_MODE_LATCH)l[f]=g/30,l[f+1]=g%30,f+=2;else switch(g){case F.TEXT_COMPACTION_MODE_LATCH:l[f++]=F.TEXT_COMPACTION_MODE_LATCH;break;case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:s--,h=!0;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l[f]=F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,g=i[s++],u[f]=g,f++}}return F.decodeTextCompaction(l,u,f,o),s}static decodeTextCompaction(i,s,o,l){let u=ze.ALPHA,f=ze.ALPHA,h=0;for(;h<o;){let g=i[h],x="";switch(u){case ze.ALPHA:if(g<26)x=String.fromCharCode(65+g);else switch(g){case 26:x=" ";break;case F.LL:u=ze.LOWER;break;case F.ML:u=ze.MIXED;break;case F.PS:f=u,u=ze.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case F.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA}break;case ze.LOWER:if(g<26)x=String.fromCharCode(97+g);else switch(g){case 26:x=" ";break;case F.AS:f=u,u=ze.ALPHA_SHIFT;break;case F.ML:u=ze.MIXED;break;case F.PS:f=u,u=ze.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case F.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA}break;case ze.MIXED:if(g<F.PL)x=F.MIXED_CHARS[g];else switch(g){case F.PL:u=ze.PUNCT;break;case 26:x=" ";break;case F.LL:u=ze.LOWER;break;case F.AL:u=ze.ALPHA;break;case F.PS:f=u,u=ze.PUNCT_SHIFT;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case F.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA}break;case ze.PUNCT:if(g<F.PAL)x=F.PUNCT_CHARS[g];else switch(g){case F.PAL:u=ze.ALPHA;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case F.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA}break;case ze.ALPHA_SHIFT:if(u=f,g<26)x=String.fromCharCode(65+g);else switch(g){case 26:x=" ";break;case F.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA}break;case ze.PUNCT_SHIFT:if(u=f,g<F.PAL)x=F.PUNCT_CHARS[g];else switch(g){case F.PAL:u=ze.ALPHA;break;case F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[h]);break;case F.TEXT_COMPACTION_MODE_LATCH:u=ze.ALPHA}}""!==x&&l.append(x),h++}}static byteCompaction(i,s,o,l,u){let f=new qo,h=0,g=0,x=!1;switch(i){case F.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),D=s[l++];for(;l<s[0]&&!x;)switch(E[h++]=D,g=900*g+D,D=s[l++],D){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:l--,x=!0;break;default:if(h%5==0&&h>0){for(let I=0;I<6;++I)f.write(Number(Or(g)>>Or(8*(5-I))));g=0,h=0}}l===s[0]&&D<F.TEXT_COMPACTION_MODE_LATCH&&(E[h++]=D);for(let I=0;I<h;I++)f.write(E[I]);break;case F.BYTE_COMPACTION_MODE_LATCH_6:for(;l<s[0]&&!x;){let I=s[l++];if(I<F.TEXT_COMPACTION_MODE_LATCH)h++,g=900*g+I;else switch(I){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.NUMERIC_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:l--,x=!0}if(h%5==0&&h>0){for(let T=0;T<6;++T)f.write(Number(Or(g)>>Or(8*(5-T))));g=0,h=0}}}return u.append(Dt.decode(f.toByteArray(),o)),l}static numericCompaction(i,s,o){let l=0,u=!1,f=new Int32Array(F.MAX_NUMERIC_CODEWORDS);for(;s<i[0]&&!u;){let h=i[s++];if(s===i[0]&&(u=!0),h<F.TEXT_COMPACTION_MODE_LATCH)f[l]=h,l++;else switch(h){case F.TEXT_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH:case F.BYTE_COMPACTION_MODE_LATCH_6:case F.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case F.MACRO_PDF417_TERMINATOR:s--,u=!0}(l%F.MAX_NUMERIC_CODEWORDS==0||h===F.NUMERIC_COMPACTION_MODE_LATCH||u)&&l>0&&(o.append(F.decodeBase900toBase10(f,l)),l=0)}return s}static decodeBase900toBase10(i,s){let o=Or(0);for(let u=0;u<s;u++)o+=F.EXP900[s-u-1]*Or(i[u]);let l=o.toString();if("1"!==l.charAt(0))throw new Z;return l.substring(1)}}F.TEXT_COMPACTION_MODE_LATCH=900,F.BYTE_COMPACTION_MODE_LATCH=901,F.NUMERIC_COMPACTION_MODE_LATCH=902,F.BYTE_COMPACTION_MODE_LATCH_6=924,F.ECI_USER_DEFINED=925,F.ECI_GENERAL_PURPOSE=926,F.ECI_CHARSET=927,F.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,F.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,F.MACRO_PDF417_TERMINATOR=922,F.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,F.MAX_NUMERIC_CODEWORDS=15,F.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,F.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,F.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,F.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,F.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,F.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,F.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,F.PL=25,F.LL=27,F.AS=27,F.ML=28,F.AL=28,F.PS=29,F.PAL=29,F.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",F.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",F.EXP900=Yn()?function Lf(){let w=[];w[0]=Or(1);let i=Or(900);w[1]=i;for(let s=2;s<16;s++)w[s]=w[s-1]*i;return w}():[],F.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ie{constructor(){}static decode(i,s,o,l,u,f,h){let D,g=new gn(i,s,o,l,u),x=null,E=null;for(let S=!0;;S=!1){if(null!=s&&(x=Ie.getRowIndicatorColumn(i,g,s,!0,f,h)),null!=l&&(E=Ie.getRowIndicatorColumn(i,g,l,!1,f,h)),D=Ie.merge(x,E),null==D)throw V.getNotFoundInstance();let M=D.getBoundingBox();if(!S||null==M||!(M.getMinY()<g.getMinY()||M.getMaxY()>g.getMaxY()))break;g=M}D.setBoundingBox(g);let I=D.getBarcodeColumnCount()+1;D.setDetectionResultColumn(0,x),D.setDetectionResultColumn(I,E);let T=null!=x;for(let S=1;S<=I;S++){let R,M=T?S:I-S;if(void 0!==D.getDetectionResultColumn(M))continue;R=0===M||M===I?new Vs(g,0===M):new Zo(g),D.setDetectionResultColumn(M,R);let L=-1,U=L;for(let q=g.getMinY();q<=g.getMaxY();q++){if(L=Ie.getStartColumn(D,M,q,T),L<0||L>g.getMaxX()){if(-1===U)continue;L=U}let k=Ie.detectCodeword(i,g.getMinX(),g.getMaxX(),T,L,q,f,h);null!=k&&(R.setCodeword(q,k),U=L,f=Math.min(f,k.getWidth()),h=Math.max(h,k.getWidth()))}}return Ie.createDecoderResult(D)}static merge(i,s){if(null==i&&null==s)return null;let o=Ie.getBarcodeMetadata(i,s);if(null==o)return null;let l=gn.merge(Ie.adjustBoundingBox(i),Ie.adjustBoundingBox(s));return new cr(o,l)}static adjustBoundingBox(i){if(null==i)return null;let s=i.getRowHeights();if(null==s)return null;let o=Ie.getMax(s),l=0;for(let h of s)if(l+=o-h,h>0)break;let u=i.getCodewords();for(let h=0;l>0&&null==u[h];h++)l--;let f=0;for(let h=s.length-1;h>=0&&(f+=o-s[h],!(s[h]>0));h--);for(let h=u.length-1;f>0&&null==u[h];h--)f--;return i.getBoundingBox().addMissingRows(l,f,i.isLeft())}static getMax(i){let s=-1;for(let o of i)s=Math.max(s,o);return s}static getBarcodeMetadata(i,s){let o,l;return null==i||null==(o=i.getBarcodeMetadata())?null==s?null:s.getBarcodeMetadata():null==s||null==(l=s.getBarcodeMetadata())?o:o.getColumnCount()!==l.getColumnCount()&&o.getErrorCorrectionLevel()!==l.getErrorCorrectionLevel()&&o.getRowCount()!==l.getRowCount()?null:o}static getRowIndicatorColumn(i,s,o,l,u,f){let h=new Vs(s,l);for(let g=0;g<2;g++){let x=0===g?1:-1,E=Math.trunc(Math.trunc(o.getX()));for(let D=Math.trunc(Math.trunc(o.getY()));D<=s.getMaxY()&&D>=s.getMinY();D+=x){let I=Ie.detectCodeword(i,0,i.getWidth(),l,E,D,u,f);null!=I&&(h.setCodeword(D,I),E=l?I.getStartX():I.getEndX())}}return h}static adjustCodewordCount(i,s){let o=s[0][1],l=o.getValue(),u=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-Ie.getNumberOfECCodeWords(i.getBarcodeECLevel());if(0===l.length){if(u<1||u>ne.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();o.setValue(u)}else l[0]!==u&&o.setValue(u)}static createDecoderResult(i){let s=Ie.createBarcodeMatrix(i);Ie.adjustCodewordCount(i,s);let o=new Array,l=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),u=[],f=new Array;for(let g=0;g<i.getBarcodeRowCount();g++)for(let x=0;x<i.getBarcodeColumnCount();x++){let E=s[g][x+1].getValue(),D=g*i.getBarcodeColumnCount()+x;0===E.length?o.push(D):1===E.length?l[D]=E[0]:(f.push(D),u.push(E))}let h=new Array(u.length);for(let g=0;g<h.length;g++)h[g]=u[g];return Ie.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),l,ne.toIntArray(o),ne.toIntArray(f),h)}static createDecoderResultFromAmbiguousValues(i,s,o,l,u){let f=new Int32Array(l.length),h=100;for(;h-- >0;){for(let g=0;g<f.length;g++)s[l[g]]=u[g][f[g]];try{return Ie.decodeCodewords(s,i,o)}catch(g){if(!(g instanceof at))throw g}if(0===f.length)throw at.getChecksumInstance();for(let g=0;g<f.length;g++){if(f[g]<u[g].length-1){f[g]++;break}if(f[g]=0,g===f.length-1)throw at.getChecksumInstance()}}throw at.getChecksumInstance()}static createBarcodeMatrix(i){let s=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let l=0;l<s.length;l++)for(let u=0;u<s[l].length;u++)s[l][u]=new xi;let o=0;for(let l of i.getDetectionResultColumns()){if(null!=l)for(let u of l.getCodewords())if(null!=u){let f=u.getRowNumber();if(f>=0){if(f>=s.length)continue;s[f][o].setValue(u.getValue())}}o++}return s}static isValidBarcodeColumn(i,s){return s>=0&&s<=i.getBarcodeColumnCount()+1}static getStartColumn(i,s,o,l){let u=l?1:-1,f=null;if(Ie.isValidBarcodeColumn(i,s-u)&&(f=i.getDetectionResultColumn(s-u).getCodeword(o)),null!=f)return l?f.getEndX():f.getStartX();if(f=i.getDetectionResultColumn(s).getCodewordNearby(o),null!=f)return l?f.getStartX():f.getEndX();if(Ie.isValidBarcodeColumn(i,s-u)&&(f=i.getDetectionResultColumn(s-u).getCodewordNearby(o)),null!=f)return l?f.getEndX():f.getStartX();let h=0;for(;Ie.isValidBarcodeColumn(i,s-u);){s-=u;for(let g of i.getDetectionResultColumn(s).getCodewords())if(null!=g)return(l?g.getEndX():g.getStartX())+u*h*(g.getEndX()-g.getStartX());h++}return l?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,s,o,l,u,f,h,g){u=Ie.adjustCodewordStartColumn(i,s,o,l,u,f);let x=Ie.getModuleBitCount(i,s,o,l,u,f);if(null==x)return null;let E,D=Re.sum(x);if(l)E=u+D;else{for(let S=0;S<x.length/2;S++){let M=x[S];x[S]=x[x.length-1-S],x[x.length-1-S]=M}E=u,u=E-D}if(!Ie.checkCodewordSkew(D,h,g))return null;let I=Wt.getDecodedValue(x),T=ne.getCodeword(I);return-1===T?null:new Us(u,E,Ie.getCodewordBucketNumber(I),T)}static getModuleBitCount(i,s,o,l,u,f){let h=u,g=new Int32Array(8),x=0,E=l?1:-1,D=l;for(;(l?h<o:h>=s)&&x<g.length;)i.get(h,f)===D?(g[x]++,h+=E):(x++,D=!D);return x===g.length||h===(l?o:s)&&x===g.length-1?g:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,s,o,l,u,f){let h=u,g=l?-1:1;for(let x=0;x<2;x++){for(;(l?h>=s:h<o)&&l===i.get(h,f);){if(Math.abs(u-h)>Ie.CODEWORD_SKEW_SIZE)return u;h+=g}g=-g,l=!l}return h}static checkCodewordSkew(i,s,o){return s-Ie.CODEWORD_SKEW_SIZE<=i&&i<=o+Ie.CODEWORD_SKEW_SIZE}static decodeCodewords(i,s,o){if(0===i.length)throw Z.getFormatInstance();let l=1<<s+1,u=Ie.correctErrors(i,o,l);Ie.verifyCodewordCount(i,l);let f=F.decode(i,""+s);return f.setErrorsCorrected(u),f.setErasures(o.length),f}static correctErrors(i,s,o){if(null!=s&&s.length>o/2+Ie.MAX_ERRORS||o<0||o>Ie.MAX_EC_CODEWORDS)throw at.getChecksumInstance();return Ie.errorCorrection.decode(i,o,s)}static verifyCodewordCount(i,s){if(i.length<4)throw Z.getFormatInstance();let o=i[0];if(o>i.length)throw Z.getFormatInstance();if(0===o){if(!(s<i.length))throw Z.getFormatInstance();i[0]=i.length-s}}static getBitCountForCodeword(i){let s=new Int32Array(8),o=0,l=s.length-1;for(;!((1&i)!==o&&(o=1&i,l--,l<0));)s[l]++,i>>=1;return s}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return Ie.getCodewordBucketNumber(Ie.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let s=new $r;for(let o=0;o<i.length;o++){s.format("Row %2d: ",o);for(let l=0;l<i[o].length;l++){let u=i[o][l];0===u.getValue().length?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}Ie.CODEWORD_SKEW_SIZE=2,Ie.MAX_ERRORS=3,Ie.MAX_EC_CODEWORDS=512,Ie.errorCorrection=new Tl;class Nt{decode(i,s=null){let o=Nt.decode(i,s,!1);if(null==o||0===o.length||null==o[0])throw V.getNotFoundInstance();return o[0]}decodeMultiple(i,s=null){try{return Nt.decode(i,s,!0)}catch(o){throw o instanceof Z||o instanceof at?V.getNotFoundInstance():o}}static decode(i,s,o){const l=new Array,u=Ae.detectMultiple(i,s,o);for(const f of u.getPoints()){const h=Ie.decode(u.getBits(),f[4],f[5],f[6],f[7],Nt.getMinCodewordWidth(f),Nt.getMaxCodewordWidth(f)),g=new Ht(h.getText(),h.getRawBytes(),void 0,f,ae.PDF_417);g.putMetadata(st.ERROR_CORRECTION_LEVEL,h.getECLevel());const x=h.getOther();null!=x&&g.putMetadata(st.PDF417_EXTRA_METADATA,x),l.push(g)}return l.map(f=>f)}static getMaxWidth(i,s){return null==i||null==s?0:Math.trunc(Math.abs(i.getX()-s.getX()))}static getMinWidth(i,s){return null==i||null==s?Ce.MAX_VALUE:Math.trunc(Math.abs(i.getX()-s.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Nt.getMaxWidth(i[0],i[4]),Nt.getMaxWidth(i[6],i[2])*ne.MODULES_IN_CODEWORD/ne.MODULES_IN_STOP_PATTERN),Math.max(Nt.getMaxWidth(i[1],i[5]),Nt.getMaxWidth(i[7],i[3])*ne.MODULES_IN_CODEWORD/ne.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Nt.getMinWidth(i[0],i[4]),Nt.getMinWidth(i[6],i[2])*ne.MODULES_IN_CODEWORD/ne.MODULES_IN_STOP_PATTERN),Math.min(Nt.getMinWidth(i[1],i[5]),Nt.getMinWidth(i[7],i[3])*ne.MODULES_IN_CODEWORD/ne.MODULES_IN_STOP_PATTERN)))}reset(){}}let Hs=(()=>{class w extends Bt{}return w.kind="ReaderException",w})();class Sl{constructor(i,s){this.verbose=!0===i,s&&this.setHints(s)}decode(i,s){return s&&this.setHints(s),this.decodeInternal(i)}decodeWithState(i){return null==this.readers&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const s=null!=i&&void 0!==i.get(et.TRY_HARDER),o=null==i?null:i.get(et.POSSIBLE_FORMATS),l=new Array;if(null!=o){const u=o.some(f=>f===ae.UPC_A||f===ae.UPC_E||f===ae.EAN_13||f===ae.EAN_8||f===ae.CODABAR||f===ae.CODE_39||f===ae.CODE_93||f===ae.CODE_128||f===ae.ITF||f===ae.RSS_14||f===ae.RSS_EXPANDED);u&&!s&&l.push(new qr(i,this.verbose)),o.includes(ae.QR_CODE)&&l.push(new Nr),o.includes(ae.DATA_MATRIX)&&l.push(new pe),o.includes(ae.AZTEC)&&l.push(new Mi),o.includes(ae.PDF_417)&&l.push(new Nt),u&&s&&l.push(new qr(i,this.verbose))}0===l.length&&(s||l.push(new qr(i,this.verbose)),l.push(new Nr),l.push(new pe),l.push(new Mi),l.push(new Nt),s&&l.push(new qr(i,this.verbose))),this.readers=l}reset(){if(null!==this.readers)for(const i of this.readers)i.reset()}decodeInternal(i){if(null===this.readers)throw new Hs("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(i,this.hints)}catch(o){if(o instanceof Hs)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}var Xn=(()=>{return(w=Xn||(Xn={}))[w.ERROR_CORRECTION=0]="ERROR_CORRECTION",w[w.CHARACTER_SET=1]="CHARACTER_SET",w[w.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",w[w.MIN_SIZE=3]="MIN_SIZE",w[w.MAX_SIZE=4]="MAX_SIZE",w[w.MARGIN=5]="MARGIN",w[w.PDF417_COMPACT=6]="PDF417_COMPACT",w[w.PDF417_COMPACTION=7]="PDF417_COMPACTION",w[w.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",w[w.AZTEC_LAYERS=9]="AZTEC_LAYERS",w[w.QR_VERSION=10]="QR_VERSION",Xn;var w})(),ge=Xn;class Jr{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new Zt(i,Int32Array.from([1])))}buildGenerator(i){const s=this.cachedGenerators;if(i>=s.length){let o=s[s.length-1];const l=this.field;for(let u=s.length;u<=i;u++){const f=o.multiply(new Zt(l,Int32Array.from([1,l.exp(u-1+l.getGeneratorBase())])));s.push(f),o=f}}return s[i]}encode(i,s){if(0===s)throw new te("No error correction bytes");const o=i.length-s;if(o<=0)throw new te("No data bytes provided");const l=this.buildGenerator(s),u=new Int32Array(o);Ge.arraycopy(i,0,u,0,o);let f=new Zt(this.field,u);f=f.multiplyByMonomial(s,1);const g=f.divide(l)[1].getCoefficients(),x=s-g.length;for(let E=0;E<x;E++)i[o+E]=0;Ge.arraycopy(g,0,i,o+x,g.length)}}let fr=(()=>{class w{constructor(){}static applyMaskPenaltyRule1(s){return w.applyMaskPenaltyRule1Internal(s,!0)+w.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let o=0;const l=s.getArray(),u=s.getWidth(),f=s.getHeight();for(let h=0;h<f-1;h++){const g=l[h];for(let x=0;x<u-1;x++){const E=g[x];E===g[x+1]&&E===l[h+1][x]&&E===l[h+1][x+1]&&o++}}return w.N2*o}static applyMaskPenaltyRule3(s){let o=0;const l=s.getArray(),u=s.getWidth(),f=s.getHeight();for(let h=0;h<f;h++)for(let g=0;g<u;g++){const x=l[h];g+6<u&&1===x[g]&&0===x[g+1]&&1===x[g+2]&&1===x[g+3]&&1===x[g+4]&&0===x[g+5]&&1===x[g+6]&&(w.isWhiteHorizontal(x,g-4,g)||w.isWhiteHorizontal(x,g+7,g+11))&&o++,h+6<f&&1===l[h][g]&&0===l[h+1][g]&&1===l[h+2][g]&&1===l[h+3][g]&&1===l[h+4][g]&&0===l[h+5][g]&&1===l[h+6][g]&&(w.isWhiteVertical(l,g,h-4,h)||w.isWhiteVertical(l,g,h+7,h+11))&&o++}return o*w.N3}static isWhiteHorizontal(s,o,l){o=Math.max(o,0),l=Math.min(l,s.length);for(let u=o;u<l;u++)if(1===s[u])return!1;return!0}static isWhiteVertical(s,o,l,u){l=Math.max(l,0),u=Math.min(u,s.length);for(let f=l;f<u;f++)if(1===s[f][o])return!1;return!0}static applyMaskPenaltyRule4(s){let o=0;const l=s.getArray(),u=s.getWidth(),f=s.getHeight();for(let x=0;x<f;x++){const E=l[x];for(let D=0;D<u;D++)1===E[D]&&o++}const h=s.getHeight()*s.getWidth();return Math.floor(10*Math.abs(2*o-h)/h)*w.N4}static getDataMaskBit(s,o,l){let u,f;switch(s){case 0:u=l+o&1;break;case 1:u=1&l;break;case 2:u=o%3;break;case 3:u=(l+o)%3;break;case 4:u=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:f=l*o,u=(1&f)+f%3;break;case 6:f=l*o,u=(1&f)+f%3&1;break;case 7:f=l*o,u=f%3+(l+o&1)&1;break;default:throw new te("Invalid mask pattern: "+s)}return 0===u}static applyMaskPenaltyRule1Internal(s,o){let l=0;const u=o?s.getHeight():s.getWidth(),f=o?s.getWidth():s.getHeight(),h=s.getArray();for(let g=0;g<u;g++){let x=0,E=-1;for(let D=0;D<f;D++){const I=o?h[g][D]:h[D][g];I===E?x++:(x>=5&&(l+=w.N1+(x-5)),x=1,E=I)}x>=5&&(l+=w.N1+(x-5))}return l}}return w.N1=3,w.N2=3,w.N3=40,w.N4=10,w})();class ei{constructor(i,s){this.width=i,this.height=s;const o=new Array(s);for(let l=0;l!==s;l++)o[l]=new Uint8Array(i);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(i,s){return this.bytes[s][i]}getArray(){return this.bytes}setNumber(i,s,o){this.bytes[s][i]=o}setBoolean(i,s,o){this.bytes[s][i]=o?1:0}clear(i){for(const s of this.bytes)Ct.fill(s,i)}equals(i){if(!(i instanceof ei))return!1;const s=i;if(this.width!==s.width||this.height!==s.height)return!1;for(let o=0,l=this.height;o<l;++o){const u=this.bytes[o],f=s.bytes[o];for(let h=0,g=this.width;h<g;++h)if(u[h]!==f[h])return!1}return!0}toString(){const i=new je;for(let s=0,o=this.height;s<o;++s){const l=this.bytes[s];for(let u=0,f=this.width;u<f;++u)switch(l[u]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ")}i.append("\n")}return i.toString()}}let wi=(()=>{class w{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new je;return s.append("<<\n"),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append("\n ecLevel: "),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append("\n version: "),s.append(this.version?this.version.toString():"null"),s.append("\n maskPattern: "),s.append(this.maskPattern.toString()),this.matrix?(s.append("\n matrix:\n"),s.append(this.matrix.toString())):s.append("\n matrix: null\n"),s.append(">>\n"),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<w.NUM_MASK_PATTERNS}}return w.NUM_MASK_PATTERNS=8,w})(),Ne=(()=>{class w extends Bt{}return w.kind="WriterException",w})();class oe{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,s,o,l,u){oe.clearMatrix(u),oe.embedBasicPatterns(o,u),oe.embedTypeInfo(s,l,u),oe.maybeEmbedVersionInfo(o,u),oe.embedDataBits(i,l,u)}static embedBasicPatterns(i,s){oe.embedPositionDetectionPatternsAndSeparators(s),oe.embedDarkDotAtLeftBottomCorner(s),oe.maybeEmbedPositionAdjustmentPatterns(i,s),oe.embedTimingPatterns(s)}static embedTypeInfo(i,s,o){const l=new Be;oe.makeTypeInfoBits(i,s,l);for(let u=0,f=l.getSize();u<f;++u){const h=l.get(l.getSize()-1-u),g=oe.TYPE_INFO_COORDINATES[u];if(o.setBoolean(g[0],g[1],h),u<8){const D=o.getWidth()-u-1;o.setBoolean(D,8,h)}else{const I=o.getHeight()-7+(u-8);o.setBoolean(8,I,h)}}}static maybeEmbedVersionInfo(i,s){if(i.getVersionNumber()<7)return;const o=new Be;oe.makeVersionInfoBits(i,o);let l=17;for(let u=0;u<6;++u)for(let f=0;f<3;++f){const h=o.get(l);l--,s.setBoolean(u,s.getHeight()-11+f,h),s.setBoolean(s.getHeight()-11+f,u,h)}}static embedDataBits(i,s,o){let l=0,u=-1,f=o.getWidth()-1,h=o.getHeight()-1;for(;f>0;){for(6===f&&(f-=1);h>=0&&h<o.getHeight();){for(let g=0;g<2;++g){const x=f-g;if(!oe.isEmpty(o.get(x,h)))continue;let E;l<i.getSize()?(E=i.get(l),++l):E=!1,255!==s&&fr.getDataMaskBit(s,x,h)&&(E=!E),o.setBoolean(x,h,E)}h+=u}u=-u,h+=u,f-=2}if(l!==i.getSize())throw new Ne("Not all bits consumed: "+l+"/"+i.getSize())}static findMSBSet(i){return 32-Ce.numberOfLeadingZeros(i)}static calculateBCHCode(i,s){if(0===s)throw new te("0 polynomial");const o=oe.findMSBSet(s);for(i<<=o-1;oe.findMSBSet(i)>=o;)i^=s<<oe.findMSBSet(i)-o;return i}static makeTypeInfoBits(i,s,o){if(!wi.isValidMaskPattern(s))throw new Ne("Invalid mask pattern");const l=i.getBits()<<3|s;o.appendBits(l,5);const u=oe.calculateBCHCode(l,oe.TYPE_INFO_POLY);o.appendBits(u,10);const f=new Be;if(f.appendBits(oe.TYPE_INFO_MASK_PATTERN,15),o.xor(f),15!==o.getSize())throw new Ne("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(i,s){s.appendBits(i.getVersionNumber(),6);const o=oe.calculateBCHCode(i.getVersionNumber(),oe.VERSION_INFO_POLY);if(s.appendBits(o,12),18!==s.getSize())throw new Ne("should not happen but we got: "+s.getSize())}static isEmpty(i){return 255===i}static embedTimingPatterns(i){for(let s=8;s<i.getWidth()-8;++s){const o=(s+1)%2;oe.isEmpty(i.get(s,6))&&i.setNumber(s,6,o),oe.isEmpty(i.get(6,s))&&i.setNumber(6,s,o)}}static embedDarkDotAtLeftBottomCorner(i){if(0===i.get(8,i.getHeight()-8))throw new Ne;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,s,o){for(let l=0;l<8;++l){if(!oe.isEmpty(o.get(i+l,s)))throw new Ne;o.setNumber(i+l,s,0)}}static embedVerticalSeparationPattern(i,s,o){for(let l=0;l<7;++l){if(!oe.isEmpty(o.get(i,s+l)))throw new Ne;o.setNumber(i,s+l,0)}}static embedPositionAdjustmentPattern(i,s,o){for(let l=0;l<5;++l){const u=oe.POSITION_ADJUSTMENT_PATTERN[l];for(let f=0;f<5;++f)o.setNumber(i+f,s+l,u[f])}}static embedPositionDetectionPattern(i,s,o){for(let l=0;l<7;++l){const u=oe.POSITION_DETECTION_PATTERN[l];for(let f=0;f<7;++f)o.setNumber(i+f,s+l,u[f])}}static embedPositionDetectionPatternsAndSeparators(i){const s=oe.POSITION_DETECTION_PATTERN[0].length;oe.embedPositionDetectionPattern(0,0,i),oe.embedPositionDetectionPattern(i.getWidth()-s,0,i),oe.embedPositionDetectionPattern(0,i.getWidth()-s,i);oe.embedHorizontalSeparationPattern(0,7,i),oe.embedHorizontalSeparationPattern(i.getWidth()-8,7,i),oe.embedHorizontalSeparationPattern(0,i.getWidth()-8,i);oe.embedVerticalSeparationPattern(7,0,i),oe.embedVerticalSeparationPattern(i.getHeight()-7-1,0,i),oe.embedVerticalSeparationPattern(7,i.getHeight()-7,i)}static maybeEmbedPositionAdjustmentPatterns(i,s){if(i.getVersionNumber()<2)return;const o=i.getVersionNumber()-1,l=oe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let u=0,f=l.length;u!==f;u++){const h=l[u];if(h>=0)for(let g=0;g!==f;g++){const x=l[g];x>=0&&oe.isEmpty(s.get(x,h))&&oe.embedPositionAdjustmentPattern(x-2,h-2,s)}}}}oe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),oe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),oe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),oe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),oe.VERSION_INFO_POLY=7973,oe.TYPE_INFO_POLY=1335,oe.TYPE_INFO_MASK_PATTERN=21522;class vl{constructor(i,s){this.dataBytes=i,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ye{constructor(){}static calculateMaskPenalty(i){return fr.applyMaskPenaltyRule1(i)+fr.applyMaskPenaltyRule2(i)+fr.applyMaskPenaltyRule3(i)+fr.applyMaskPenaltyRule4(i)}static encode(i,s,o=null){let l=Ye.DEFAULT_BYTE_MODE_ENCODING;const u=null!==o&&void 0!==o.get(ge.CHARACTER_SET);u&&(l=o.get(ge.CHARACTER_SET).toString());const f=this.chooseMode(i,l),h=new Be;if(f===le.BYTE&&(u||Ye.DEFAULT_BYTE_MODE_ENCODING!==l)){const q=Y.getCharacterSetECIByName(l);void 0!==q&&this.appendECI(q,h)}this.appendModeInfo(f,h);const g=new Be;let x;if(this.appendBytes(i,f,g,l),null!==o&&void 0!==o.get(ge.QR_VERSION)){const q=Number.parseInt(o.get(ge.QR_VERSION).toString(),10);x=se.getVersionForNumber(q);const k=this.calculateBitsNeeded(f,h,g,x);if(!this.willFit(k,x,s))throw new Ne("Data too big for requested version")}else x=this.recommendVersion(s,f,h,g);const E=new Be;E.appendBitArray(h);const D=f===le.BYTE?g.getSizeInBytes():i.length;this.appendLengthInfo(D,x,f,E),E.appendBitArray(g);const I=x.getECBlocksForLevel(s),T=x.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(T,E);const S=this.interleaveWithECBytes(E,x.getTotalCodewords(),T,I.getNumBlocks()),M=new wi;M.setECLevel(s),M.setMode(f),M.setVersion(x);const R=x.getDimensionForVersion(),L=new ei(R,R),U=this.chooseMaskPattern(S,s,x,L);return M.setMaskPattern(U),oe.buildMatrix(S,s,x,U,L),M.setMatrix(L),M}static recommendVersion(i,s,o,l){const u=this.calculateBitsNeeded(s,o,l,se.getVersionForNumber(1)),f=this.chooseVersion(u,i),h=this.calculateBitsNeeded(s,o,l,f);return this.chooseVersion(h,i)}static calculateBitsNeeded(i,s,o,l){return s.getSize()+i.getCharacterCountBits(l)+o.getSize()}static getAlphanumericCode(i){return i<Ye.ALPHANUMERIC_TABLE.length?Ye.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,s=null){if(Y.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(i))return le.KANJI;let o=!1,l=!1;for(let u=0,f=i.length;u<f;++u){const h=i.charAt(u);if(Ye.isDigit(h))o=!0;else{if(-1===this.getAlphanumericCode(h.charCodeAt(0)))return le.BYTE;l=!0}}return l?le.ALPHANUMERIC:o?le.NUMERIC:le.BYTE}static isOnlyDoubleByteKanji(i){let s;try{s=Dt.encode(i,Y.SJIS)}catch(l){return!1}const o=s.length;if(o%2!=0)return!1;for(let l=0;l<o;l+=2){const u=255&s[l];if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(i,s,o,l){let u=Number.MAX_SAFE_INTEGER,f=-1;for(let h=0;h<wi.NUM_MASK_PATTERNS;h++){oe.buildMatrix(i,s,o,h,l);let g=this.calculateMaskPenalty(l);g<u&&(u=g,f=h)}return f}static chooseVersion(i,s){for(let o=1;o<=40;o++){const l=se.getVersionForNumber(o);if(Ye.willFit(i,l,s))return l}throw new Ne("Data too big")}static willFit(i,s,o){return s.getTotalCodewords()-s.getECBlocksForLevel(o).getTotalECCodewords()>=(i+7)/8}static terminateBits(i,s){const o=8*i;if(s.getSize()>o)throw new Ne("data bits cannot fit in the QR Code"+s.getSize()+" > "+o);for(let f=0;f<4&&s.getSize()<o;++f)s.appendBit(!1);const l=7&s.getSize();if(l>0)for(let f=l;f<8;f++)s.appendBit(!1);const u=i-s.getSizeInBytes();for(let f=0;f<u;++f)s.appendBits(0==(1&f)?236:17,8);if(s.getSize()!==o)throw new Ne("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,s,o,l,u,f){if(l>=o)throw new Ne("Block ID too large");const h=i%o,g=o-h,x=Math.floor(i/o),E=x+1,D=Math.floor(s/o),I=D+1,T=x-D,S=E-I;if(T!==S)throw new Ne("EC bytes mismatch");if(o!==g+h)throw new Ne("RS blocks mismatch");if(i!==(D+T)*g+(I+S)*h)throw new Ne("Total bytes mismatch");l<g?(u[0]=D,f[0]=T):(u[0]=I,f[0]=S)}static interleaveWithECBytes(i,s,o,l){if(i.getSizeInBytes()!==o)throw new Ne("Number of bits and data bytes does not match");let u=0,f=0,h=0;const g=new Array;for(let E=0;E<l;++E){const D=new Int32Array(1),I=new Int32Array(1);Ye.getNumDataBytesAndNumECBytesForBlockID(s,o,l,E,D,I);const T=D[0],S=new Uint8Array(T);i.toBytes(8*u,S,0,T);const M=Ye.generateECBytes(S,I[0]);g.push(new vl(S,M)),f=Math.max(f,T),h=Math.max(h,M.length),u+=D[0]}if(o!==u)throw new Ne("Data bytes does not match offset");const x=new Be;for(let E=0;E<f;++E)for(const D of g){const I=D.getDataBytes();E<I.length&&x.appendBits(I[E],8)}for(let E=0;E<h;++E)for(const D of g){const I=D.getErrorCorrectionBytes();E<I.length&&x.appendBits(I[E],8)}if(s!==x.getSizeInBytes())throw new Ne("Interleaving error: "+s+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(i,s){const o=i.length,l=new Int32Array(o+s);for(let f=0;f<o;f++)l[f]=255&i[f];new Jr(Ve.QR_CODE_FIELD_256).encode(l,s);const u=new Uint8Array(s);for(let f=0;f<s;f++)u[f]=l[o+f];return u}static appendModeInfo(i,s){s.appendBits(i.getBits(),4)}static appendLengthInfo(i,s,o,l){const u=o.getCharacterCountBits(s);if(i>=1<<u)throw new Ne(i+" is bigger than "+((1<<u)-1));l.appendBits(i,u)}static appendBytes(i,s,o,l){switch(s){case le.NUMERIC:Ye.appendNumericBytes(i,o);break;case le.ALPHANUMERIC:Ye.appendAlphanumericBytes(i,o);break;case le.BYTE:Ye.append8BitBytes(i,o,l);break;case le.KANJI:Ye.appendKanjiBytes(i,o);break;default:throw new Ne("Invalid mode: "+s)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const s=Ye.getDigit(i);return s>=0&&s<=9}static appendNumericBytes(i,s){const o=i.length;let l=0;for(;l<o;){const u=Ye.getDigit(i.charAt(l));if(l+2<o){const f=Ye.getDigit(i.charAt(l+1)),h=Ye.getDigit(i.charAt(l+2));s.appendBits(100*u+10*f+h,10),l+=3}else if(l+1<o){const f=Ye.getDigit(i.charAt(l+1));s.appendBits(10*u+f,7),l+=2}else s.appendBits(u,4),l++}}static appendAlphanumericBytes(i,s){const o=i.length;let l=0;for(;l<o;){const u=Ye.getAlphanumericCode(i.charCodeAt(l));if(-1===u)throw new Ne;if(l+1<o){const f=Ye.getAlphanumericCode(i.charCodeAt(l+1));if(-1===f)throw new Ne;s.appendBits(45*u+f,11),l+=2}else s.appendBits(u,6),l++}}static append8BitBytes(i,s,o){let l;try{l=Dt.encode(i,o)}catch(u){throw new Ne(u)}for(let u=0,f=l.length;u!==f;u++)s.appendBits(l[u],8)}static appendKanjiBytes(i,s){let o;try{o=Dt.encode(i,Y.SJIS)}catch(u){throw new Ne(u)}const l=o.length;for(let u=0;u<l;u+=2){const g=(255&o[u])<<8&4294967295|255&o[u+1];let x=-1;if(g>=33088&&g<=40956?x=g-33088:g>=57408&&g<=60351&&(x=g-49472),-1===x)throw new Ne("Invalid byte sequence");s.appendBits(192*(x>>8)+(255&x),13)}}static appendECI(i,s){s.appendBits(le.ECI.getBits(),4),s.appendBits(i.getValue(),8)}}Ye.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ye.DEFAULT_BYTE_MODE_ENCODING=Y.UTF8.getName();let Ml=(()=>{class w{write(s,o,l,u=null){if(0===s.length)throw new te("Found empty contents");if(o<0||l<0)throw new te("Requested dimensions are too small: "+o+"x"+l);let f=ie.L,h=w.QUIET_ZONE_SIZE;null!==u&&(void 0!==u.get(ge.ERROR_CORRECTION)&&(f=ie.fromString(u.get(ge.ERROR_CORRECTION).toString())),void 0!==u.get(ge.MARGIN)&&(h=Number.parseInt(u.get(ge.MARGIN).toString(),10)));const g=Ye.encode(s,f,u);return this.renderResult(g,o,l,h)}writeToDom(s,o,l,u,f=null){"string"==typeof s&&(s=document.querySelector(s));const h=this.write(o,l,u,f);s&&s.appendChild(h)}renderResult(s,o,l,u){const f=s.getMatrix();if(null===f)throw new or;const h=f.getWidth(),g=f.getHeight(),x=h+2*u,E=g+2*u,D=Math.max(o,x),I=Math.max(l,E),T=Math.min(Math.floor(D/x),Math.floor(I/E)),S=Math.floor((D-h*T)/2),M=Math.floor((I-g*T)/2),R=this.createSVGElement(D,I);for(let L=0,U=M;L<g;L++,U+=T)for(let q=0,k=S;q<h;q++,k+=T)if(1===f.get(q,L)){const be=this.createSvgRectElement(k,U,T,T);R.appendChild(be)}return R}createSVGElement(s,o){const l=document.createElementNS(w.SVG_NS,"svg");return l.setAttributeNS(null,"height",s.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(s,o,l,u){const f=document.createElementNS(w.SVG_NS,"rect");return f.setAttributeNS(null,"x",s.toString()),f.setAttributeNS(null,"y",o.toString()),f.setAttributeNS(null,"height",l.toString()),f.setAttributeNS(null,"width",u.toString()),f.setAttributeNS(null,"fill","#000000"),f}}return w.QUIET_ZONE_SIZE=4,w.SVG_NS="http://www.w3.org/2000/svg",w})(),Gs=(()=>{class w{encode(s,o,l,u,f){if(0===s.length)throw new te("Found empty contents");if(o!==ae.QR_CODE)throw new te("Can only encode QR_CODE, but got "+o);if(l<0||u<0)throw new te(`Requested dimensions are too small: ${l}x${u}`);let h=ie.L,g=w.QUIET_ZONE_SIZE;null!==f&&(void 0!==f.get(ge.ERROR_CORRECTION)&&(h=ie.fromString(f.get(ge.ERROR_CORRECTION).toString())),void 0!==f.get(ge.MARGIN)&&(g=Number.parseInt(f.get(ge.MARGIN).toString(),10)));const x=Ye.encode(s,h,f);return w.renderResult(x,l,u,g)}static renderResult(s,o,l,u){const f=s.getMatrix();if(null===f)throw new or;const h=f.getWidth(),g=f.getHeight(),x=h+2*u,E=g+2*u,D=Math.max(o,x),I=Math.max(l,E),T=Math.min(Math.floor(D/x),Math.floor(I/E)),S=Math.floor((D-h*T)/2),M=Math.floor((I-g*T)/2),R=new ht(D,I);for(let L=0,U=M;L<g;L++,U+=T)for(let q=0,k=S;q<h;q++,k+=T)1===f.get(q,L)&&R.setRegion(k,U,T,T);return R}}return w.QUIET_ZONE_SIZE=4,w})();let $o=(()=>{class w extends Ti{constructor(s,o,l,u,f,h,g,x){if(super(h,g),this.yuvData=s,this.dataWidth=o,this.dataHeight=l,this.left=u,this.top=f,u+h>o||f+g>l)throw new te("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(h,g)}getRow(s,o){if(s<0||s>=this.getHeight())throw new te("Requested row is outside the image: "+s);const l=this.getWidth();return(null==o||o.length<l)&&(o=new Uint8ClampedArray(l)),Ge.arraycopy(this.yuvData,(s+this.top)*this.dataWidth+this.left,o,0,l),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=s*o,u=new Uint8ClampedArray(l);let f=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return Ge.arraycopy(this.yuvData,f,u,0,l),u;for(let h=0;h<o;h++)Ge.arraycopy(this.yuvData,f,u,h*s,s),f+=this.dataWidth;return u}isCropSupported(){return!0}crop(s,o,l,u){return new w(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+o,l,u,!1)}renderThumbnail(){const s=this.getWidth()/w.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/w.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(s*o),u=this.yuvData;let f=this.top*this.dataWidth+this.left;for(let h=0;h<o;h++){const g=h*s;for(let x=0;x<s;x++)l[g+x]=4278190080|65793*(255&u[f+x*w.THUMBNAIL_SCALE_FACTOR]);f+=this.dataWidth*w.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/w.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/w.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,o){const l=this.yuvData;for(let u=0,f=this.top*this.dataWidth+this.left;u<o;u++,f+=this.dataWidth){const h=f+s/2;for(let g=f,x=f+s-1;g<h;g++,x--){const E=l[g];l[g]=l[x],l[x]=E}}}invert(){return new zn(this)}}return w.THUMBNAIL_SCALE_FACTOR=2,w})();class Rr extends Ti{constructor(i,s,o,l,u,f,h){if(super(s,o),this.dataWidth=l,this.dataHeight=u,this.left=f,this.top=h,4===i.BYTES_PER_ELEMENT){const g=s*o,x=new Uint8ClampedArray(g);for(let E=0;E<g;E++){const D=i[E];x[E]=((D>>16&255)+(D>>7&510)+(255&D))/4&255}this.luminances=x}else this.luminances=i;if(void 0===l&&(this.dataWidth=s),void 0===u&&(this.dataHeight=o),void 0===f&&(this.left=0),void 0===h&&(this.top=0),this.left+s>this.dataWidth||this.top+o>this.dataHeight)throw new te("Crop rectangle does not fit within image data.")}getRow(i,s){if(i<0||i>=this.getHeight())throw new te("Requested row is outside the image: "+i);const o=this.getWidth();return(null==s||s.length<o)&&(s=new Uint8ClampedArray(o)),Ge.arraycopy(this.luminances,(i+this.top)*this.dataWidth+this.left,s,0,o),s}getMatrix(){const i=this.getWidth(),s=this.getHeight();if(i===this.dataWidth&&s===this.dataHeight)return this.luminances;const o=i*s,l=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return Ge.arraycopy(this.luminances,u,l,0,o),l;for(let f=0;f<s;f++)Ge.arraycopy(this.luminances,u,l,f*i,i),u+=this.dataWidth;return l}isCropSupported(){return!0}crop(i,s,o,l){return new Rr(this.luminances,o,l,this.dataWidth,this.dataHeight,this.left+i,this.top+s)}invert(){return new zn(this)}}class Jo extends Y{static forName(i){return this.getCharacterSetECIByName(i)}}class Pi{}Pi.ISO_8859_1=Y.ISO8859_1;class en{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Yt{static singletonList(i){return[i]}static min(i,s){return i.sort(s)[0]}}class tn extends class Vt{constructor(i){this.previous=i}getPrevious(){return this.previous}}{constructor(i,s,o){super(i),this.value=s,this.bitCount=o}appendTo(i,s){i.appendBits(this.value,this.bitCount)}add(i,s){return new tn(this,i,s)}addBinaryShift(i,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new tn(this,i,s)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+Ce.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Zn extends tn{constructor(i,s,o){super(i,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=o}appendTo(i,s){for(let o=0;o<this.binaryShiftByteCount;o++)(0===o||31===o&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):i.appendBits(0===o?Math.min(this.binaryShiftByteCount,31):this.binaryShiftByteCount-31,5)),i.appendBits(s[this.binaryShiftStart+o],8)}addBinaryShift(i,s){return new Zn(this,i,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function dr(w,i,s){return new tn(w,i,s)}const zs=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],xn=new tn(null,0,0),K=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];const Je=function Te(w){for(let i of w)Ct.fill(i,-1);return w[0][4]=0,w[1][4]=0,w[1][0]=28,w[3][4]=0,w[2][4]=0,w[2][0]=15,w}(Ct.createInt32Array(6,6));class ot{constructor(i,s,o,l){this.token=i,this.mode=s,this.binaryShiftByteCount=o,this.bitCount=l}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,s){let o=this.bitCount,l=this.token;if(i!==this.mode){let f=K[this.mode][i];l=dr(l,65535&f,f>>16),o+=f>>16}let u=2===i?4:5;return l=dr(l,s,u),new ot(l,i,0,o+u)}shiftAndAppend(i,s){let o=this.token,l=2===this.mode?4:5;return o=dr(o,Je[this.mode][i],l),o=dr(o,s,5),new ot(o,this.mode,0,this.bitCount+l+5)}addBinaryShiftChar(i){let s=this.token,o=this.mode,l=this.bitCount;if(4===this.mode||2===this.mode){let h=K[o][0];s=dr(s,65535&h,h>>16),l+=h>>16,o=0}let f=new ot(s,o,this.binaryShiftByteCount+1,l+(0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8));return 2078===f.binaryShiftByteCount&&(f=f.endBinaryShift(i+1)),f}endBinaryShift(i){if(0===this.binaryShiftByteCount)return this;let s=this.token;return s=function pn(w,i,s){return new Zn(w,i,s)}(s,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new ot(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let s=this.bitCount+(K[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?s+=ot.calculateBinaryShiftCost(i)-ot.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(s+=10),s<=i.bitCount}toBitArray(i){let s=[];for(let l=this.endBinaryShift(i.length).token;null!==l;l=l.getPrevious())s.unshift(l);let o=new Be;for(const l of s)l.appendTo(o,i);return o}toString(){return ue.format("%s bits=%d bytes=%d",zs[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}ot.INITIAL_STATE=new ot(xn,0,0,0);const mt=function Fr(w){const i=ue.getCharCode(" "),s=ue.getCharCode("."),o=ue.getCharCode(",");w[0][i]=1;const l=ue.getCharCode("Z"),u=ue.getCharCode("A");for(let I=u;I<=l;I++)w[0][I]=I-u+2;w[1][i]=1;const f=ue.getCharCode("z"),h=ue.getCharCode("a");for(let I=h;I<=f;I++)w[1][I]=I-h+2;w[2][i]=1;const g=ue.getCharCode("9"),x=ue.getCharCode("0");for(let I=x;I<=g;I++)w[2][I]=I-x+2;w[2][o]=12,w[2][s]=13;const E=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let I=0;I<E.length;I++)w[3][ue.getCharCode(E[I])]=I;const D=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let I=0;I<D.length;I++)ue.getCharCode(D[I])>0&&(w[4][ue.getCharCode(D[I])]=I);return w}(Ct.createInt32Array(5,256));class An{constructor(i){this.text=i}encode(){const i=ue.getCharCode(" "),s=ue.getCharCode("\n");let o=Yt.singletonList(ot.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let f,h=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case ue.getCharCode("\r"):f=h===s?2:0;break;case ue.getCharCode("."):f=h===i?3:0;break;case ue.getCharCode(","):f=h===i?4:0;break;case ue.getCharCode(":"):f=h===i?5:0;break;default:f=0}f>0?(o=An.updateStateListForPair(o,u,f),u++):o=this.updateStateListForChar(o,u)}return Yt.min(o,(u,f)=>u.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,s){const o=[];for(let l of i)this.updateStateForChar(l,s,o);return An.simplifyStates(o)}updateStateForChar(i,s,o){let l=255&this.text[s],u=mt[i.getMode()][l]>0,f=null;for(let h=0;h<=4;h++){let g=mt[h][l];if(g>0){if(null==f&&(f=i.endBinaryShift(s)),!u||h===i.getMode()||2===h){const x=f.latchAndAppend(h,g);o.push(x)}if(!u&&Je[i.getMode()][h]>=0){const x=f.shiftAndAppend(h,g);o.push(x)}}}if(i.getBinaryShiftByteCount()>0||0===mt[i.getMode()][l]){let h=i.addBinaryShiftChar(s);o.push(h)}}static updateStateListForPair(i,s,o){const l=[];for(let u of i)this.updateStateForPair(u,s,o,l);return this.simplifyStates(l)}static updateStateForPair(i,s,o,l){let u=i.endBinaryShift(s);if(l.push(u.latchAndAppend(4,o)),4!==i.getMode()&&l.push(u.shiftAndAppend(4,o)),3===o||4===o){let f=u.latchAndAppend(2,16-o).latchAndAppend(2,1);l.push(f)}if(i.getBinaryShiftByteCount()>0){let f=i.addBinaryShiftChar(s).addBinaryShiftChar(s+1);l.push(f)}}static simplifyStates(i){let s=[];for(const o of i){let l=!0;for(const u of s){if(u.isBetterThanOrEqualTo(o)){l=!1;break}o.isBetterThanOrEqualTo(u)&&(s=s.filter(f=>f!==u))}l&&s.push(o)}return s}}class ce{constructor(){}static encodeBytes(i){return ce.encode(i,ce.DEFAULT_EC_PERCENT,ce.DEFAULT_AZTEC_LAYERS)}static encode(i,s,o){let h,g,x,E,D,l=new An(i).encode(),u=Ce.truncDivision(l.getSize()*s,100)+11,f=l.getSize()+u;if(o!==ce.DEFAULT_AZTEC_LAYERS){if(h=o<0,g=Math.abs(o),g>(h?ce.MAX_NB_BITS_COMPACT:ce.MAX_NB_BITS))throw new te(ue.format("Illegal value %s for layers",o));x=ce.totalBitsInLayer(g,h),E=ce.WORD_SIZE[g];let k=x-x%E;if(D=ce.stuffBits(l,E),D.getSize()+u>k)throw new te("Data to large for user specified layer");if(h&&D.getSize()>64*E)throw new te("Data to large for user specified layer")}else{E=0,D=null;for(let k=0;;k++){if(k>ce.MAX_NB_BITS)throw new te("Data too large for an Aztec code");if(h=k<=3,g=h?k+1:k,x=ce.totalBitsInLayer(g,h),f>x)continue;(null==D||E!==ce.WORD_SIZE[g])&&(E=ce.WORD_SIZE[g],D=ce.stuffBits(l,E));let be=x-x%E;if(!(h&&D.getSize()>64*E)&&D.getSize()+u<=be)break}}let L,I=ce.generateCheckWords(D,x,E),T=D.getSize()/E,S=ce.generateModeMessage(h,g,T),M=(h?11:14)+4*g,R=new Int32Array(M);if(h){L=M;for(let k=0;k<R.length;k++)R[k]=k}else{L=M+1+2*Ce.truncDivision(Ce.truncDivision(M,2)-1,15);let k=Ce.truncDivision(M,2),be=Ce.truncDivision(L,2);for(let we=0;we<k;we++){let nn=we+Ce.truncDivision(we,15);R[k-we-1]=be-nn-1,R[k+we]=be+nn+1}}let U=new ht(L);for(let k=0,be=0;k<g;k++){let we=4*(g-k)+(h?9:12);for(let nn=0;nn<we;nn++){let Pn=2*nn;for(let rn=0;rn<2;rn++)I.get(be+Pn+rn)&&U.set(R[2*k+rn],R[2*k+nn]),I.get(be+2*we+Pn+rn)&&U.set(R[2*k+nn],R[M-1-2*k-rn]),I.get(be+4*we+Pn+rn)&&U.set(R[M-1-2*k-rn],R[M-1-2*k-nn]),I.get(be+6*we+Pn+rn)&&U.set(R[M-1-2*k-nn],R[2*k+rn])}be+=8*we}if(ce.drawModeMessage(U,h,L,S),h)ce.drawBullsEye(U,Ce.truncDivision(L,2),5);else{ce.drawBullsEye(U,Ce.truncDivision(L,2),7);for(let k=0,be=0;k<Ce.truncDivision(M,2)-1;k+=15,be+=16)for(let we=1&Ce.truncDivision(L,2);we<L;we+=2)U.set(Ce.truncDivision(L,2)-be,we),U.set(Ce.truncDivision(L,2)+be,we),U.set(we,Ce.truncDivision(L,2)-be),U.set(we,Ce.truncDivision(L,2)+be)}let q=new en;return q.setCompact(h),q.setSize(L),q.setLayers(g),q.setCodeWords(T),q.setMatrix(U),q}static drawBullsEye(i,s,o){for(let l=0;l<o;l+=2)for(let u=s-l;u<=s+l;u++)i.set(u,s-l),i.set(u,s+l),i.set(s-l,u),i.set(s+l,u);i.set(s-o,s-o),i.set(s-o+1,s-o),i.set(s-o,s-o+1),i.set(s+o,s-o),i.set(s+o,s-o+1),i.set(s+o,s+o-1)}static generateModeMessage(i,s,o){let l=new Be;return i?(l.appendBits(s-1,2),l.appendBits(o-1,6),l=ce.generateCheckWords(l,28,4)):(l.appendBits(s-1,5),l.appendBits(o-1,11),l=ce.generateCheckWords(l,40,4)),l}static drawModeMessage(i,s,o,l){let u=Ce.truncDivision(o,2);if(s)for(let f=0;f<7;f++){let h=u-3+f;l.get(f)&&i.set(h,u-5),l.get(f+7)&&i.set(u+5,h),l.get(20-f)&&i.set(h,u+5),l.get(27-f)&&i.set(u-5,h)}else for(let f=0;f<10;f++){let h=u-5+f+Ce.truncDivision(f,5);l.get(f)&&i.set(h,u-7),l.get(f+10)&&i.set(u+7,h),l.get(29-f)&&i.set(h,u+7),l.get(39-f)&&i.set(u-7,h)}}static generateCheckWords(i,s,o){let l=i.getSize()/o,u=new Jr(ce.getGF(o)),f=Ce.truncDivision(s,o),h=ce.bitsToWords(i,o,f);u.encode(h,f-l);let g=s%o,x=new Be;x.appendBits(0,g);for(const E of Array.from(h))x.appendBits(E,o);return x}static bitsToWords(i,s,o){let u,f,l=new Int32Array(o);for(u=0,f=i.getSize()/s;u<f;u++){let h=0;for(let g=0;g<s;g++)h|=i.get(u*s+g)?1<<s-g-1:0;l[u]=h}return l}static getGF(i){switch(i){case 4:return Ve.AZTEC_PARAM;case 6:return Ve.AZTEC_DATA_6;case 8:return Ve.AZTEC_DATA_8;case 10:return Ve.AZTEC_DATA_10;case 12:return Ve.AZTEC_DATA_12;default:throw new te("Unsupported word size "+i)}}static stuffBits(i,s){let o=new Be,l=i.getSize(),u=(1<<s)-2;for(let f=0;f<l;f+=s){let h=0;for(let g=0;g<s;g++)(f+g>=l||i.get(f+g))&&(h|=1<<s-1-g);(h&u)===u?(o.appendBits(h&u,s),f--):0==(h&u)?(o.appendBits(1|h,s),f--):o.appendBits(h,s)}return o}static totalBitsInLayer(i,s){return((s?88:112)+16*i)*i}}ce.DEFAULT_EC_PERCENT=33,ce.DEFAULT_AZTEC_LAYERS=0,ce.MAX_NB_BITS=32,ce.MAX_NB_BITS_COMPACT=4,ce.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class hr{encode(i,s,o,l){return this.encodeWithHints(i,s,o,l,null)}encodeWithHints(i,s,o,l,u){let f=Pi.ISO_8859_1,h=ce.DEFAULT_EC_PERCENT,g=ce.DEFAULT_AZTEC_LAYERS;return null!=u&&(u.has(ge.CHARACTER_SET)&&(f=Jo.forName(u.get(ge.CHARACTER_SET).toString())),u.has(ge.ERROR_CORRECTION)&&(h=Ce.parseInt(u.get(ge.ERROR_CORRECTION).toString())),u.has(ge.AZTEC_LAYERS)&&(g=Ce.parseInt(u.get(ge.AZTEC_LAYERS).toString()))),hr.encodeLayers(i,s,o,l,f,h,g)}static encodeLayers(i,s,o,l,u,f,h){if(s!==ae.AZTEC)throw new te("Can only encode AZTEC, but got "+s);let g=ce.encode(ue.getBytes(i,u),f,h);return hr.renderResult(g,o,l)}static renderResult(i,s,o){let l=i.getMatrix();if(null==l)throw new or;let u=l.getWidth(),f=l.getHeight(),h=Math.max(s,u),g=Math.max(o,f),x=Math.min(h/u,g/f),E=(h-u*x)/2,D=(g-f*x)/2,I=new ht(h,g);for(let T=0,S=D;T<f;T++,S+=x)for(let M=0,R=E;M<u;M++,R+=x)l.get(M,T)&&I.setRegion(R,S,x,x);return I}}W.ArgumentException=Jt,W.ArithmeticException=di,W.AztecCode=en,W.AztecCodeReader=Mi,W.AztecCodeWriter=hr,W.AztecDecoder=Vo,W.AztecDetector=ml,W.AztecDetectorResult=Ms,W.AztecEncoder=ce,W.AztecHighLevelEncoder=An,W.AztecPoint=Gt,W.BarcodeFormat=ae,W.Binarizer=_s,W.BinaryBitmap=un,W.BitArray=Be,W.BitMatrix=ht,W.BitSource=pi,W.BrowserAztecCodeReader=class Sf extends br{constructor(i=500){super(new Mi,i)}},W.BrowserBarcodeReader=class Dl extends br{constructor(i=500,s){super(new qr(s),i,s)}},W.BrowserCodeReader=br,W.BrowserDatamatrixCodeReader=class Wo extends br{constructor(i=500){super(new pe,i)}},W.BrowserMultiFormatReader=class We extends br{constructor(i=null,s=500){const o=new Sl;o.setHints(i),super(o,s)}decodeBitmap(i){return this.reader.decodeWithState(i)}},W.BrowserPDF417Reader=class Ff extends br{constructor(i=500){super(new Nt,i)}},W.BrowserQRCodeReader=class Pf extends br{constructor(i=500){super(new Nr,i)}},W.BrowserQRCodeSvgWriter=Ml,W.CharacterSetECI=Y,W.ChecksumException=at,W.Code128Reader=Q,W.Code39Reader=jo,W.DataMatrixDecodedBitStreamParser=Rn,W.DataMatrixReader=pe,W.DecodeHintType=et,W.DecoderResult=sr,W.DefaultGridSampler=pl,W.DetectorResult=vs,W.EAN13Reader=hi,W.EncodeHintType=ge,W.Exception=Bt,W.FormatException=Z,W.GenericGF=Ve,W.GenericGFPoly=Zt,W.GlobalHistogramBinarizer=gt,W.GridSampler=Uo,W.GridSamplerInstance=Qt,W.HTMLCanvasElementLuminanceSource=lt,W.HybridBinarizer=De,W.ITFReader=Xe,W.IllegalArgumentException=te,W.IllegalStateException=or,W.InvertedLuminanceSource=zn,W.LuminanceSource=Ti,W.MathUtils=Re,W.MultiFormatOneDReader=qr,W.MultiFormatReader=Sl,W.MultiFormatWriter=class Ko{encode(i,s,o,l,u){let f;if(s!==ae.QR_CODE)throw new te("No encoder available for format "+s);return f=new Gs,f.encode(i,s,o,l,u)}},W.NotFoundException=V,W.OneDReader=pt,W.PDF417DecodedBitStreamParser=F,W.PDF417DecoderErrorCorrection=Tl,W.PDF417Reader=Nt,W.PDF417ResultMetadata=Qo,W.PerspectiveTransform=Mn,W.PlanarYUVLuminanceSource=$o,W.QRCodeByteMatrix=ei,W.QRCodeDataMask=Dn,W.QRCodeDecodedBitStreamParser=Il,W.QRCodeDecoderErrorCorrectionLevel=ie,W.QRCodeDecoderFormatInformation=At,W.QRCodeEncoder=Ye,W.QRCodeEncoderQRCode=wi,W.QRCodeMaskUtil=fr,W.QRCodeMatrixUtil=oe,W.QRCodeMode=le,W.QRCodeReader=Nr,W.QRCodeVersion=se,W.QRCodeWriter=Gs,W.RGBLuminanceSource=Rr,W.RSS14Reader=rt,W.RSSExpandedReader=G,W.ReaderException=Hs,W.ReedSolomonDecoder=Si,W.ReedSolomonEncoder=Jr,W.ReedSolomonException=Xr,W.Result=Ht,W.ResultMetadataType=st,W.ResultPoint=ee,W.StringUtils=ue,W.UnsupportedOperationException=ui,W.VideoInputDevice=bs,W.WhiteRectangleDetector=vi,W.WriterException=Ne,W.ZXingArrays=Ct,W.ZXingCharset=Jo,W.ZXingInteger=Ce,W.ZXingStandardCharsets=Pi,W.ZXingStringBuilder=je,W.ZXingStringEncoding=Dt,W.ZXingSystem=Ge,Object.defineProperty(W,"__esModule",{value:!0})}(Po)}},Fo=>{Fo(Fo.s=16)}]);